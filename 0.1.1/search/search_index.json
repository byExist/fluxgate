{"config":{"lang":["en","ko"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Fluxgate","text":"<p>A modern, composable circuit breaker library for Python with full support for both synchronous and asynchronous code.</p>"},{"location":"#why-fluxgate","title":"Why Fluxgate?","text":"<p>Circuit breakers prevent cascading failures in distributed systems by monitoring service health and temporarily blocking calls to failing services. Fluxgate makes this easy with:</p> <ul> <li>Sync &amp; Async: First-class support for both synchronous and asynchronous code</li> <li>Composable: Build complex failure detection logic using simple, reusable components</li> <li>Zero Dependencies: Core library has no external dependencies</li> <li>Fully Typed: Complete type hints for better IDE support</li> <li>Production Ready: Built-in monitoring with Prometheus, Slack, and logging</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install fluxgate\n</code></pre>"},{"location":"#basic-example","title":"Basic Example","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef call_payment_api(amount: float):\n    return requests.post(\"https://api.example.com/pay\", json={\"amount\": amount})\n</code></pre>"},{"location":"#how-it-works","title":"How It Works","text":"<p>The circuit breaker operates in three main states:</p> <pre><code>CLOSED --[tripper]--&gt; OPEN --[retry]--&gt; HALF_OPEN --[!tripper]--&gt; CLOSED\n                       ^                   |\n                       +----[tripper]------+\n</code></pre> <ul> <li>CLOSED: Normal operation, all calls pass through</li> <li>OPEN: Failure threshold exceeded, calls are blocked</li> <li>HALF_OPEN: Testing recovery, limited calls allowed</li> </ul>"},{"location":"#core-components","title":"Core Components","text":"<p>Fluxgate uses composable components to build flexible failure detection logic:</p> Component Purpose Examples Windows Track call history <code>CountWindow(100)</code> - last 100 calls <code>TimeWindow(60)</code> - last 60 seconds Trackers Define what to track <code>TypeOf(ConnectionError)</code> - track specific errors <code>Custom(func)</code> - custom logic Trippers When to open circuit <code>FailureRate(0.5)</code> - 50% failure rate <code>AvgLatency(2.0)</code> - slow responses Retries When to retry <code>Cooldown(60.0)</code> - wait 60 seconds <code>Backoff(10.0)</code> - exponential backoff Permits Control recovery <code>Random(0.5)</code> - allow 50% of calls <code>RampUp(0.1, 0.8, 60)</code> - gradual ramp"},{"location":"#async-support","title":"Async Support","text":"<p>Full support for asyncio applications:</p> <pre><code>from fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n    max_half_open_calls=5,\n)\n\n@cb\nasync def call_async_api():\n    async with httpx.AsyncClient() as client:\n        return await client.get(\"https://api.example.com/data\")\n</code></pre>"},{"location":"#production-example","title":"Production Example","text":"<p>A production-ready circuit breaker for an external payment API:</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Track only 5xx errors and network failures\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0, jitter_ratio=0.1),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\"https://payment-api.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Components - Deep dive into windows, trackers, trippers, retries, and permits</li> <li>See Examples - Real-world usage patterns</li> <li>Read API Reference - Complete API documentation</li> </ul>"},{"location":"changelog/","title":"Release Notes","text":""},{"location":"changelog/#011","title":"0.1.1","text":"<p>Initial release.</p>"},{"location":"changelog/#features","title":"Features","text":"<ul> <li>\u2728 Add <code>CircuitBreaker</code> and <code>AsyncCircuitBreaker</code> for sync and async support.</li> <li>\u2728 Add sliding windows: <code>CountWindow</code> (count-based) and <code>TimeWindow</code> (time-based).</li> <li>\u2728 Add composable trackers with <code>&amp;</code>, <code>|</code>, <code>~</code> operators: <code>All</code>, <code>TypeOf</code>, <code>Custom</code>.</li> <li>\u2728 Add composable trippers with <code>&amp;</code>, <code>|</code> operators: <code>Closed</code>, <code>HalfOpened</code>, <code>MinRequests</code>, <code>FailureRate</code>, <code>AvgLatency</code>, <code>SlowRate</code>.</li> <li>\u2728 Add retry strategies: <code>Never</code>, <code>Always</code>, <code>Cooldown</code>, <code>Backoff</code>.</li> <li>\u2728 Add permit strategies: <code>Random</code>, <code>RampUp</code>.</li> <li>\u2728 Add listeners for monitoring: <code>LogListener</code>, <code>PrometheusListener</code>, <code>SlackListener</code>.</li> <li>\u2728 Add manual control methods: <code>disable()</code>, <code>enable()</code>, <code>force_open()</code>, <code>reset()</code>.</li> <li>\u2728 Full type hints with <code>py.typed</code> marker.</li> </ul>"},{"location":"circuit-breaker/","title":"Circuit Breaker","text":"<p>Circuit Breaker is a design pattern that automatically blocks calls to failing services in distributed systems to prevent cascading failures.</p>"},{"location":"circuit-breaker/#core-concepts","title":"Core Concepts","text":"<p>Circuit Breaker works like an electrical circuit breaker:</p> <ul> <li>In normal state, all calls are allowed (circuit is closed)</li> <li>When failures exceed threshold, calls are blocked (circuit opens)</li> <li>After some time, recovery is tested (half-open state)</li> </ul>"},{"location":"circuit-breaker/#state-transitions","title":"State Transitions","text":"<p>Circuit Breaker has 6 states:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 CLOSED  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt;\u2502 OPEN \u2502&lt;\u2500\u2500\u2500\u2500\u2500\u2510\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 [tripper] \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n     ^                    \u2502         \u2502\n     \u2502                    \u2502[retry]  \u2502[tripper]\n     \u2502                    v         \u2502\n     \u2502               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 HALF_OPEN \u2502\u2500\u2500\u2518\n        [!tripper]   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"circuit-breaker/#state-closed","title":"CLOSED","text":"<p>Normal operating state</p> <ul> <li>All calls pass through to the actual service</li> <li>Continuously monitors failure metrics</li> <li>Transitions to OPEN when Tripper condition is met</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import All\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=All(),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),  # Only evaluate in CLOSED state\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n</code></pre>"},{"location":"circuit-breaker/#state-open","title":"OPEN","text":"<p>Call blocking state</p> <ul> <li>All calls immediately raise <code>CallNotPermittedError</code></li> <li>Protects failing service and prevents resource waste</li> <li>Transitions to HALF_OPEN after duration based on Retry strategy</li> </ul> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef call_api():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = call_api()\nexcept CallNotPermittedError as e:\n    print(f\"Circuit is open: {e.message}\")\n    # Execute fallback logic\n    return {\"fallback\": \"data\"}\n</code></pre>"},{"location":"circuit-breaker/#state-half-open","title":"HALF_OPEN","text":"<p>Recovery testing state</p> <ul> <li>Allows limited calls based on Permit strategy</li> <li>Transitions to CLOSED on success, back to OPEN on failure</li> <li>Minimizes service load through gradual recovery</li> </ul> <pre><code>from fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=All(),\n    tripper=MinRequests(5) &amp; FailureRate(0.3),  # Stricter criteria in HALF_OPEN\n    retry=Cooldown(duration=60.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),  # Start at 10%, gradual increase\n)\n</code></pre>"},{"location":"circuit-breaker/#state-metrics-only","title":"METRICS_ONLY","text":"<p>Metrics collection only</p> <ul> <li>All calls pass through to the actual service</li> <li>Collects metrics but never opens circuit</li> <li>Useful for monitoring tests before production deployment</li> </ul> <pre><code># Collect metrics before production deployment\ncb.metrics_only()\n\n# Later activate actual Circuit Breaker\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#state-disabled","title":"DISABLED","text":"<p>Circuit Breaker disabled</p> <ul> <li>All calls pass through to the actual service</li> <li>No metrics collection</li> <li>Useful for debugging or emergencies</li> </ul> <pre><code># Disable Circuit Breaker in emergency\ncb.disable()\n\n# Re-enable later\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#state-forced-open","title":"FORCED_OPEN","text":"<p>Forcefully block calls</p> <ul> <li>All calls immediately raise <code>CallNotPermittedError</code></li> <li>No automatic recovery (requires manual reset)</li> <li>Useful for planned maintenance or emergency shutdown</li> </ul> <pre><code># Force circuit open for maintenance\ncb.force_open()\n\n# Recover after maintenance\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#usage","title":"Usage","text":""},{"location":"circuit-breaker/#decorator-usage","title":"Decorator Style","text":"<p>The most common usage pattern.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = requests.post(\"https://payment.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"circuit-breaker/#call-usage","title":"Direct Call Style","text":"<p>Useful when you need to protect functions dynamically.</p> <pre><code>def process_payment(amount: float):\n    response = requests.post(\"https://payment.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n\n# Call through Circuit Breaker\nresult = cb.call(process_payment, amount=100.0)\n</code></pre>"},{"location":"circuit-breaker/#async-usage","title":"Async Support","text":"<p>Full support for asyncio applications.</p> <p>Note</p> <p>AsyncCircuitBreaker limits the number of concurrent calls in HALF_OPEN state using the <code>max_half_open_calls</code> parameter. The default is 10, and concurrency is controlled using asyncio.Semaphore. This limit prevents overwhelming a service that is still recovering.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.ConnectError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n    max_half_open_calls=5,  # Limit concurrent calls in HALF_OPEN (default: 10)\n)\n\n@cb\nasync def fetch_data():\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\"https://api.example.com/data\")\n        response.raise_for_status()\n        return response.json()\n\n# Usage\nresult = await fetch_data()\n</code></pre>"},{"location":"circuit-breaker/#info","title":"Info","text":"<p>Check current state and metrics of Circuit Breaker.</p> <pre><code>info = cb.info()\nprint(f\"Circuit: {info.name}\")\nprint(f\"State: {info.state}\")\nprint(f\"Changed at: {info.changed_at}\")\nprint(f\"Reopens: {info.reopens}\")\nprint(f\"Metrics: {info.metrics}\")\n\n# Example output:\n# Circuit: payment_api\n# State: closed\n# Changed at: 1234567890.123\n# Reopens: 0\n# Metrics: Metric(total_count=100, failure_count=5, total_duration=45.2, slow_count=3)\n</code></pre>"},{"location":"circuit-breaker/#manual-control","title":"Manual Control","text":"<p>Manually control Circuit Breaker when needed.</p> <pre><code># Reset to CLOSED (also clears metrics)\ncb.reset()\n\n# Transition to METRICS_ONLY\ncb.metrics_only()\n\n# Transition to DISABLED\ncb.disable()\n\n# Transition to FORCED_OPEN\ncb.force_open()\n\n# Change state without notifying listeners\ncb.reset(notify=False)\n</code></pre>"},{"location":"circuit-breaker/#error-handling","title":"Error Handling","text":"<p>How to handle errors when circuit is open.</p>"},{"location":"circuit-breaker/#fallback-parameter","title":"Using fallback parameter (recommended)","text":"<p>Using the <code>fallback</code> parameter, a fallback function is automatically called on any exception.</p> <pre><code># Fallback function receives the exception as argument\ndef handle_error(e: Exception) -&gt; dict:\n    if isinstance(e, CallNotPermittedError):\n        return get_cached_data()  # Circuit open\n    if isinstance(e, TimeoutError):\n        return get_stale_data()   # Timeout\n    raise e  # Re-raise other exceptions\n\n@cb(fallback=handle_error)\ndef api_call() -&gt; dict:\n    return requests.get(\"https://api.example.com\").json()\n\n# Usage: Fallback is automatically called on exception\nresult = api_call()\n</code></pre>"},{"location":"circuit-breaker/#call-with-fallback","title":"Using call_with_fallback","text":"<p>You can also explicitly specify a fallback when calling.</p> <pre><code>result = cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"circuit-breaker/#manual-try-except","title":"Manual try/except approach","text":"<pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef api_call():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = api_call()\nexcept CallNotPermittedError:\n    # Circuit is open - Fallback handling\n    result = get_cached_data()\nexcept Exception as e:\n    # Actual service error\n    logging.error(f\"API call failed: {e}\")\n    raise\n</code></pre>"},{"location":"circuit-breaker/#complete-example","title":"Complete Example","text":"<p>Complete example ready for production use.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Track only 5xx errors and network failures\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; (FailureRate(0.6) | SlowRate(0.3))) |    # CLOSED: 60% failure or 30% slow calls\n        (HalfOpened() &amp; (FailureRate(0.5) | SlowRate(0.2)))  # HALF_OPEN: 50% failure or 20% slow calls\n    ),\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # Prevent thundering herd\n    ),\n    permit=RampUp(\n        initial=0.1,      # Start at 10%\n        final=0.5,        # Increase to 50%\n        duration=60.0     # Over 60 seconds\n    ),\n    listeners=[LogListener(), PrometheusListener()],\n    slow_threshold=3.0,  # Mark calls over 3 seconds as slow\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://payment-api.example.com/charge\",\n        json={\"amount\": amount},\n        timeout=5.0\n    )\n    response.raise_for_status()\n    return response.json()\n\n# Usage\ntry:\n    result = charge_payment(amount=100.0)\n    print(f\"Payment successful: {result}\")\nexcept CallNotPermittedError:\n    print(\"Payment service is temporarily unavailable\")\n    # Fallback: Queue payment\n    queue_payment(amount=100.0)\nexcept httpx.HTTPStatusError as e:\n    print(f\"Payment failed with status {e.response.status_code}\")\n    raise\n</code></pre>"},{"location":"circuit-breaker/#next-steps","title":"Next Steps","text":"<ul> <li>Components - Learn components that make up Circuit Breaker</li> <li>Examples - Real-world usage patterns and scenarios</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"examples/","title":"Examples","text":"<p>Get started quickly with real-world use cases.</p>"},{"location":"examples/#basic-usage","title":"Basic Usage","text":""},{"location":"examples/#http-api-protection","title":"HTTP API Protection","text":"<p>Protect external API calls with a circuit breaker.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://api.example.com/charge\",\n        json={\"amount\": amount}\n    )\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"examples/#async-usage","title":"Async Usage","text":""},{"location":"examples/#fastapi-integration","title":"FastAPI Integration","text":"<p>Apply circuit breakers to FastAPI endpoints.</p> <pre><code>from fastapi import FastAPI, HTTPException\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker, CallNotPermittedError\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\napp = FastAPI()\n\ncb = AsyncCircuitBreaker(\n    name=\"external_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@app.get(\"/data\")\nasync def get_data():\n    try:\n        @cb\n        async def fetch():\n            async with httpx.AsyncClient() as client:\n                response = await client.get(\"https://api.example.com/data\")\n                response.raise_for_status()\n                return response.json()\n\n        return await fetch()\n    except CallNotPermittedError:\n        raise HTTPException(status_code=503, detail=\"Service unavailable\")\n</code></pre>"},{"location":"examples/#multiple-circuit-breakers","title":"Multiple Circuit Breakers","text":"<p>Create independent circuit breakers for each service.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\n# Per-service circuit breakers\npayment_cb = AsyncCircuitBreaker(\n    name=\"payment_service\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\ninventory_cb = AsyncCircuitBreaker(\n    name=\"inventory_service\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.3),\n    retry=Cooldown(duration=30.0),\n    permit=Random(ratio=0.7),\n)\n\n@payment_cb\nasync def charge_payment(amount: float):\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            \"https://payment.example.com/charge\",\n            json={\"amount\": amount}\n        )\n        response.raise_for_status()\n        return response.json()\n\n@inventory_cb\nasync def check_inventory(product_id: str):\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            f\"https://inventory.example.com/products/{product_id}\"\n        )\n        response.raise_for_status()\n        return response.json()\n</code></pre>"},{"location":"examples/#advanced-usage","title":"Advanced Usage","text":""},{"location":"examples/#custom-error-tracking","title":"Custom Error Tracking","text":"<p>Track only specific types of errors in the circuit breaker.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\n# Track only 5xx errors and network failures\ndef is_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\ncb = CircuitBreaker(\n    name=\"api_client\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_server_error),\n    tripper=Closed() &amp; MinRequests(20) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n</code></pre>"},{"location":"examples/#different-thresholds-per-state","title":"Different Thresholds Per State","text":"<p>Apply different thresholds for CLOSED and HALF_OPEN states.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    # CLOSED: 60% failure rate, HALF_OPEN: 50% failure rate\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Cooldown(duration=60.0),\n    # Gradual traffic increase: 10% \ufffd 80% over 60s\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n)\n</code></pre>"},{"location":"examples/#fallback-handling","title":"Fallback Handling","text":"<p>Perform alternative actions when exceptions occur. Using the <code>fallback</code> parameter, a fallback function is automatically called on any exception.</p>"},{"location":"examples/#using-fallback-with-decorator","title":"Using fallback with decorator","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n# Fallback function receives the exception as argument\ndef fallback_handler(e: Exception) -&gt; dict:\n    if isinstance(e, ConnectionError):\n        return get_cached_data()\n    raise e  # Re-raise other exceptions\n\n@cb(fallback=fallback_handler)\ndef fetch_data() -&gt; dict:\n    return fetch_from_api()\n\n# Usage: Fallback is automatically called on circuit open or error\nresult = fetch_data()\n</code></pre>"},{"location":"examples/#using-call_with_fallback","title":"Using call_with_fallback","text":"<p>You can also explicitly specify a fallback when calling.</p> <pre><code># Pass function and fallback together\nresult = cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n\n# With arguments\nresult = cb.call_with_fallback(\n    fetch_user_data,\n    lambda e: {\"user_id\": user_id, \"cached\": True},\n    user_id,  # Arguments passed to the original function\n)\n</code></pre>"},{"location":"examples/#async-fallback","title":"Async fallback","text":"<p>AsyncCircuitBreaker works the same way.</p> <pre><code>from fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    # ... configuration\n)\n\n@cb(fallback=lambda e: {\"status\": \"fallback\"})\nasync def fetch_data() -&gt; dict:\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\"https://api.example.com/data\")\n        return response.json()\n\n# Or use call_with_fallback\nresult = await cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"examples/#manual-tryexcept-legacy-approach","title":"Manual try/except (legacy approach)","text":"<p>You can also handle exceptions directly without fallback.</p> <pre><code>from fluxgate import CallNotPermittedError\n\n@cb\ndef fetch():\n    return fetch_from_api()\n\ntry:\n    result = fetch()\nexcept CallNotPermittedError:\n    # When circuit is open\n    result = get_cached_data()\nexcept ConnectionError:\n    # On connection failure\n    result = get_cached_data()\n</code></pre>"},{"location":"examples/#factory-function","title":"Factory Function","text":"<p>Create circuit breakers with different policies per endpoint.</p> <pre><code>from fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\nimport httpx\n\ndef create_payment_circuit_breaker(\n    endpoint: str,\n    slow_threshold: float,\n    failure_rate: float = 0.5,\n    slow_rate: float = 0.5,\n) -&gt; AsyncCircuitBreaker:\n    return AsyncCircuitBreaker(\n        name=f\"payment_{endpoint}\",\n        window=CountWindow(size=100),\n        tracker=TypeOf(httpx.HTTPError),\n        tripper=Closed() &amp; MinRequests(10) &amp; (\n            FailureRate(failure_rate) | SlowRate(slow_rate, slow_threshold)\n        ),\n        retry=Cooldown(duration=60.0),\n        permit=Random(ratio=0.5),\n    )\n\n# Store in variables\ncharge_cb = create_payment_circuit_breaker(\"charge\", slow_threshold=2.0, failure_rate=0.3)\nrefund_cb = create_payment_circuit_breaker(\"refund\", slow_threshold=3.0, failure_rate=0.3)\nhistory_cb = create_payment_circuit_breaker(\"history\", slow_threshold=0.5)\n\n# Or use directly as decorator\n@create_payment_circuit_breaker(\"charge\", slow_threshold=2.0, failure_rate=0.3)\nasync def charge_payment(amount: float):\n    ...\n</code></pre>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<ul> <li>Components - Detailed component documentation</li> <li>Listeners - Monitoring and alerting setup</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"about/comparison/","title":"Comparison with Other Libraries","text":"<p>This page compares Fluxgate with other Python circuit breaker libraries to help you choose the right tool for your needs.</p>"},{"location":"about/comparison/#overview","title":"Overview","text":"Library Python License"},{"location":"about/comparison/#feature-comparison","title":"Feature Comparison","text":"Feature Fluxgate circuitbreaker pybreaker aiobreaker Sync support Yes Yes Yes No Async support Yes (asyncio) Yes Tornado only Yes (asyncio) Trigger condition Failure rate Consecutive failures Consecutive failures Consecutive failures Sliding window Yes (Count/Time) No No No Composable conditions Yes (<code>&amp;</code>, <code>\\|</code>) No No No Latency-based trigger Yes (AvgLatency, SlowRate) No No No Fallback Yes Yes No No Redis storage No No Yes Yes Listeners/Monitoring Yes (Log, Prometheus, Slack) Yes (Monitor) Yes Yes Type hints Complete Partial Partial Partial HALF_OPEN control Yes (Permit) 1 test call success_threshold 1 test call"},{"location":"about/comparison/#key-differences","title":"Key Differences","text":""},{"location":"about/comparison/#trigger-conditions","title":"Trigger Conditions","text":"<p>Most circuit breaker libraries use consecutive failure count:</p> <pre><code># circuitbreaker / pybreaker\n# Opens after 5 consecutive failures\n@circuit(failure_threshold=5)\ndef call_api():\n    ...\n</code></pre> <p>Fluxgate uses failure rate within a sliding window:</p> <pre><code># Fluxgate\n# Opens when failure rate exceeds 50% in the last 100 calls\ncb = CircuitBreaker(\n    window=CountWindow(size=100),\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n    ...\n)\n</code></pre> <p>This approach is more robust because:</p> <ul> <li>A single success doesn't reset the failure count</li> <li>Handles intermittent failures better</li> <li>Provides more accurate health assessment</li> </ul>"},{"location":"about/comparison/#composable-conditions","title":"Composable Conditions","text":"<p>Fluxgate allows combining multiple conditions with logical operators:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\n\n# Different thresholds for different states\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n\n# Multiple trigger conditions\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"about/comparison/#latency-based-triggers","title":"Latency-Based Triggers","text":"<p>Fluxgate can open the circuit based on response time, not just errors:</p> <pre><code>from fluxgate.trippers import AvgLatency, SlowRate\n\n# Open when average latency exceeds 2 seconds\ntripper = MinRequests(10) &amp; AvgLatency(2.0)\n\n# Open when more than 30% of calls are slow (&gt;1s)\ncb = CircuitBreaker(\n    tripper=MinRequests(10) &amp; SlowRate(0.3),\n    slow_threshold=1.0,  # 1 second\n    ...\n)\n</code></pre>"},{"location":"about/comparison/#gradual-recovery","title":"Gradual Recovery","text":"<p>Fluxgate provides fine-grained control over HALF_OPEN state recovery:</p> <pre><code>from fluxgate.permits import RampUp\n\n# Gradually increase traffic from 10% to 80% over 60 seconds\ncb = CircuitBreaker(\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"about/comparison/#when-to-choose-each-library","title":"When to Choose Each Library","text":""},{"location":"about/comparison/#choose-fluxgate-when","title":"Choose Fluxgate when","text":"<ul> <li>You need failure rate-based triggers (not just consecutive failures)</li> <li>You want latency-based circuit breaking</li> <li>You need composable, complex trigger conditions</li> <li>You're building modern asyncio applications</li> <li>You value complete type hints and IDE support</li> </ul>"},{"location":"about/comparison/#choose-circuitbreaker-when","title":"Choose circuitbreaker when","text":"<ul> <li>You need a simple, well-tested solution</li> <li>Consecutive failure counting is sufficient</li> <li>You want minimal configuration</li> </ul>"},{"location":"about/comparison/#choose-pybreaker-when","title":"Choose pybreaker when","text":"<ul> <li>You need Redis storage for distributed state</li> <li>You're using Tornado for async</li> <li>You need the <code>success_threshold</code> feature</li> </ul>"},{"location":"about/comparison/#choose-aiobreaker-when","title":"Choose aiobreaker when","text":"<ul> <li>You need Redis storage with asyncio</li> <li>pybreaker's feature set meets your needs</li> </ul>"},{"location":"about/comparison/#see-also","title":"See Also","text":"<ul> <li>Circuit Breaker - Core concepts and usage</li> <li>Components - Detailed component documentation</li> </ul>"},{"location":"about/design/","title":"Design &amp; Inspiration","text":"<p>This document explains Fluxgate's design decisions and the projects that influenced them.</p>"},{"location":"about/design/#the-name","title":"The Name","text":"<p>A fluxgate magnetometer is a sensor that detects changes in magnetic fields by monitoring saturation states and responding at thresholds. This mirrors how a circuit breaker monitors system health and trips when thresholds are exceeded.</p>"},{"location":"about/design/#inspiration","title":"Inspiration","text":""},{"location":"about/design/#resilience4j","title":"Resilience4j","text":"<p>Resilience4j is a lightweight fault tolerance library for Java, inspired by Netflix Hystrix. Fluxgate borrows several key concepts from Resilience4j:</p> <p>Resilience4j tracks call outcomes using sliding windows (count-based or time-based) rather than simple consecutive failure counting. This provides more accurate health assessment of services. Fluxgate adopts this approach.</p> <pre><code># Fluxgate's sliding window approach inspired by Resilience4j\nfrom fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # Last 100 calls\nwindow = TimeWindow(size=60)    # Last 60 seconds\n</code></pre>"},{"location":"about/design/#django-permissions","title":"Django Permissions","text":"<p>Django's permission system supports combining permissions using bitwise operators (<code>&amp;</code>, <code>|</code>, <code>~</code>). This elegant pattern inspired Fluxgate's composable components.</p> <pre><code># Django REST framework's composable permissions\nfrom rest_framework.views import APIView\n\nclass MyView(APIView):\n    permission_classes = [IsAuthenticated &amp; (IsAdminUser | IsStaff)]\n</code></pre> <p>Fluxgate applies the same pattern to Trippers and Trackers:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# Composable trippers with logical operators\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre> <pre><code>from fluxgate.trackers import TypeOf\n\n# Composable trackers\ntracker = TypeOf(ConnectionError, TimeoutError) &amp; ~TypeOf(CancellationError)\n</code></pre> <p>This approach provides flexibility without complex configuration objects or builder patterns.</p>"},{"location":"about/design/#design-decisions","title":"Design Decisions","text":""},{"location":"about/design/#no-distributed-state-sharing","title":"No Distributed State Sharing","text":"<p>Fluxgate does not support distributed state sharing (e.g., Redis storage). Each CircuitBreaker instance manages state within a single process.</p> <p>Distributed state is not a fundamental requirement of the circuit breaker pattern. The pattern's core purpose is to prevent cascading failures by quickly stopping calls to unhealthy services.</p> <ul> <li>Each process can independently assess the health of downstream services. If a service is unhealthy, all processes will naturally detect this through their own failures.</li> <li>Adding distributed state introduces network latency, additional failure points, and operational complexity. These costs often outweigh the benefits.</li> </ul>"},{"location":"about/design/#not-thread-safe","title":"Not Thread-Safe","text":"<p><code>CircuitBreaker</code> is not thread-safe. For concurrent workloads, use <code>AsyncCircuitBreaker</code> with asyncio.</p> <p>Currently, Python's Global Interpreter Lock (GIL) means that multi-threaded Python code doesn't achieve true parallelism for CPU-bound tasks. As a result, most I/O-bound Python applications benefit more from asyncio than from threading. Modern Python web frameworks (FastAPI, Starlette, aiohttp) are asyncio-based, making <code>AsyncCircuitBreaker</code> the natural choice.</p>"},{"location":"about/design/#see-also","title":"See Also","text":"<ul> <li>Comparison - Compare with other Python libraries</li> <li>Components - Detailed component documentation</li> </ul>"},{"location":"api/core/","title":"Core","text":""},{"location":"api/core/#fluxgate.CircuitBreaker","title":"fluxgate.CircuitBreaker","text":"<pre><code>CircuitBreaker(\n    name: str,\n    window: IWindow,\n    tracker: ITracker,\n    tripper: ITripper,\n    retry: IRetry,\n    permit: IPermit,\n    listeners: Iterable[IListener] = (),\n    slow_threshold: float = float(\"inf\"),\n)\n</code></pre> <p>Synchronous circuit breaker implementation.</p> <p>Protects your service from cascading failures by monitoring call failures and temporarily blocking calls when a failure threshold is reached.</p> <p>The circuit breaker operates in three main states:</p> <ul> <li>CLOSED: Normal operation, calls pass through</li> <li>OPEN: Failure threshold exceeded, calls are blocked</li> <li>HALF_OPEN: Testing if the service recovered, limited calls allowed</li> </ul> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Circuit breaker identifier</p> required <code>window</code> <code>IWindow</code> <p>Sliding window for metrics collection (CountWindow or TimeWindow)</p> required <code>tracker</code> <code>ITracker</code> <p>Determines which exceptions to track as failures</p> required <code>tripper</code> <code>ITripper</code> <p>Condition to open/close the circuit based on metrics</p> required <code>retry</code> <code>IRetry</code> <p>Strategy for transitioning from OPEN to HALF_OPEN</p> required <code>permit</code> <code>IPermit</code> <p>Strategy for allowing calls in HALF_OPEN state</p> required <code>listeners</code> <code>Iterable[IListener]</code> <p>Event listeners for state transitions (default: empty)</p> <code>()</code> <code>slow_threshold</code> <code>float</code> <p>Duration threshold in seconds to mark calls as slow (default: inf)</p> <code>float('inf')</code> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from fluxgate import CircuitBreaker\n&gt;&gt;&gt; from fluxgate.windows import CountWindow\n&gt;&gt;&gt; from fluxgate.trackers import TypeOf\n&gt;&gt;&gt; from fluxgate.trippers import Closed, MinRequests, FailureRate\n&gt;&gt;&gt; from fluxgate.retries import Cooldown\n&gt;&gt;&gt; from fluxgate.permits import Random\n&gt;&gt;&gt; from fluxgate.listeners.log import LogListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(\n...     name=\"payment_api\",\n...     window=CountWindow(100),\n...     tracker=TypeOf(ConnectionError),\n...     tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n...     retry=Cooldown(60.0),\n...     permit=Random(0.5),\n...     listeners=[LogListener()],\n...     slow_threshold=1.0,\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; @cb\n... def call_payment_api(amount):\n...     return requests.post(\"https://api.payment.com\", json={\"amount\": amount})\n</code></pre> Note <p>This implementation is NOT thread-safe. Each process maintains its own independent circuit breaker state. For asyncio applications, use AsyncCircuitBreaker instead.</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    window: IWindow,\n    tracker: ITracker,\n    tripper: ITripper,\n    retry: IRetry,\n    permit: IPermit,\n    listeners: Iterable[IListener] = (),\n    slow_threshold: float = float(\"inf\"),\n) -&gt; None:\n    self._name = name\n    self._window = window\n    self._tracker = tracker\n    self._tripper = tripper\n    self._retry = retry\n    self._permit = permit\n    self._listeners = tuple(listeners)\n    self._slow_threshold = slow_threshold\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._state: CircuitBreaker._State = self._Closed(self)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.__call__","title":"__call__","text":"<pre><code>__call__(func: Callable[P, R]) -&gt; Callable[P, R]\n</code></pre><pre><code>__call__(\n    func: None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[[Callable[P, R]], Callable[P, R]]\n</code></pre> <pre><code>__call__(\n    func: Callable[P, R] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, R]\n    | Callable[[Callable[P, R]], Callable[P, R]]\n)\n</code></pre> <p>Decorate a function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @cb\n... def api_call():\n...     return requests.get(\"https://api.example.com\")\n</code></pre> <pre><code>&gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n... def api_call():\n...     return requests.get(\"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R] | None</code> <p>Function to protect</p> <code>None</code> <code>fallback</code> <code>Callable[[Exception], R] | None</code> <p>Optional function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> <code>None</code> <p>Returns:</p> Type Description <code>Callable[P, R] | Callable[[Callable[P, R]], Callable[P, R]]</code> <p>Wrapped function with circuit breaker behavior</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN (if no fallback)</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __call__(\n    self,\n    func: Callable[P, R] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[P, R] | Callable[[Callable[P, R]], Callable[P, R]]:\n    \"\"\"Decorate a function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; @cb\n        ... def api_call():\n        ...     return requests.get(\"https://api.example.com\")\n\n        &gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n        ... def api_call():\n        ...     return requests.get(\"https://api.example.com\")\n\n    Args:\n        func: Function to protect\n        fallback: Optional function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n\n    Returns:\n        Wrapped function with circuit breaker behavior\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN (if no fallback)\n    \"\"\"\n\n    def decorator(f: Callable[P, R]) -&gt; Callable[P, R]:\n        @functools.wraps(f)\n        def wrapper(*args: P.args, **kwargs: P.kwargs) -&gt; R:\n            try:\n                return self._state.execute(f, *args, **kwargs)\n            except Exception as e:\n                if fallback is not None:\n                    return fallback(e)\n                raise\n\n        return wrapper\n\n    if func is not None:\n        return decorator(func)\n    return decorator\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.call","title":"call","text":"<pre><code>call(\n    func: Callable[P, R], /, *args: args, **kwargs: kwargs\n) -&gt; R\n</code></pre> <p>Execute a function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; cb.call(requests.get, \"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R]</code> <p>Function to execute</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def call(\n    self,\n    func: Callable[P, R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute a function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; cb.call(requests.get, \"https://api.example.com\")\n\n    Args:\n        func: Function to execute\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN\n    \"\"\"\n    return self._state.execute(func, *args, **kwargs)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.call_with_fallback","title":"call_with_fallback","text":"<pre><code>call_with_fallback(\n    func: Callable[P, R],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute a function with circuit breaker protection and fallback.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; cb.call_with_fallback(fetch_data, lambda e: cached_data)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R]</code> <p>Function to execute</p> required <code>fallback</code> <code>Callable[[Exception], R]</code> <p>Function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result or fallback result</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def call_with_fallback(\n    self,\n    func: Callable[P, R],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute a function with circuit breaker protection and fallback.\n\n    Examples:\n        &gt;&gt;&gt; cb.call_with_fallback(fetch_data, lambda e: cached_data)\n\n    Args:\n        func: Function to execute\n        fallback: Function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result or fallback result\n    \"\"\"\n    try:\n        return self._state.execute(func, *args, **kwargs)\n    except Exception as e:\n        return fallback(e)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.info","title":"info","text":"<pre><code>info() -&gt; CircuitBreakerInfo\n</code></pre> <p>Get current circuit breaker state and metrics.</p> <p>Returns:</p> Type Description <code>CircuitBreakerInfo</code> <p>Dictionary with circuit breaker state information</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def info(self) -&gt; CircuitBreakerInfo:\n    \"\"\"Get current circuit breaker state and metrics.\n\n    Returns:\n        Dictionary with circuit breaker state information\n    \"\"\"\n    return CircuitBreakerInfo(\n        name=self._name,\n        state=self._state.get_state_enum().value,\n        changed_at=self._changed_at,\n        reopens=self._reopens,\n        metrics=self._window.get_metric(),\n    )\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.reset","title":"reset","text":"<pre><code>reset(notify: bool = True) -&gt; None\n</code></pre> <p>Reset circuit breaker to CLOSED state and clear metrics.</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def reset(self, notify: bool = True) -&gt; None:\n    \"\"\"Reset circuit breaker to CLOSED state and clear metrics.\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    current_state = self._state.get_state_enum()\n    self._state = self._Closed(self)\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._window.reset()\n\n    if notify:\n        signal = Signal(\n            circuit_name=self._name,\n            old_state=current_state,\n            new_state=StateEnum.CLOSED,\n            timestamp=self._changed_at,\n        )\n        self._notify(signal)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.disable","title":"disable","text":"<pre><code>disable(notify: bool = True) -&gt; None\n</code></pre> <p>Disable circuit breaker (all calls pass through without tracking).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def disable(self, notify: bool = True) -&gt; None:\n    \"\"\"Disable circuit breaker (all calls pass through without tracking).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.DISABLED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.metrics_only","title":"metrics_only","text":"<pre><code>metrics_only(notify: bool = True) -&gt; None\n</code></pre> <p>Enable metrics-only mode (track metrics but never open circuit).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def metrics_only(self, notify: bool = True) -&gt; None:\n    \"\"\"Enable metrics-only mode (track metrics but never open circuit).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.METRICS_ONLY, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.CircuitBreaker.force_open","title":"force_open","text":"<pre><code>force_open(notify: bool = True) -&gt; None\n</code></pre> <p>Force circuit breaker to OPEN state (all calls blocked).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def force_open(self, notify: bool = True) -&gt; None:\n    \"\"\"Force circuit breaker to OPEN state (all calls blocked).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.FORCED_OPEN, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker","title":"fluxgate.AsyncCircuitBreaker","text":"<pre><code>AsyncCircuitBreaker(\n    name: str,\n    window: IWindow,\n    tracker: ITracker,\n    tripper: ITripper,\n    retry: IRetry,\n    permit: IPermit,\n    listeners: Iterable[IListener | IAsyncListener] = (),\n    slow_threshold: float = float(\"inf\"),\n    max_half_open_calls: int = 10,\n)\n</code></pre> <p>Asynchronous circuit breaker implementation for asyncio applications.</p> <p>Thread-safe circuit breaker with async/await support. Uses asyncio locks to coordinate state transitions and metric updates across concurrent tasks.</p> <p>The circuit breaker operates in three main states:</p> <ul> <li>CLOSED: Normal operation, calls pass through</li> <li>OPEN: Failure threshold exceeded, calls are blocked</li> <li>HALF_OPEN: Testing if the service recovered, limited calls allowed</li> </ul> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Circuit breaker identifier</p> required <code>window</code> <code>IWindow</code> <p>Sliding window for metrics collection (CountWindow or TimeWindow)</p> required <code>tracker</code> <code>ITracker</code> <p>Determines which exceptions to track as failures</p> required <code>tripper</code> <code>ITripper</code> <p>Condition to open/close the circuit based on metrics</p> required <code>retry</code> <code>IRetry</code> <p>Strategy for transitioning from OPEN to HALF_OPEN</p> required <code>permit</code> <code>IPermit</code> <p>Strategy for allowing calls in HALF_OPEN state</p> required <code>listeners</code> <code>Iterable[IListener | IAsyncListener]</code> <p>Event listeners for state transitions (default: empty)</p> <code>()</code> <code>slow_threshold</code> <code>float</code> <p>Duration threshold in seconds to mark calls as slow (default: inf)</p> <code>float('inf')</code> <code>max_half_open_calls</code> <code>int</code> <p>Maximum concurrent calls allowed in HALF_OPEN state (default: 10)</p> <code>10</code> <p>Examples:</p> <pre><code>&gt;&gt;&gt; import asyncio\n&gt;&gt;&gt; import httpx\n&gt;&gt;&gt; from fluxgate import AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.windows import CountWindow\n&gt;&gt;&gt; from fluxgate.trackers import TypeOf\n&gt;&gt;&gt; from fluxgate.trippers import Closed, MinRequests, FailureRate\n&gt;&gt;&gt; from fluxgate.retries import Cooldown\n&gt;&gt;&gt; from fluxgate.permits import Random\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = AsyncCircuitBreaker(\n...     name=\"payment_api\",\n...     window=CountWindow(100),\n...     tracker=TypeOf(httpx.ConnectError),\n...     tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n...     retry=Cooldown(60.0),\n...     permit=Random(0.5),\n...     listeners=[],\n...     slow_threshold=1.0,\n...     max_half_open_calls=5,\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; @cb\n... async def call_payment_api(amount):\n...     async with httpx.AsyncClient() as client:\n...         return await client.post(\"https://api.payment.com\", json={\"amount\": amount})\n</code></pre> Note <p>Uses asyncio locks for thread safety within a single event loop. Each process maintains its own independent circuit breaker state.</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    window: IWindow,\n    tracker: ITracker,\n    tripper: ITripper,\n    retry: IRetry,\n    permit: IPermit,\n    listeners: Iterable[IListener | IAsyncListener] = (),\n    slow_threshold: float = float(\"inf\"),\n    max_half_open_calls: int = 10,\n) -&gt; None:\n    self._name = name\n    self._window = window\n    self._tracker = tracker\n    self._tripper = tripper\n    self._retry = retry\n    self._permit = permit\n    self._listeners = tuple(listeners)\n    self._slow_threshold = slow_threshold\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._state: AsyncCircuitBreaker._State = self._Closed(self)\n    self._state_lock = asyncio.Lock()\n    self._half_open_semaphore = asyncio.Semaphore(max_half_open_calls)\n    self._window_lock = asyncio.Lock()\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.__call__","title":"__call__","text":"<pre><code>__call__(\n    func: Callable[P, Awaitable[R]],\n) -&gt; Callable[P, Awaitable[R]]\n</code></pre><pre><code>__call__(\n    func: None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[\n    [Callable[P, Awaitable[R]]],\n    Callable[P, Awaitable[R]],\n]\n</code></pre> <pre><code>__call__(\n    func: Callable[P, Awaitable[R]] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, Awaitable[R]]\n    | Callable[\n        [Callable[P, Awaitable[R]]],\n        Callable[P, Awaitable[R]],\n    ]\n)\n</code></pre> <p>Decorate an awaitable function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @cb\n... async def api_call():\n...     async with httpx.AsyncClient() as client:\n...         return await client.get(\"https://api.example.com\")\n</code></pre> <pre><code>&gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n... async def api_call():\n...     return await fetch_data()\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]] | None</code> <p>Awaitable function to protect</p> <code>None</code> <code>fallback</code> <code>Callable[[Exception], R] | None</code> <p>Optional function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> <code>None</code> <p>Returns:</p> Type Description <code>Callable[P, Awaitable[R]] | Callable[[Callable[P, Awaitable[R]]], Callable[P, Awaitable[R]]]</code> <p>Wrapped awaitable function with circuit breaker behavior</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN (if no fallback)</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __call__(\n    self,\n    func: Callable[P, Awaitable[R]] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, Awaitable[R]]\n    | Callable[[Callable[P, Awaitable[R]]], Callable[P, Awaitable[R]]]\n):\n    \"\"\"Decorate an awaitable function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; @cb\n        ... async def api_call():\n        ...     async with httpx.AsyncClient() as client:\n        ...         return await client.get(\"https://api.example.com\")\n\n        &gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n        ... async def api_call():\n        ...     return await fetch_data()\n\n    Args:\n        func: Awaitable function to protect\n        fallback: Optional function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n\n    Returns:\n        Wrapped awaitable function with circuit breaker behavior\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN (if no fallback)\n    \"\"\"\n\n    def decorator(\n        f: Callable[P, Awaitable[R]],\n    ) -&gt; Callable[P, Awaitable[R]]:\n        @functools.wraps(f)\n        async def wrapper(*args: P.args, **kwargs: P.kwargs) -&gt; R:\n            try:\n                return await self._state.execute(f, *args, **kwargs)\n            except Exception as e:\n                if fallback is not None:\n                    return fallback(e)\n                raise\n\n        return wrapper\n\n    if func is not None:\n        return decorator(func)\n    return decorator\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.call","title":"call  <code>async</code>","text":"<pre><code>call(\n    func: Callable[P, Awaitable[R]],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute an awaitable function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; await cb.call(client.get, \"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]]</code> <p>Awaitable function to execute</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def call(\n    self,\n    func: Callable[P, Awaitable[R]],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute an awaitable function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; await cb.call(client.get, \"https://api.example.com\")\n\n    Args:\n        func: Awaitable function to execute\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN\n    \"\"\"\n    return await self._state.execute(func, *args, **kwargs)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.call_with_fallback","title":"call_with_fallback  <code>async</code>","text":"<pre><code>call_with_fallback(\n    func: Callable[P, Awaitable[R]],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute an awaitable function with circuit breaker protection and fallback.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; await cb.call_with_fallback(fetch_data, lambda e: cached_data)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]]</code> <p>Awaitable function to execute</p> required <code>fallback</code> <code>Callable[[Exception], R]</code> <p>Function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result or fallback result</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def call_with_fallback(\n    self,\n    func: Callable[P, Awaitable[R]],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute an awaitable function with circuit breaker protection and fallback.\n\n    Examples:\n        &gt;&gt;&gt; await cb.call_with_fallback(fetch_data, lambda e: cached_data)\n\n    Args:\n        func: Awaitable function to execute\n        fallback: Function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result or fallback result\n    \"\"\"\n    try:\n        return await self._state.execute(func, *args, **kwargs)\n    except Exception as e:\n        return fallback(e)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.info","title":"info","text":"<pre><code>info() -&gt; CircuitBreakerInfo\n</code></pre> <p>Get current circuit breaker state and metrics.</p> <p>Returns:</p> Type Description <code>CircuitBreakerInfo</code> <p>Dictionary with circuit breaker state information</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def info(self) -&gt; CircuitBreakerInfo:\n    \"\"\"Get current circuit breaker state and metrics.\n\n    Returns:\n        Dictionary with circuit breaker state information\n    \"\"\"\n    return CircuitBreakerInfo(\n        name=self._name,\n        state=self._state.get_state_enum().value,\n        changed_at=self._changed_at,\n        reopens=self._reopens,\n        metrics=self._window.get_metric(),\n    )\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.reset","title":"reset  <code>async</code>","text":"<pre><code>reset(notify: bool = True) -&gt; None\n</code></pre> <p>Reset circuit breaker to CLOSED state and clear metrics.</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def reset(self, notify: bool = True) -&gt; None:\n    \"\"\"Reset circuit breaker to CLOSED state and clear metrics.\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.CLOSED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.disable","title":"disable  <code>async</code>","text":"<pre><code>disable(notify: bool = True) -&gt; None\n</code></pre> <p>Disable circuit breaker (all calls pass through without tracking).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def disable(self, notify: bool = True) -&gt; None:\n    \"\"\"Disable circuit breaker (all calls pass through without tracking).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.DISABLED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.metrics_only","title":"metrics_only  <code>async</code>","text":"<pre><code>metrics_only(notify: bool = True) -&gt; None\n</code></pre> <p>Enable metrics-only mode (track metrics but never open circuit).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def metrics_only(self, notify: bool = True) -&gt; None:\n    \"\"\"Enable metrics-only mode (track metrics but never open circuit).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.METRICS_ONLY, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.AsyncCircuitBreaker.force_open","title":"force_open  <code>async</code>","text":"<pre><code>force_open(notify: bool = True) -&gt; None\n</code></pre> <p>Force circuit breaker to OPEN state (all calls blocked).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def force_open(self, notify: bool = True) -&gt; None:\n    \"\"\"Force circuit breaker to OPEN state (all calls blocked).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.FORCED_OPEN, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum","title":"fluxgate.StateEnum","text":"<p>               Bases: <code>Enum</code></p>"},{"location":"api/core/#fluxgate.StateEnum.CLOSED","title":"CLOSED  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CLOSED = 'closed'\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum.OPEN","title":"OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>OPEN = 'open'\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum.HALF_OPEN","title":"HALF_OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>HALF_OPEN = 'half_open'\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum.METRICS_ONLY","title":"METRICS_ONLY  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>METRICS_ONLY = 'metrics_only'\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum.DISABLED","title":"DISABLED  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>DISABLED = 'disabled'\n</code></pre>"},{"location":"api/core/#fluxgate.StateEnum.FORCED_OPEN","title":"FORCED_OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>FORCED_OPEN = 'forced_open'\n</code></pre>"},{"location":"api/core/#fluxgate.CallNotPermittedError","title":"fluxgate.CallNotPermittedError","text":"<pre><code>CallNotPermittedError(message: str)\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Raised when a call is not permitted due to circuit breaker state.</p> Source code in <code>fluxgate/errors.py</code> <pre><code>def __init__(self, message: str) -&gt; None:\n    super().__init__(message)\n    self.message = message\n</code></pre>"},{"location":"api/core/#fluxgate.CallNotPermittedError.message","title":"message  <code>instance-attribute</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/interfaces/","title":"Interfaces","text":""},{"location":"api/interfaces/#fluxgate.interfaces.IWindow","title":"fluxgate.interfaces.IWindow","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def record(self, record: Record) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def get_metric(self) -&gt; Metric: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def reset(self) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker","title":"fluxgate.interfaces.ITracker","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__and__","title":"__and__","text":"<pre><code>__and__(other: Self) -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __and__(self, other: Self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__or__","title":"__or__","text":"<pre><code>__or__(other: Self) -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __or__(self, other: Self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__invert__","title":"__invert__","text":"<pre><code>__invert__() -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __invert__(self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper","title":"fluxgate.interfaces.ITripper","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__call__","title":"__call__","text":"<pre><code>__call__(metric: Metric, state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, metric: Metric, state: StateEnum) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__and__","title":"__and__","text":"<pre><code>__and__(other: Self) -&gt; ITripper\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __and__(self, other: Self) -&gt; ITripper: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__or__","title":"__or__","text":"<pre><code>__or__(other: Self) -&gt; ITripper\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __or__(self, other: Self) -&gt; ITripper: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IRetry","title":"fluxgate.interfaces.IRetry","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IRetry.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, changed_at: float, reopens: int) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IPermit","title":"fluxgate.interfaces.IPermit","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IPermit.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, changed_at: float) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IListener","title":"fluxgate.interfaces.IListener","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IAsyncListener","title":"fluxgate.interfaces.IAsyncListener","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IAsyncListener.__call__","title":"__call__  <code>async</code>","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>async def __call__(self, signal: Signal) -&gt; None: ...\n</code></pre>"},{"location":"api/listeners/","title":"Listeners","text":""},{"location":"api/listeners/#fluxgate.listeners.log.LogListener","title":"fluxgate.listeners.log.LogListener","text":"<p>               Bases: <code>IListener</code></p> <p>Listener that logs circuit breaker state transitions.</p> <p>Logs state changes at INFO level using Python's standard logging module. Works with both CircuitBreaker and AsyncCircuitBreaker.</p> Note <p>logging.info is thread-safe and can be safely used in async contexts.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; import logging\n&gt;&gt;&gt; from fluxgate import CircuitBreaker, AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.log import LogListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; logging.basicConfig(level=logging.INFO)\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[LogListener()])\n&gt;&gt;&gt; async_cb = AsyncCircuitBreaker(..., listeners=[LogListener()])\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Logs: [2025-01-15 10:30:45] Circuit Breaker 'api' transitioned from CLOSED to OPEN\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.log.LogListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/log.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    timestamp = time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(signal.timestamp))\n    logging.info(\n        f\"[{timestamp}] Circuit Breaker '{signal.circuit_name}' \"\n        f\"transitioned from {signal.old_state.value} to {signal.new_state.value}\"\n    )\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.prometheus.PrometheusListener","title":"fluxgate.listeners.prometheus.PrometheusListener","text":"<p>               Bases: <code>IListener</code></p> <p>Listener that exports circuit breaker metrics to Prometheus.</p> <p>Exports two metrics:</p> <ul> <li>circuit_breaker_state: Gauge showing current state (0 or 1 for each state)</li> <li>circuit_breaker_state_transition: Counter of state transitions</li> </ul> <p>Works with both CircuitBreaker and AsyncCircuitBreaker.</p> Note <p>prometheus_client is thread-safe and can be safely used in async contexts.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from prometheus_client import start_http_server\n&gt;&gt;&gt; from fluxgate import CircuitBreaker, AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.prometheus import PrometheusListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; start_http_server(8000)\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[PrometheusListener()])\n&gt;&gt;&gt; async_cb = AsyncCircuitBreaker(..., listeners=[PrometheusListener()])\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Metrics available at http://localhost:8000/metrics\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.prometheus.PrometheusListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/prometheus.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    for state in StateEnum:\n        _STATE_GAUGE.labels(\n            circuit_name=signal.circuit_name,\n            state=state.value,\n        ).set(1 if state == signal.new_state else 0)\n    _STATE_TRANSITION.labels(\n        circuit_name=signal.circuit_name,\n        old_state=signal.old_state.value,\n        new_state=signal.new_state.value,\n    ).inc()\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener","title":"fluxgate.listeners.slack.SlackListener","text":"<pre><code>SlackListener(channel: str, token: str)\n</code></pre> <p>               Bases: <code>IListener</code></p> <p>Listener that sends circuit breaker state transitions to Slack.</p> <p>Posts formatted messages to a Slack channel when state transitions occur. Groups related transitions into threads (OPEN \u2192 HALF_OPEN \u2192 CLOSED).</p> <p>Parameters:</p> Name Type Description Default <code>channel</code> <code>str</code> <p>Slack channel ID (e.g., \"C1234567890\") or name (e.g., \"#alerts\")</p> required <code>token</code> <code>str</code> <p>Slack bot token with chat:write permissions</p> required <p>Examples:</p> <pre><code>&gt;&gt;&gt; from fluxgate import CircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.slack import SlackListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; listener = SlackListener(\n...     channel=\"C1234567890\",\n...     token=\"xoxb-your-slack-bot-token\"\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[listener])\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __init__(self, channel: str, token: str) -&gt; None:\n    self._channel = channel\n    self._token = token\n    self._client = httpx.Client(\n        headers={\"Authorization\": f\"Bearer {token}\"},\n        timeout=5.0,\n    )\n    self._open_threads: dict[str, str] = {}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    message = _build_message(\n        channel=self._channel,\n        signal=signal,\n        thread=self._open_threads.get(signal.circuit_name),\n    )\n    response = self._client.post(\n        \"https://slack.com/api/chat.postMessage\", json=message\n    )\n    response.raise_for_status()\n    data = response.json()\n    ts = data.get(\"ts\")\n    if not data.get(\"ok\") or not ts:\n        raise RuntimeError(f\"Failed to send message: {data.get('error')}\")\n    transition = (signal.old_state, signal.new_state)\n    if transition == (StateEnum.CLOSED, StateEnum.OPEN):\n        self._open_threads[signal.circuit_name] = ts\n    elif transition == (StateEnum.HALF_OPEN, StateEnum.CLOSED):\n        self._open_threads.pop(signal.circuit_name, None)\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener","title":"fluxgate.listeners.slack.AsyncSlackListener","text":"<pre><code>AsyncSlackListener(channel: str, token: str)\n</code></pre> <p>               Bases: <code>IAsyncListener</code></p> <p>Async listener that sends circuit breaker state transitions to Slack.</p> <p>Posts formatted messages to a Slack channel when state transitions occur. Groups related transitions into threads (OPEN \u2192 HALF_OPEN \u2192 CLOSED).</p> <p>Parameters:</p> Name Type Description Default <code>channel</code> <code>str</code> <p>Slack channel ID (e.g., \"C1234567890\") or name (e.g., \"#alerts\")</p> required <code>token</code> <code>str</code> <p>Slack bot token with chat:write permissions</p> required Note <p>Uses httpx for async HTTP requests.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from fluxgate import AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.slack import AsyncSlackListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; listener = AsyncSlackListener(\n...     channel=\"C1234567890\",\n...     token=\"xoxb-your-slack-bot-token\"\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = AsyncCircuitBreaker(..., listeners=[listener])\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __init__(self, channel: str, token: str) -&gt; None:\n    self._channel = channel\n    self._token = token\n    self._client = httpx.AsyncClient(\n        headers={\"Authorization\": f\"Bearer {token}\"},\n        timeout=5.0,\n    )\n    self._open_threads: dict[str, str] = {}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener.__call__","title":"__call__  <code>async</code>","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>async def __call__(self, signal: Signal) -&gt; None:\n    message = _build_message(\n        channel=self._channel,\n        signal=signal,\n        thread=self._open_threads.get(signal.circuit_name),\n    )\n    response = await self._client.post(\n        \"https://slack.com/api/chat.postMessage\", json=message\n    )\n    response.raise_for_status()\n    data = response.json()\n    ts = data.get(\"ts\")\n    if not data.get(\"ok\") or not ts:\n        raise RuntimeError(f\"Failed to send message: {data.get('error')}\")\n    transition = (signal.old_state, signal.new_state)\n    if transition == (StateEnum.CLOSED, StateEnum.OPEN):\n        self._open_threads[signal.circuit_name] = ts\n    elif transition == (StateEnum.HALF_OPEN, StateEnum.CLOSED):\n        self._open_threads.pop(signal.circuit_name, None)\n</code></pre>"},{"location":"api/permits/","title":"Permits","text":""},{"location":"api/permits/#fluxgate.permits.Random","title":"fluxgate.permits.Random","text":"<pre><code>Random(ratio: float)\n</code></pre> <p>               Bases: <code>IPermit</code></p> <p>Permit strategy with random sampling in HALF_OPEN state.</p> <p>Allows calls randomly based on a fixed probability ratio. Simple and effective for limiting concurrent calls during recovery.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Allow 50% of calls in HALF_OPEN state\n&gt;&gt;&gt; permit = Random(ratio=0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Probability of allowing a call (0.0 to 1.0)</p> required Source code in <code>fluxgate/permits.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if not (0.0 &lt;= ratio &lt;= 1.0):\n        raise ValueError(\"Ratio must be between 0.0 and 1.0\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.Random.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/permits.py</code> <pre><code>def __call__(self, _changed_at: float) -&gt; bool:\n    return random() &lt; self._ratio\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.RampUp","title":"fluxgate.permits.RampUp","text":"<pre><code>RampUp(initial: float, final: float, duration: float)\n</code></pre> <p>               Bases: <code>IPermit</code></p> <p>Permit strategy that gradually increases allowed traffic over time.</p> <p>Starts with a low permit ratio and gradually increases to the final ratio over the specified duration. Useful for smooth recovery without sudden load spikes.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Start at 10%, ramp up to 80% over 60 seconds\n&gt;&gt;&gt; permit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>initial</code> <code>float</code> <p>Initial permit ratio (0.0 to 1.0)</p> required <code>final</code> <code>float</code> <p>Final permit ratio (0.0 to 1.0, must be &gt;= initial)</p> required <code>duration</code> <code>float</code> <p>Ramp-up duration in seconds</p> required Source code in <code>fluxgate/permits.py</code> <pre><code>def __init__(self, initial: float, final: float, duration: float) -&gt; None:\n    if not (0.0 &lt;= initial &lt;= final &lt;= 1.0):\n        raise ValueError(\"Initial and final must be between 0.0 and 1.0\")\n    if duration &lt;= 0:\n        raise ValueError(\"Duration must be greater than zero\")\n    self._initial = initial\n    self._final = final\n    self._duration = duration\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.RampUp.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/permits.py</code> <pre><code>def __call__(self, changed_at: float) -&gt; bool:\n    elapsed = time() - changed_at\n    if elapsed &gt;= self._duration:\n        return random() &lt; self._final\n    ratio = self._initial + (self._final - self._initial) * (\n        elapsed / self._duration\n    )\n    return random() &lt; ratio\n</code></pre>"},{"location":"api/retries/","title":"Retries","text":""},{"location":"api/retries/#fluxgate.retries.Always","title":"fluxgate.retries.Always","text":"<p>               Bases: <code>RetryBase</code></p> <p>Retry strategy that always allows transition to HALF_OPEN.</p> <p>Circuit immediately attempts to recover on every call.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; retry = Always()  # Always try to recover\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Always.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, _changed_at: float, _reopens: int) -&gt; bool:\n    return True\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Never","title":"fluxgate.retries.Never","text":"<p>               Bases: <code>RetryBase</code></p> <p>Retry strategy that never allows transition to HALF_OPEN.</p> <p>Circuit stays OPEN indefinitely until manually reset.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; retry = Never()  # Require manual intervention\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Never.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, _changed_at: float, _reopens: int) -&gt; bool:\n    return False\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Cooldown","title":"fluxgate.retries.Cooldown","text":"<pre><code>Cooldown(duration: float, jitter_ratio: float = 0.0)\n</code></pre> <p>               Bases: <code>RetryBase</code></p> <p>Retry strategy with fixed cooldown period.</p> <p>Allows transition to HALF_OPEN after a fixed duration has elapsed. Optional jitter can be added to avoid thundering herd.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Wait 60 seconds before retry\n&gt;&gt;&gt; retry = Cooldown(duration=60.0)\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Wait 60 seconds with \u00b110% jitter\n&gt;&gt;&gt; retry = Cooldown(duration=60.0, jitter_ratio=0.1)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>duration</code> <code>float</code> <p>Cooldown duration in seconds</p> required <code>jitter_ratio</code> <code>float</code> <p>Random jitter ratio (0.0 to 1.0, default 0.0)</p> <code>0.0</code> Source code in <code>fluxgate/retries.py</code> <pre><code>def __init__(self, duration: float, jitter_ratio: float = 0.0) -&gt; None:\n    if duration &lt;= 0:\n        raise ValueError(\"Duration must be greater than zero\")\n    if not (0.0 &lt;= jitter_ratio &lt; 1.0):\n        raise ValueError(\"Jitter ratio must be between 0.0 and 1.0\")\n    self._duration = duration\n    self._jitter_ratio = jitter_ratio\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Cooldown.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, changed_at: float, _reopens: int) -&gt; bool:\n    if self._jitter_ratio &gt; 0:\n        jitter = uniform(-self._jitter_ratio, self._jitter_ratio)\n        actual_duration = self._duration * (1 + jitter)\n    else:\n        actual_duration = self._duration\n    elapsed = time.time() - changed_at\n    return elapsed &gt;= actual_duration\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Backoff","title":"fluxgate.retries.Backoff","text":"<pre><code>Backoff(\n    initial: float,\n    multiplier: float = 2.0,\n    max_duration: float = 300.0,\n    jitter_ratio: float = 0.0,\n)\n</code></pre> <p>               Bases: <code>RetryBase</code></p> <p>Retry strategy with exponential backoff.</p> <p>Wait time increases exponentially with each reopen: initial * (multiplier ^ reopens). Useful for giving the service more time to recover after repeated failures.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Start with 10s, double each time, max 300s\n&gt;&gt;&gt; retry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n&gt;&gt;&gt; # Reopens: 0-&gt;10s, 1-&gt;20s, 2-&gt;40s, 3-&gt;80s, 4-&gt;160s, 5+-&gt;300s\n&gt;&gt;&gt;\n&gt;&gt;&gt; # With jitter to avoid thundering herd\n&gt;&gt;&gt; retry = Backoff(initial=10.0, multiplier=2.0, jitter_ratio=0.1)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>initial</code> <code>float</code> <p>Initial wait duration in seconds</p> required <code>multiplier</code> <code>float</code> <p>Backoff multiplier (must be &gt; 1.0)</p> <code>2.0</code> <code>max_duration</code> <code>float</code> <p>Maximum wait duration in seconds</p> <code>300.0</code> <code>jitter_ratio</code> <code>float</code> <p>Random jitter ratio (0.0 to 1.0, default 0.0)</p> <code>0.0</code> Source code in <code>fluxgate/retries.py</code> <pre><code>def __init__(\n    self,\n    initial: float,\n    multiplier: float = 2.0,\n    max_duration: float = 300.0,\n    jitter_ratio: float = 0.0,\n) -&gt; None:\n    if initial &lt;= 0:\n        raise ValueError(\"Initial duration must be greater than zero\")\n    if multiplier &lt;= 1.0:\n        raise ValueError(\"Multiplier must be greater than 1.0\")\n    if max_duration &lt; initial:\n        raise ValueError(\"Max duration must be &gt;= initial duration\")\n    if not (0.0 &lt;= jitter_ratio &lt; 1.0):\n        raise ValueError(\"Jitter ratio must be between 0.0 and 1.0\")\n\n    self._initial = initial\n    self._multiplier = multiplier\n    self._max = max_duration\n    self._jitter_ratio = jitter_ratio\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Backoff.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, changed_at: float, reopens: int) -&gt; bool:\n    # Calculate wait duration based on reopens count\n    duration = min(self._initial * (self._multiplier**reopens), self._max)\n\n    if self._jitter_ratio &gt; 0:\n        jitter = uniform(-self._jitter_ratio, self._jitter_ratio)\n        actual_duration = duration * (1 + jitter)\n    else:\n        actual_duration = duration\n\n    elapsed = time.time() - changed_at\n    return elapsed &gt;= actual_duration\n</code></pre>"},{"location":"api/trackers/","title":"Trackers","text":""},{"location":"api/trackers/#fluxgate.trackers.All","title":"fluxgate.trackers.All","text":"<p>               Bases: <code>TrackerBase</code></p> <p>Tracker that matches all exceptions.</p> <p>Always returns true for any exception, tracking all failures.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track all exceptions\n&gt;&gt;&gt; tracker = All()\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Track all except ValueError\n&gt;&gt;&gt; tracker = All() &amp; ~TypeOf(ValueError)\n</code></pre> Note <p>This is the default behavior when you want to track all exceptions.</p>"},{"location":"api/trackers/#fluxgate.trackers.All.__call__","title":"__call__","text":"<pre><code>__call__(_exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, _exception: Exception) -&gt; bool:\n    return True\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.TypeOf","title":"fluxgate.trackers.TypeOf","text":"<pre><code>TypeOf(*types: type[Exception])\n</code></pre> <p>               Bases: <code>TrackerBase</code></p> <p>Tracker that matches exceptions by type.</p> <p>Returns true if the exception is an instance of any of the specified types.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track connection and timeout errors\n&gt;&gt;&gt; tracker = TypeOf(ConnectionError, TimeoutError)\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Combine with OR\n&gt;&gt;&gt; tracker = TypeOf(ValueError) | TypeOf(TypeError)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>*types</code> <code>type[Exception]</code> <p>Exception types to track as failures</p> <code>()</code> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __init__(self, *types: type[Exception]) -&gt; None:\n    self._types = types\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.TypeOf.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool:\n    return isinstance(exception, self._types)\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.Custom","title":"fluxgate.trackers.Custom","text":"<pre><code>Custom(func: Callable[[Exception], bool])\n</code></pre> <p>               Bases: <code>TrackerBase</code></p> <p>Tracker with custom exception matching logic.</p> <p>Allows arbitrary logic to determine if an exception should be tracked.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track only 503 errors from httpx\n&gt;&gt;&gt; def is_503(e):\n...     return isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 503\n&gt;&gt;&gt;\n&gt;&gt;&gt; tracker = Custom(is_503)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[[Exception], bool]</code> <p>Function that takes an exception and returns bool</p> required Source code in <code>fluxgate/trackers.py</code> <pre><code>def __init__(self, func: Callable[[Exception], bool]) -&gt; None:\n    self._func = func\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.Custom.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool:\n    return self._func(exception)\n</code></pre>"},{"location":"api/trippers/","title":"Trippers","text":""},{"location":"api/trippers/#fluxgate.trippers.Closed","title":"fluxgate.trippers.Closed","text":"<p>               Bases: <code>TripperBase</code></p> <p>Tripper that returns true only when circuit is in CLOSED state.</p> <p>Used to compose conditions that should only apply when circuit is closed.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only check failure rate when circuit is closed\n&gt;&gt;&gt; tripper = Closed() &amp; FailureRate(0.5)\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.Closed.__call__","title":"__call__","text":"<pre><code>__call__(_metric: Metric, state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, _metric: Metric, state: StateEnum) -&gt; bool:\n    return state == StateEnum.CLOSED\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.HalfOpened","title":"fluxgate.trippers.HalfOpened","text":"<p>               Bases: <code>TripperBase</code></p> <p>Tripper that returns true only when circuit is in HALF_OPEN state.</p> <p>Used to compose conditions that should only apply when circuit is half-open.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only check failure rate when circuit is half-open\n&gt;&gt;&gt; tripper = HalfOpened() &amp; FailureRate(0.3)\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.HalfOpened.__call__","title":"__call__","text":"<pre><code>__call__(_metric: Metric, state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, _metric: Metric, state: StateEnum) -&gt; bool:\n    return state == StateEnum.HALF_OPEN\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.MinRequests","title":"fluxgate.trippers.MinRequests","text":"<pre><code>MinRequests(count: int)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper that requires minimum number of calls before evaluating.</p> <p>Prevents premature circuit opening when sample size is too small.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only trip after at least 10 calls\n&gt;&gt;&gt; tripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>count</code> <code>int</code> <p>Minimum number of calls required</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, count: int) -&gt; None:\n    if count &lt;= 0:\n        raise ValueError(\"Count must be greater than zero\")\n    self._count = count\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.MinRequests.__call__","title":"__call__","text":"<pre><code>__call__(metric: Metric, _state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, metric: Metric, _state: StateEnum) -&gt; bool:\n    return metric.total_count &gt;= self._count\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.FailureRate","title":"fluxgate.trippers.FailureRate","text":"<pre><code>FailureRate(ratio: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on failure rate threshold.</p> <p>Returns true when the ratio of failed calls exceeds the threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when 50% or more calls fail\n&gt;&gt;&gt; tripper = FailureRate(0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Failure rate threshold (0.0 to 1.0)</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if ratio &lt;= 0 or ratio &gt; 1:\n        raise ValueError(\"Ratio must be between 0 and 1\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.FailureRate.__call__","title":"__call__","text":"<pre><code>__call__(metric: Metric, _state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, metric: Metric, _state: StateEnum) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    failure_rate = metric.failure_count / metric.total_count\n    return failure_rate &gt;= self._ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.AvgLatency","title":"fluxgate.trippers.AvgLatency","text":"<pre><code>AvgLatency(threshold: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on average latency threshold.</p> <p>Returns true when average call duration exceeds the threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when average latency exceeds 2 seconds\n&gt;&gt;&gt; tripper = AvgLatency(2.0)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>threshold</code> <code>float</code> <p>Latency threshold in seconds</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, threshold: float) -&gt; None:\n    if threshold &lt;= 0:\n        raise ValueError(\"Threshold must be greater than 0\")\n    self._threshold = threshold\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.AvgLatency.__call__","title":"__call__","text":"<pre><code>__call__(metric: Metric, _state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, metric: Metric, _state: StateEnum) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    avg_duration = metric.total_duration / metric.total_count\n    return avg_duration &gt; self._threshold\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.SlowRate","title":"fluxgate.trippers.SlowRate","text":"<pre><code>SlowRate(ratio: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on slow call rate threshold.</p> <p>Returns true when the ratio of slow calls exceeds the threshold. Slow calls are determined by the circuit breaker's slow_threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when 30% or more calls are slow\n&gt;&gt;&gt; tripper = SlowRate(0.3)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Slow call rate threshold (0.0 to 1.0)</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if ratio &lt;= 0 or ratio &gt; 1:\n        raise ValueError(\"Ratio must be between 0 and 1\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.SlowRate.__call__","title":"__call__","text":"<pre><code>__call__(metric: Metric, _state: StateEnum) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(self, metric: Metric, _state: StateEnum) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    slow_rate = metric.slow_count / metric.total_count\n    return slow_rate &gt;= self._ratio\n</code></pre>"},{"location":"api/windows/","title":"Windows","text":""},{"location":"api/windows/#fluxgate.windows.CountWindow","title":"fluxgate.windows.CountWindow","text":"<pre><code>CountWindow(size: int)\n</code></pre> <p>               Bases: <code>IWindow</code></p> <p>Count-based sliding window for tracking recent call metrics.</p> <p>Maintains a fixed-size sliding window that keeps the most recent N calls. When the window is full, the oldest record is evicted when a new one arrives.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; window = CountWindow(size=100)  # Track last 100 calls\n&gt;&gt;&gt;\n&gt;&gt;&gt; window.record(Record(success=True, duration=0.5))\n&gt;&gt;&gt;\n&gt;&gt;&gt; metric = window.get_metric()\n&gt;&gt;&gt; print(metric.total_count)\n1\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>size</code> <code>int</code> <p>Maximum number of calls to track in the window</p> required Source code in <code>fluxgate/windows.py</code> <pre><code>def __init__(self, size: int) -&gt; None:\n    self._max_size = size\n    self._records: deque[Record] = deque(maxlen=size)\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> <p>Add a call record to the window.</p> <p>If window is full, evicts the oldest record before adding the new one.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>Record</code> <p>Call result to record</p> required Source code in <code>fluxgate/windows.py</code> <pre><code>def record(self, record: Record) -&gt; None:\n    \"\"\"Add a call record to the window.\n\n    If window is full, evicts the oldest record before adding the new one.\n\n    Args:\n        record: Call result to record\n    \"\"\"\n    if len(self._records) == self._max_size:\n        evicted = self._records.popleft()\n        self._evict(evicted)\n    self._admit(record)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> <p>Get aggregated metrics for all records in the window.</p> <p>Returns:</p> Type Description <code>Metric</code> <p>Aggregated metrics (counts, durations)</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def get_metric(self) -&gt; Metric:\n    \"\"\"Get aggregated metrics for all records in the window.\n\n    Returns:\n        Aggregated metrics (counts, durations)\n    \"\"\"\n    return Metric(\n        total_count=self._total_count,\n        failure_count=self._total_failure_count,\n        total_duration=self._total_duration,\n        slow_count=self._slow_call_count,\n    )\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> <p>Clear all records and reset metrics to zero.</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    \"\"\"Clear all records and reset metrics to zero.\"\"\"\n    self._records.clear()\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow","title":"fluxgate.windows.TimeWindow","text":"<pre><code>TimeWindow(size: int)\n</code></pre> <p>               Bases: <code>IWindow</code></p> <p>Time-based sliding window for tracking metrics over a time period.</p> <p>Divides time into fixed buckets (1 second each) and tracks metrics per bucket. When a bucket's time period expires, it is reset and reused for the new time.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; window = TimeWindow(size=60)  # Track last 60 seconds\n&gt;&gt;&gt;\n&gt;&gt;&gt; window.record(Record(success=True, duration=0.5))\n&gt;&gt;&gt;\n&gt;&gt;&gt; metric = window.get_metric()\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>size</code> <code>int</code> <p>Number of seconds to track (window size in seconds)</p> required Note <p>Time precision is 1 second. All calls within the same second are grouped into the same bucket.</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def __init__(self, size: int) -&gt; None:\n    self._size = size\n    self._buckets = [self.Bucket() for _ in range(size)]\n    self._timestamps = [0 for _ in range(size)]\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket","title":"Bucket  <code>dataclass</code>","text":"<pre><code>Bucket(\n    sec_count: int = 0,\n    sec_failure_count: int = 0,\n    sec_total_duration: float = 0.0,\n    sec_slow_call_count: int = 0,\n)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_count","title":"sec_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_failure_count","title":"sec_failure_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_failure_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_total_duration","title":"sec_total_duration  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_total_duration: float = field(default=0.0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_slow_call_count","title":"sec_slow_call_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_slow_call_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.admit","title":"admit","text":"<pre><code>admit(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def admit(self, record: Record) -&gt; None:\n    self.sec_count += 1\n    self.sec_failure_count += 1 if not record.success else 0\n    self.sec_total_duration += record.duration\n    self.sec_slow_call_count += 1 if record.is_slow else 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    self.sec_count = 0\n    self.sec_failure_count = 0\n    self.sec_total_duration = 0.0\n    self.sec_slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def record(self, record: Record) -&gt; None:\n    now = int(record.timestamp)\n    index = now % self._size\n    bucket = self._buckets[index]\n\n    if self._timestamps[index] != now:\n        evicted = self._buckets[index]\n        self._evict(evicted)\n        self._timestamps[index] = now\n\n    self._admit(record, bucket)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def get_metric(self) -&gt; Metric:\n    return Metric(\n        total_count=self._total_count,\n        failure_count=self._total_failure_count,\n        total_duration=self._total_duration,\n        slow_count=self._slow_call_count,\n    )\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    for bucket in self._buckets:\n        bucket.reset()\n    self._timestamps = [0 for _ in range(self._size)]\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"components/","title":"Components Overview","text":"<p>Fluxgate uses composable components to build flexible circuit breaker configurations. Each component handles a specific aspect of circuit breaker behavior.</p>"},{"location":"components/#architecture","title":"Architecture","text":"Component Role Operators Window Track call history (count or time-based) - Tracker Define which exceptions to track &amp;, |, ~ Tripper Decide when to open/close the circuit &amp;, | Retry Control OPEN \u2192 HALF_OPEN transition - Permit Control call admission in HALF_OPEN - Listener Detect state transitions and notify external systems -"},{"location":"components/#component-types","title":"Component Types","text":""},{"location":"components/#windows","title":"Windows","text":"<p>Track call history over a sliding window.</p> <ul> <li>CountWindow - Last N calls</li> <li>TimeWindow - Last N seconds</li> </ul> <pre><code>from fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # Track last 100 calls\nwindow = TimeWindow(size=60)    # Track last 60 seconds\n</code></pre>"},{"location":"components/#trackers","title":"Trackers","text":"<p>Define which exceptions count as failures.</p> <ul> <li>All - Track all exceptions</li> <li>TypeOf - Track specific exception types</li> <li>Custom - Custom tracking logic</li> </ul> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\ntracker = TypeOf(ConnectionError, TimeoutError)\ntracker = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\n</code></pre> <p>Composable: Use <code>&amp;</code>, <code>|</code>, <code>~</code> operators to combine trackers.</p>"},{"location":"components/#trippers","title":"Trippers","text":"<p>Determine when to open or close the circuit based on metrics.</p> <ul> <li>Closed/HalfOpened - State-based conditions</li> <li>MinRequests - Minimum call count</li> <li>FailureRate - Failure percentage</li> <li>AvgLatency - Average response time</li> <li>SlowRate - Slow call percentage</li> </ul> <pre><code>from fluxgate.trippers import Closed, MinRequests, FailureRate\n\ntripper = Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>Composable: Use <code>&amp;</code>, <code>|</code> operators to combine conditions.</p>"},{"location":"components/#retries","title":"Retries","text":"<p>Control when to transition from OPEN to HALF_OPEN state.</p> <ul> <li>Never - Require manual reset</li> <li>Always - Immediate retry</li> <li>Cooldown - Fixed wait period</li> <li>Backoff - Exponential backoff</li> </ul> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\nretry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n</code></pre>"},{"location":"components/#permits","title":"Permits","text":"<p>Control which calls are allowed in HALF_OPEN state.</p> <ul> <li>Random - Probabilistic admission</li> <li>RampUp - Gradual traffic increase</li> </ul> <pre><code>from fluxgate.permits import Random, RampUp\n\npermit = Random(ratio=0.5)\npermit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre>"},{"location":"components/#listeners","title":"Listeners","text":"<p>Detect state transitions and notify external systems.</p> <ul> <li>LogListener - Standard logging</li> <li>PrometheusListener - Prometheus metrics (opt)</li> <li>SlackListener - Slack notifications (opt)</li> </ul> <pre><code>from fluxgate.listeners.log import LogListener\n\nlisteners = [LogListener()]\ncb = CircuitBreaker(..., listeners=listeners)\n</code></pre>"},{"location":"components/#full-example","title":"Full Example","text":"<p>Putting it all together:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_server_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n)\n</code></pre>"},{"location":"components/#next-steps","title":"Next Steps","text":"<p>Explore each component in detail:</p> <ul> <li>Windows - Choose the right window type</li> <li>Trackers - Define failure criteria</li> <li>Trippers - Configure circuit behavior</li> <li>Retries - Plan recovery strategy</li> <li>Permits - Control traffic during recovery</li> <li>Listeners - Monitor state transitions</li> </ul>"},{"location":"components/permits/","title":"Permits","text":"<p>Controls call admission in HALF_OPEN state. Helps stable recovery by gradually allowing traffic when the circuit attempts to recover.</p> Permit Type Behavior Use Case Random Random admission with fixed probability Simple traffic limiting RampUp Gradual increase over time Smooth traffic recovery"},{"location":"components/permits/#random","title":"Random","text":"<p>Randomly allows calls with a fixed probability.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# Allow 50% of calls in HALF_OPEN state\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=Random(ratio=0.5),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#random-how-it-works","title":"How It Works","text":"<ul> <li>Independent probability calculation for each call</li> <li><code>ratio</code> value determines admission probability (0.0 to 1.0)</li> <li>Maintains constant rate regardless of time</li> </ul>"},{"location":"components/permits/#random-use-cases","title":"Use Cases","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# Conservative recovery: Allow only 10%\ncb = CircuitBreaker(\n    name=\"conservative_api\",\n    permit=Random(ratio=0.1),\n    ...\n)\n\n# Aggressive recovery: Allow 80%\ncb = CircuitBreaker(\n    name=\"aggressive_api\",\n    permit=Random(ratio=0.8),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#rampup","title":"RampUp","text":"<p>Gradually increases admission rate over time.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# Start at 10%, increase to 80% over 60 seconds\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#rampup-how-it-works","title":"How It Works","text":"<ul> <li>Measures elapsed time since HALF_OPEN transition</li> <li>Linearly increases admission rate: <code>initial + (final - initial) \u00d7 (elapsed / duration)</code></li> <li>Maintains <code>final</code> ratio after <code>duration</code> elapses</li> </ul> <p>Example: initial=0.1, final=0.8, duration=60 seconds</p> <ul> <li>0s: 10% allowed</li> <li>15s: 27.5% allowed</li> <li>30s: 45% allowed</li> <li>45s: 62.5% allowed</li> <li>60s+: 80% allowed</li> </ul>"},{"location":"components/permits/#rampup-use-cases","title":"Use Cases","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# External API requiring gradual recovery\ncb = CircuitBreaker(\n    name=\"external_api\",\n    permit=RampUp(initial=0.1, final=0.9, duration=120.0),\n    ...\n)\n\n# Internal service with fast recovery\ncb = CircuitBreaker(\n    name=\"internal_service\",\n    permit=RampUp(initial=0.3, final=1.0, duration=30.0),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#choosing-a-permit","title":"Choosing a Permit","text":""},{"location":"components/permits/#comparison","title":"Comparison","text":"Feature Random RampUp Complexity Simple Medium Admission Rate Constant Increases over time Recovery Speed Immediate fixed rate Gradual increase Load Spike Possible (with high ratio) Minimized Use Case Simple traffic limiting Stable gradual recovery"},{"location":"components/permits/#choose-random","title":"Choose Random","text":"<p>Best for:</p> <ul> <li>Simple traffic control needed</li> <li>Immediate recovery at constant rate</li> <li>Load spikes not a concern</li> </ul> <p>Examples: Internal services, time-critical recovery</p> <p>Recommended Settings:</p> <pre><code># Conservative (stability first)\npermit = Random(ratio=0.3)\n\n# Balanced\npermit = Random(ratio=0.5)\n\n# Aggressive (fast recovery first)\npermit = Random(ratio=0.8)\n</code></pre>"},{"location":"components/permits/#choose-rampup","title":"Choose RampUp","text":"<p>Best for:</p> <ul> <li>Gradual traffic increase needed</li> <li>Load spike prevention important</li> <li>External service protection needed</li> </ul> <p>Examples: External APIs, databases, load-sensitive services</p> <p>Recommended Settings:</p> <pre><code># Conservative recovery\npermit = RampUp(initial=0.1, final=0.5, duration=120.0)\n\n# Balanced recovery\npermit = RampUp(initial=0.2, final=0.8, duration=60.0)\n\n# Aggressive recovery\npermit = RampUp(initial=0.5, final=1.0, duration=30.0)\n</code></pre>"},{"location":"components/permits/#relationship-with-retry","title":"Relationship with Retry","text":"<p>Permit and Retry work together to determine recovery strategy:</p> <ul> <li>Retry: Determines when to transition from OPEN \u2192 HALF_OPEN</li> <li>Permit: Determines call admission rate in HALF_OPEN state</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\n# Gradual retry, slow ramp-up\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>Flow:</p> <ol> <li>Circuit transitions to OPEN state</li> <li><code>Retry</code> determines wait time (e.g., 10 seconds)</li> <li>After 10 seconds, transitions to HALF_OPEN</li> <li><code>Permit</code> determines call admission (e.g., start 10%, gradual increase)</li> <li>On success \u2192 CLOSED, on failure \u2192 OPEN again</li> </ol>"},{"location":"components/permits/#next-steps","title":"Next Steps","text":"<ul> <li>Listeners - Monitor circuit state changes</li> <li>CircuitBreaker - Integrate all settings</li> </ul>"},{"location":"components/retries/","title":"Retries","text":"<p>Retry determines when to transition from OPEN to HALF_OPEN state.</p> Retry Type Transition Timing Use Case Always Immediately Quick recovery attempts Never No transition Manual recovery Cooldown After fixed wait time Fixed wait period Backoff Exponential backoff Increasing wait on repeated failures"},{"location":"components/retries/#always","title":"Always","text":"<p>Immediately attempts HALF_OPEN transition on every call.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Always\n\n# Immediate recovery attempts\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Always(),\n    ...\n)\n</code></pre>"},{"location":"components/retries/#never","title":"Never","text":"<p>Keeps OPEN state until manual reset() is called.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Never\n\n# Manual recovery only\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Never(),\n    ...\n)\n\n# Manual recovery\ncb.reset()\n</code></pre>"},{"location":"components/retries/#cooldown","title":"Cooldown","text":"<p>Transitions to HALF_OPEN after a fixed wait period.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\n\n# Wait 60 seconds before recovery attempt\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0),\n    ...\n)\n\n# Add jitter to prevent thundering herd\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0, jitter_ratio=0.1),  # \u00b110% random\n    ...\n)\n</code></pre>"},{"location":"components/retries/#backoff","title":"Backoff","text":"<p>Wait time increases exponentially with each retry.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\n\n# Start at 10s, double each time, max 300s\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0\n    ),\n    ...\n)\n# Wait times by retry count:\n# 0 \u2192 10s\n# 1 \u2192 20s\n# 2 \u2192 40s\n# 3 \u2192 80s\n# 4 \u2192 160s\n# 5+ \u2192 300s\n\n# Add jitter\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # \u00b110% random\n    ),\n    ...\n)\n</code></pre>"},{"location":"components/retries/#choosing-a-retry","title":"Choosing a Retry","text":""},{"location":"components/retries/#comparison","title":"Comparison","text":"Feature Always Never Cooldown Backoff Recovery Speed Immediate Not possible Fixed time Gradual increase Service Load High None Medium Low Repeated Failure Handling None N/A None Excellent Complexity Simple Simple Simple Medium"},{"location":"components/retries/#choose-always","title":"Choose Always","text":"<p>Best for:</p> <ul> <li>Mostly transient failures</li> <li>Quick recovery is critical</li> <li>Service load is not a concern</li> </ul> <p>Examples: Momentary network disconnection, temporary DNS errors</p>"},{"location":"components/retries/#choose-never","title":"Choose Never","text":"<p>Best for:</p> <ul> <li>Manual intervention required</li> <li>Decision needed after monitoring</li> </ul> <p>Examples: During deployment, service under maintenance</p>"},{"location":"components/retries/#choose-cooldown","title":"Choose Cooldown","text":"<p>Best for:</p> <ul> <li>Predictable recovery time</li> <li>Fixed wait time is sufficient</li> <li>Thundering herd prevention needed (use jitter)</li> </ul> <p>Examples: External API rate limits, scheduled maintenance</p>"},{"location":"components/retries/#choose-backoff","title":"Choose Backoff","text":"<p>Best for:</p> <ul> <li>High likelihood of repeated failures</li> <li>Need to gradually reduce service load</li> <li>Recovery time is unpredictable</li> </ul> <p>Examples: Service recovering from failure, overload conditions</p>"},{"location":"components/retries/#using-jitter","title":"Using Jitter","text":"<p>Add jitter when:</p> <ul> <li>Multiple circuit breakers attempt recovery simultaneously</li> <li>Want to prevent thundering herd problem</li> </ul> <pre><code># jitter_ratio=0.1 \u2192 \u00b110% random\n# duration=60.0 \u2192 actual wait: 54~66s\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\n</code></pre>"},{"location":"components/retries/#next-steps","title":"Next Steps","text":"<ul> <li>Permits - Call permission policies in HALF_OPEN state</li> <li>Trippers - Circuit state transition conditions</li> </ul>"},{"location":"components/trackers/","title":"Trackers","text":"<p>Trackers determine whether raised exceptions should be recorded as failures by the circuit breaker. All exceptions propagate to the caller, but only recorded exceptions affect metrics.</p> Tracker Type Matching Use Case All All exceptions Track all failures TypeOf Exception type Track specific exceptions Custom Custom function Complex conditions"},{"location":"components/trackers/#all","title":"All","text":"<p>Tracks all exceptions as failures.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import All\n\ncb = CircuitBreaker(\n    name=\"api\",\n    tracker=All(),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#typeof","title":"TypeOf","text":"<p>Tracks only exceptions of specific types.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\n# Track only network-related exceptions\ncb = CircuitBreaker(\n    name=\"external_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#custom","title":"Custom","text":"<p>Uses custom function to determine exceptions.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nimport httpx\n\n# Track only HTTP 5xx errors\ndef is_server_error(e: Exception) -&gt; bool:\n    return isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500\n\ncb = CircuitBreaker(\n    name=\"http_api\",\n    tracker=Custom(is_server_error),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#operators","title":"Logical Operators","text":"<p>Trackers can be combined with logical operators.</p>"},{"location":"components/trackers/#and-both-conditions","title":"AND (<code>&amp;</code>) - Both Conditions","text":"<pre><code>from fluxgate.trackers import TypeOf\n\n# ConnectionError AND contains specific message\ntracker = (\n    TypeOf(ConnectionError) &amp;\n    Custom(lambda e: \"timeout\" in str(e).lower())\n)\n</code></pre>"},{"location":"components/trackers/#or-either-condition","title":"OR (<code>|</code>) - Either Condition","text":"<pre><code>from fluxgate.trackers import TypeOf\n\n# ConnectionError OR TimeoutError\ntracker = TypeOf(ConnectionError) | TypeOf(TimeoutError)\n\n# Or specify at once\ntracker = TypeOf(ConnectionError, TimeoutError)\n</code></pre>"},{"location":"components/trackers/#not-invert-condition","title":"NOT (<code>~</code>) - Invert Condition","text":"<pre><code>from fluxgate.trackers import Custom\nimport httpx\n\n# HTTP errors excluding 4xx (track only 5xx)\nis_4xx = lambda e: isinstance(e, httpx.HTTPStatusError) and 400 &lt;= e.response.status_code &lt; 500\ntracker = TypeOf(httpx.HTTPStatusError) &amp; ~Custom(is_4xx)\n</code></pre>"},{"location":"components/trackers/#complex-combinations","title":"Complex Combinations","text":"<pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# (Network errors OR 5xx errors) AND retriable\nnetwork_errors = TypeOf(ConnectionError, TimeoutError)\nserver_errors = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\nnot_auth_error = ~Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 401)\n\ntracker = (network_errors | server_errors) &amp; not_auth_error\n</code></pre>"},{"location":"components/trackers/#choosing-a-tracker","title":"Choosing a Tracker","text":""},{"location":"components/trackers/#comparison","title":"Comparison","text":"Feature All TypeOf Custom Simplicity Simplest Simple Requires function Flexibility Low Medium High Performance O(1) O(1) Depends on function Use Case Track all failures Track by type Complex conditions"},{"location":"components/trackers/#choose-all","title":"Choose All","text":"<p>Best for:</p> <ul> <li>Treating all exceptions as failures</li> <li>Simple error handling</li> <li>Excluding specific exceptions (with logical operators)</li> </ul> <p>Examples: Simple internal services, all errors are critical</p>"},{"location":"components/trackers/#choose-typeof","title":"Choose TypeOf","text":"<p>Best for:</p> <ul> <li>Tracking specific exception types</li> <li>Predictable errors like network, timeout</li> <li>Failures classifiable by type</li> </ul> <p>Examples: External API calls, network-dependent services</p>"},{"location":"components/trackers/#choose-custom","title":"Choose Custom","text":"<p>Best for:</p> <ul> <li>HTTP status code-based matching</li> <li>Inspecting exception messages or attributes</li> <li>Complex business logic</li> </ul> <p>Examples: HTTP APIs, conditional retries, fine-grained error classification</p>"},{"location":"components/trackers/#next-steps","title":"Next Steps","text":"<ul> <li>Trippers - Control circuit based on metrics collected by trackers</li> <li>Windows - Determine failure tracking approach</li> </ul>"},{"location":"components/trippers/","title":"Trippers","text":"<p>Trippers evaluate metrics collected by Windows to determine circuit state transitions. Multiple conditions can be combined using logical operators (<code>&amp;</code>, <code>|</code>).</p> Tripper Type Condition Use Case Closed When in CLOSED state State-specific conditions HalfOpened When in HALF_OPEN state State-specific conditions MinRequests Minimum call count met Ensure sample size FailureRate Failure rate exceeds threshold Error rate-based blocking AvgLatency Average latency exceeds threshold Performance-based blocking SlowRate Slow call rate exceeds threshold Slow response-based blocking"},{"location":"components/trippers/#closed","title":"Closed","text":"<p>Returns true only when circuit is in CLOSED state.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import Closed, FailureRate\n\n# Check failure rate only when CLOSED\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=Closed() &amp; FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#halfopened","title":"HalfOpened","text":"<p>Returns true only when circuit is in HALF_OPEN state.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import HalfOpened, FailureRate\n\n# Apply stricter criteria when HALF_OPEN\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=HalfOpened() &amp; FailureRate(0.3),\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#minrequests","title":"MinRequests","text":"<p>Returns true only when minimum call count is met.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\n\n# Check failure rate after minimum 10 calls\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#failurerate","title":"FailureRate","text":"<p>Returns true when failure rate exceeds threshold.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import FailureRate\n\n# Open circuit when failure rate exceeds 50%\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#avglatency","title":"AvgLatency","text":"<p>Returns true when average latency exceeds threshold.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import AvgLatency\n\n# Open circuit when average response time exceeds 2 seconds\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=AvgLatency(2.0),\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#slowrate","title":"SlowRate","text":"<p>Returns true when slow call rate exceeds threshold.</p> <p>Warning</p> <p>To use <code>SlowRate</code>, you must set the <code>slow_threshold</code> parameter in CircuitBreaker. Calls that take longer than this value are considered \"slow calls\". The default is <code>inf</code> (infinity), so without setting it, all calls are considered \"fast\" and SlowRate will always be 0%.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import SlowRate\n\n# Open circuit when slow calls exceed 30%\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=SlowRate(0.3),\n    slow_threshold=1.0,  # Calls over 1 second are considered slow\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#operators","title":"Logical Operators","text":"<p>Trippers can be combined with logical operators.</p>"},{"location":"components/trippers/#and-all-conditions","title":"AND (<code>&amp;</code>) - All Conditions","text":"<pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# Minimum 10 calls AND failure rate &gt;= 50%\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#or-any-condition","title":"OR (<code>|</code>) - Any Condition","text":"<pre><code>from fluxgate.trippers import FailureRate, SlowRate\n\n# Failure rate &gt;= 50% OR slow call rate &gt;= 30%\ntripper = FailureRate(0.5) | SlowRate(0.3)\n</code></pre>"},{"location":"components/trippers/#complex-combinations","title":"Complex Combinations","text":"<pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# CLOSED: Min 10 calls + 50% failure rate\n# HALF_OPEN: Min 5 calls + 30% failure rate\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"components/trippers/#choosing-a-tripper","title":"Choosing a Tripper","text":""},{"location":"components/trippers/#comparison","title":"Comparison","text":"Feature Closed/HalfOpened MinRequests FailureRate AvgLatency SlowRate Purpose State-specific conditions Ensure sample size Check error rate Check avg performance Check slow call rate Standalone No No Yes Yes Yes Common Combination AND with other Trippers AND with other Trippers AND with MinRequests AND with MinRequests AND with MinRequests"},{"location":"components/trippers/#use-minrequests","title":"Use MinRequests","text":"<p>Recommendation</p> <ul> <li>Include in almost all Tripper combinations</li> <li>Prevents false positives with small sample sizes</li> <li>Typically 10-20% of Window size</li> </ul> <p>Example:</p> <pre><code># Window size 100, MinRequests 10\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#rate-vs-latency","title":"FailureRate vs AvgLatency vs SlowRate","text":"<p>Choose FailureRate:</p> <ul> <li>When error occurrence matters most</li> <li>When there's a clear failure criterion</li> </ul> <p>Choose AvgLatency:</p> <ul> <li>When overall response time performance matters</li> <li>When average delay is the concern</li> </ul> <p>Choose SlowRate:</p> <ul> <li>When the proportion of slow calls matters</li> <li>When controlling rate above specific threshold (slow_threshold)</li> </ul>"},{"location":"components/trippers/#combining-conditions","title":"Combining Multiple Conditions","text":"<pre><code>from fluxgate.trippers import MinRequests, FailureRate, SlowRate\n\n# Failure rate OR slow call rate\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"components/trippers/#next-steps","title":"Next Steps","text":"<ul> <li>Retries - Retry policies when circuit is open</li> <li>Permits - Call permission policies in HALF_OPEN state</li> </ul>"},{"location":"components/windows/","title":"Windows","text":"<p>Windows track recent calls (successes/failures, response times) and provide metrics that trippers use to determine circuit state.</p> Window Type Tracking Method Use Cases CountWindow Last N calls Fixed call count evaluation TimeWindow Last N seconds Time-based evaluation, traffic variations"},{"location":"components/windows/#countwindow","title":"CountWindow","text":"<p>Tracks a fixed number of recent calls.</p>"},{"location":"components/windows/#countwindow-basic","title":"Basic Usage","text":"<pre><code>from fluxgate.windows import CountWindow\n\n# Track last 100 calls\nwindow = CountWindow(size=100)\n</code></pre>"},{"location":"components/windows/#countwindow-how-it-works","title":"How It Works","text":"<ul> <li>Maintains only the most recent N calls in memory</li> <li>When window is full, evicts the oldest record</li> <li>Consistent evaluation even with low call volumes</li> </ul>"},{"location":"components/windows/#countwindow-use-cases","title":"Usage Scenarios","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\n\n# API with stable traffic patterns\ncb = CircuitBreaker(\n    name=\"stable_api\",\n    window=CountWindow(size=100),  # Evaluate last 100 calls\n    ...\n)\n</code></pre>"},{"location":"components/windows/#timewindow","title":"TimeWindow","text":"<p>Tracks calls from the last N seconds based on time.</p>"},{"location":"components/windows/#timewindow-basic","title":"Basic Usage","text":"<pre><code>from fluxgate.windows import TimeWindow\n\n# Track last 60 seconds\nwindow = TimeWindow(size=60)\n</code></pre>"},{"location":"components/windows/#timewindow-how-it-works","title":"How It Works","text":"<ul> <li>Divides time into 1-second buckets</li> <li>Each bucket aggregates all calls during that second</li> <li>Old buckets automatically expire and are reused</li> </ul>"},{"location":"components/windows/#timewindow-use-cases","title":"Usage Scenarios","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\n\n# API with variable traffic\ncb = CircuitBreaker(\n    name=\"variable_traffic_api\",\n    window=TimeWindow(size=60),  # Evaluate last 60 seconds\n    ...\n)\n</code></pre>"},{"location":"components/windows/#choosing-a-window","title":"Choosing a Window","text":""},{"location":"components/windows/#comparison","title":"Comparison","text":"Feature CountWindow TimeWindow Tracking Last N calls Last N seconds Memory Exactly N records N buckets (1-second each) Traffic Spikes Old data pushed out quickly Maintains data for consistent duration Low Traffic Fast metric collection Slower data collection Evaluation Range Varies with traffic patterns Always consistent (N seconds) Overhead Low Slightly higher"},{"location":"components/windows/#choose-countwindow","title":"Choose CountWindow","text":"<p>Best for:</p> <ul> <li>Stable and predictable traffic</li> <li>Memory efficiency is important</li> <li>Fast metric collection needed</li> </ul> <p>Examples: Internal microservice communication, batch jobs</p>"},{"location":"components/windows/#choose-timewindow","title":"Choose TimeWindow","text":"<p>Best for:</p> <ul> <li>Irregular traffic patterns</li> <li>Time-based policies needed</li> <li>Real-time monitoring is important</li> </ul> <p>Examples: Public APIs, user-facing services, external service calls</p>"},{"location":"components/windows/#metrics","title":"Metrics","text":"<p>Both window types provide the same metrics:</p> <pre><code>from fluxgate.windows import CountWindow\nfrom fluxgate.metric import Record\n\nwindow = CountWindow(size=100)\n\n# Record calls\nwindow.record(Record(success=True, duration=0.5, timestamp=1234567890.0))\nwindow.record(Record(success=False, duration=1.2, timestamp=1234567891.0))\n\n# Get metrics\nmetric = window.get_metric()\nprint(f\"Total calls: {metric.total_count}\")\nprint(f\"Failed calls: {metric.failure_count}\")\nprint(f\"Average duration: {metric.avg_duration}\")\n</code></pre> <p>Available Metrics:</p> <ul> <li><code>total_count</code> - Total number of calls</li> <li><code>failure_count</code> - Number of failed calls</li> <li><code>total_duration</code> - Total response time</li> <li><code>slow_count</code> - Number of slow calls</li> <li><code>avg_duration</code> - Average response time (computed property)</li> <li><code>failure_rate</code> - Failure rate (computed property)</li> <li><code>slow_rate</code> - Slow call rate (computed property)</li> </ul>"},{"location":"components/windows/#auto-reset","title":"Reset","text":"<p>Windows are reset when the circuit breaker's state changes.</p>"},{"location":"components/windows/#performance","title":"Performance Considerations","text":"Operation CountWindow TimeWindow Memory O(N) - N records O(N) - N buckets (1-second) record() O(1) O(1) get_metric() O(1) O(1) <p>Both implementations are efficient with negligible overhead in most production environments.</p>"},{"location":"components/windows/#next-steps","title":"Next Steps","text":"<ul> <li>Trackers - Define which exceptions to track</li> <li>Trippers - Control circuit based on window metrics</li> </ul>"},{"location":"components/listeners/","title":"Listeners","text":"<p>Listeners detect circuit breaker state transitions and send notifications to external systems.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(\n    name=\"api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n    ],\n)\n</code></pre>"},{"location":"components/listeners/#signal","title":"Signal","text":"<p>Listeners receive a <code>Signal</code> object on state transitions:</p> <pre><code>@dataclass(frozen=True)\nclass Signal:\n    circuit_name: str     # Circuit breaker name\n    old_state: StateEnum  # Previous state\n    new_state: StateEnum  # New state\n    timestamp: float      # Transition time (Unix timestamp)\n</code></pre>"},{"location":"components/listeners/#sync-vs-async","title":"Sync vs Async","text":""},{"location":"components/listeners/#synchronous-listeners-ilistener","title":"Synchronous Listeners (IListener)","text":"<p>Can be used with both <code>CircuitBreaker</code> and <code>AsyncCircuitBreaker</code>:</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        print(f\"{signal.circuit_name}: {signal.old_state} \u2192 {signal.new_state}\")\n</code></pre> <p>Warning: When using synchronous listeners with <code>AsyncCircuitBreaker</code>, avoid blocking I/O operations (network calls, file writes, etc.) as they will block the event loop. Use <code>IAsyncListener</code> for operations requiring I/O.</p>"},{"location":"components/listeners/#asynchronous-listeners-iasynclistener","title":"Asynchronous Listeners (IAsyncListener)","text":"<p>Only available for <code>AsyncCircuitBreaker</code>:</p> <pre><code>from fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass CustomAsyncListener(IAsyncListener):\n    async def __call__(self, signal: Signal) -&gt; None:\n        await send_notification(signal)\n</code></pre>"},{"location":"components/listeners/#available-listeners","title":"Available Listeners","text":""},{"location":"components/listeners/#loglistener","title":"LogListener","text":"<p>Logs state transitions using Python's standard <code>logging</code> module.</p> <pre><code>from fluxgate.listeners.log import LogListener\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"components/listeners/#prometheuslistener","title":"PrometheusListener","text":"<p>Collects Prometheus metrics for integration with monitoring systems.</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre> <pre><code>from fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(..., listeners=[PrometheusListener()])\n</code></pre>"},{"location":"components/listeners/#slacklistener-asyncslacklistener","title":"SlackListener / AsyncSlackListener","text":"<p>Sends state transition notifications to Slack channels.</p> <pre><code>pip install fluxgate[slack]\n</code></pre> <pre><code>from fluxgate.listeners.slack import SlackListener, AsyncSlackListener\n\n# Sync\nsync_cb = CircuitBreaker(..., listeners=[\n    SlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n\n# Async\nasync_cb = AsyncCircuitBreaker(..., listeners=[\n    AsyncSlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n</code></pre>"},{"location":"components/listeners/#custom-listeners","title":"Custom Listeners","text":""},{"location":"components/listeners/#synchronous-listener","title":"Synchronous Listener","text":"<pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass DatabaseListener(IListener):\n    def __init__(self, db_connection):\n        self.db = db_connection\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self.db.execute(\n                \"INSERT INTO circuit_events (name, timestamp) VALUES (?, ?)\",\n                (signal.circuit_name, signal.timestamp)\n            )\n</code></pre>"},{"location":"components/listeners/#asynchronous-listener","title":"Asynchronous Listener","text":"<pre><code>import httpx\nfrom fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass WebhookListener(IAsyncListener):\n    def __init__(self, webhook_url: str):\n        self.url = webhook_url\n        self.client = httpx.AsyncClient()\n\n    async def __call__(self, signal: Signal) -&gt; None:\n        payload = {\n            \"circuit\": signal.circuit_name,\n            \"transition\": f\"{signal.old_state.value} \u2192 {signal.new_state.value}\",\n            \"timestamp\": signal.timestamp,\n        }\n        await self.client.post(self.url, json=payload)\n</code></pre>"},{"location":"components/listeners/#error-handling","title":"Error Handling","text":"<p>Listener exceptions don't affect circuit breaker operation. Exceptions are automatically logged, and the circuit breaker continues normally.</p>"},{"location":"components/listeners/#combining-listeners","title":"Combining Multiple Listeners","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\nfrom fluxgate.listeners.slack import SlackListener\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n        SlackListener(channel=\"C1234567890\", token=\"xoxb-...\"),\n    ],\n)\n</code></pre>"},{"location":"components/listeners/#next-steps","title":"Next Steps","text":"<ul> <li>LogListener - Logging configuration</li> <li>PrometheusListener - Prometheus integration</li> <li>SlackListener - Slack notification setup</li> </ul>"},{"location":"components/listeners/logging/","title":"LogListener","text":"<p>A listener that logs circuit breaker state transitions using Python's standard <code>logging</code> module.</p>"},{"location":"components/listeners/logging/#usage","title":"Usage","text":""},{"location":"components/listeners/logging/#synchronous-circuit-breaker","title":"Synchronous Circuit Breaker","text":"<pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(levelname)s - %(message)s'\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre> <p>Output Example:</p> <pre><code>[2025-01-15 10:30:45] Circuit Breaker 'payment_api' transitioned from CLOSED to OPEN\n[2025-01-15 10:31:45] Circuit Breaker 'payment_api' transitioned from OPEN to HALF_OPEN\n[2025-01-15 10:31:50] Circuit Breaker 'payment_api' transitioned from HALF_OPEN to CLOSED\n</code></pre>"},{"location":"components/listeners/logging/#asynchronous-circuit-breaker","title":"Asynchronous Circuit Breaker","text":"<pre><code>import logging\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\nlogging.basicConfig(level=logging.INFO)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre>"},{"location":"components/listeners/logging/#custom-log-level","title":"Custom Log Levels","text":"<p>To use different log levels, create a custom listener:</p> <pre><code>import logging\nimport time\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass WarningLogListener(IListener):\n    \"\"\"Logs only OPEN state transitions at WARNING level\"\"\"\n\n    def __call__(self, signal: Signal) -&gt; None:\n        timestamp = time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(signal.timestamp))\n        message = (\n            f\"[{timestamp}] Circuit Breaker '{signal.circuit_name}' \"\n            f\"transitioned from {signal.old_state.value} to {signal.new_state.value}\"\n        )\n\n        if signal.new_state == StateEnum.OPEN:\n            logging.warning(message)\n        else:\n            logging.info(message)\n</code></pre>"},{"location":"components/listeners/logging/#structured-logging","title":"Structured Logging","text":"<p>For JSON-formatted logs:</p> <pre><code>import json\nimport logging\nimport time\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass JsonLogListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        log_data = {\n            \"event\": \"circuit_breaker_transition\",\n            \"circuit_name\": signal.circuit_name,\n            \"old_state\": signal.old_state.value,\n            \"new_state\": signal.new_state.value,\n            \"timestamp\": signal.timestamp,\n        }\n        logging.info(json.dumps(log_data))\n</code></pre>"},{"location":"components/listeners/logging/#file-logging","title":"File Logging","text":"<pre><code>import logging\nfrom logging.handlers import RotatingFileHandler\nfrom fluxgate.listeners.log import LogListener\n\nhandler = RotatingFileHandler(\n    'circuit_breaker.log',\n    maxBytes=10*1024*1024,  # 10MB\n    backupCount=5\n)\nhandler.setFormatter(logging.Formatter(\n    '%(asctime)s - %(levelname)s - %(message)s'\n))\n\nlogger = logging.getLogger()\nlogger.addHandler(handler)\nlogger.setLevel(logging.INFO)\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"components/listeners/logging/#next-steps","title":"Next Steps","text":"<ul> <li>PrometheusListener - Metrics-based monitoring</li> <li>SlackListener - Real-time notifications</li> <li>Overview - Back to listeners overview</li> </ul>"},{"location":"components/listeners/prometheus/","title":"PrometheusListener","text":"<p>A listener that exports circuit breaker metrics to Prometheus for monitoring.</p>"},{"location":"components/listeners/prometheus/#installation","title":"Installation","text":"<pre><code>pip install fluxgate[prometheus]\n</code></pre>"},{"location":"components/listeners/prometheus/#metrics","title":"Metrics","text":""},{"location":"components/listeners/prometheus/#circuit_breaker_state-gauge","title":"circuit_breaker_state (Gauge)","text":"<p>Indicates the current state of the circuit breaker.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: Circuit breaker name</li> <li><code>state</code>: State value (<code>closed</code>, <code>open</code>, <code>half_open</code>, <code>metrics_only</code>, <code>disabled</code>, <code>forced_open</code>)</li> </ul> <p>Values: <code>1</code> (current state) / <code>0</code> (not current state)</p>"},{"location":"components/listeners/prometheus/#circuit_breaker_state_transition-counter","title":"circuit_breaker_state_transition (Counter)","text":"<p>Counts the number of state transitions.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: Circuit breaker name</li> <li><code>old_state</code>: Previous state</li> <li><code>new_state</code>: New state</li> </ul>"},{"location":"components/listeners/prometheus/#usage","title":"Usage","text":""},{"location":"components/listeners/prometheus/#synchronous-circuit-breaker","title":"Synchronous Circuit Breaker","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Start Prometheus metrics server\nstart_http_server(8000)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n# Metrics: http://localhost:8000/metrics\n</code></pre>"},{"location":"components/listeners/prometheus/#asynchronous-circuit-breaker","title":"Asynchronous Circuit Breaker","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Start Prometheus metrics server (separate thread)\nstart_http_server(8000)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n</code></pre>"},{"location":"components/listeners/prometheus/#fastapi-integration","title":"FastAPI Integration","text":"<pre><code>from fastapi import FastAPI\nfrom prometheus_client import make_asgi_app\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\napp = FastAPI()\n\n# Mount Prometheus metrics endpoint\nmetrics_app = make_asgi_app()\napp.mount(\"/metrics\", metrics_app)\n\ncb = AsyncCircuitBreaker(\n    name=\"api_gateway\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n</code></pre> <p>Note: <code>prometheus_client</code> is thread-safe and can be used in both sync and async code. See the official documentation for details.</p>"},{"location":"components/listeners/prometheus/#multiple-circuits","title":"Monitoring Multiple Circuit Breakers","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\nstart_http_server(8000)\n\n# Reuse listener instance\nlistener = PrometheusListener()\n\npayment_cb = CircuitBreaker(name=\"payment_api\", ..., listeners=[listener])\ninventory_cb = CircuitBreaker(name=\"inventory_api\", ..., listeners=[listener])\n</code></pre>"},{"location":"components/listeners/prometheus/#custom-metrics","title":"Custom Metrics","text":"<p>For additional metrics, implement <code>IListener</code> to create a custom listener:</p> <pre><code>from prometheus_client import Counter\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nCUSTOM_METRIC = Counter('my_custom_metric', 'Description', ['circuit_name'])\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        # Custom logic\n        CUSTOM_METRIC.labels(circuit_name=signal.circuit_name).inc()\n</code></pre>"},{"location":"components/listeners/prometheus/#next-steps","title":"Next Steps","text":"<ul> <li>SlackListener - Real-time notification setup</li> <li>LogListener - Logging configuration</li> <li>Overview - Back to listeners overview</li> </ul>"},{"location":"components/listeners/slack/","title":"SlackListener / AsyncSlackListener","text":"<p>Listeners that send circuit breaker state transition notifications to Slack channels.</p>"},{"location":"components/listeners/slack/#installation","title":"Installation","text":"<pre><code>pip install fluxgate[slack]\n</code></pre>"},{"location":"components/listeners/slack/#slack-setup","title":"Slack Setup","text":""},{"location":"components/listeners/slack/#1-create-slack-app","title":"1. Create Slack App","text":"<ol> <li>Go to https://api.slack.com/apps and click \"Create New App\"</li> <li>Select \"From scratch\"</li> <li>Enter app name and select workspace</li> </ol>"},{"location":"components/listeners/slack/#2-configure-bot-token-permissions","title":"2. Configure Bot Token Permissions","text":"<p>On the OAuth &amp; Permissions page, add these scopes:</p> <ul> <li><code>chat:write</code> - Send messages</li> <li><code>chat:write.public</code> - Send messages to public channels (optional)</li> </ul>"},{"location":"components/listeners/slack/#3-copy-bot-token","title":"3. Copy Bot Token","text":"<p>OAuth &amp; Permissions \u2192 Bot User OAuth Token (starts with xoxb-)</p>"},{"location":"components/listeners/slack/#4-get-channel-id","title":"4. Get Channel ID","text":"<p>Right-click channel \u2192 \"View channel details\" \u2192 Copy Channel ID (e.g., C1234567890)</p>"},{"location":"components/listeners/slack/#usage","title":"Usage","text":""},{"location":"components/listeners/slack/#synchronous-circuit-breaker","title":"Synchronous Circuit Breaker","text":"<pre><code>import os\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.slack import SlackListener\n\nslack = SlackListener(\n    channel=os.environ[\"SLACK_CHANNEL\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[slack],\n)\n</code></pre>"},{"location":"components/listeners/slack/#asynchronous-circuit-breaker","title":"Asynchronous Circuit Breaker","text":"<pre><code>import os\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.slack import AsyncSlackListener\n\nslack = AsyncSlackListener(\n    channel=os.environ[\"SLACK_CHANNEL\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[slack],\n)\n</code></pre>"},{"location":"components/listeners/slack/#message-format","title":"Message Format","text":""},{"location":"components/listeners/slack/#closed-open","title":"CLOSED \u2192 OPEN","text":"<ul> <li>\ud83d\udea8 Circuit Breaker Triggered</li> <li>Red (#FF4C4C)</li> <li>Starts new thread</li> </ul>"},{"location":"components/listeners/slack/#open-half_open","title":"OPEN \u2192 HALF_OPEN","text":"<ul> <li>\ud83d\udd04 Attempting Circuit Breaker Recovery</li> <li>Orange (#FFA500)</li> <li>Reply to same thread</li> </ul>"},{"location":"components/listeners/slack/#half_open-open","title":"HALF_OPEN \u2192 OPEN","text":"<ul> <li>\u26a0\ufe0f Circuit Breaker Re-triggered</li> <li>Red (#FF4C4C)</li> <li>Reply to same thread</li> </ul>"},{"location":"components/listeners/slack/#half_open-closed","title":"HALF_OPEN \u2192 CLOSED","text":"<ul> <li>\u2705 Circuit Breaker Recovered</li> <li>Green (#36a64f)</li> <li>Reply to same thread + broadcast to channel</li> </ul>"},{"location":"components/listeners/slack/#conditional-notifications","title":"Conditional Notifications","text":"<p>Only notify for specific state transitions:</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\nfrom fluxgate.listeners.slack import SlackListener\n\nclass CriticalSlackListener(IListener):\n    \"\"\"Only notify on OPEN state transitions\"\"\"\n\n    def __init__(self, channel: str, token: str):\n        self._slack = SlackListener(channel, token)\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self._slack(signal)\n</code></pre>"},{"location":"components/listeners/slack/#custom-messages","title":"Custom Messages","text":"<p>To customize message format, implement <code>IListener</code> directly. See Slack API documentation for message formatting.</p>"},{"location":"components/listeners/slack/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>401 Unauthorized: Verify bot token</li> <li>403 Forbidden: Check <code>chat:write</code> permission and workspace installation</li> <li>404 Channel Not Found: Verify channel ID and bot invitation</li> </ul>"},{"location":"components/listeners/slack/#next-steps","title":"Next Steps","text":"<ul> <li>PrometheusListener - Metrics-based monitoring</li> <li>LogListener - Logging configuration</li> <li>Overview - Back to listeners overview</li> </ul>"},{"location":"ko/","title":"Fluxgate","text":"<p>\ub3d9\uae30 \ubc0f \ube44\ub3d9\uae30 \ucf54\ub4dc\ub97c \ubaa8\ub450 \uc644\ubcbd\ud558\uac8c \uc9c0\uc6d0\ud558\ub294 Python\uc6a9 \ud604\ub300\uc801\uc774\uace0 \uc870\ud569 \uac00\ub2a5\ud55c Circuit Breaker \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/#fluxgate_1","title":"\uc65c Fluxgate\uc778\uac00?","text":"<p>Circuit breaker\ub294 \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc2e4\ud328\ud558\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud638\ucd9c\uc744 \uc77c\uc2dc\uc801\uc73c\ub85c \ucc28\ub2e8\ud558\uc5ec \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc758 \uc5f0\uc1c4 \uc7a5\uc560\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4. Fluxgate\ub294 \uc774\ub97c \uc27d\uac8c \ub9cc\ub4e4\uc5b4\uc90d\ub2c8\ub2e4:</p> <ul> <li>\ub3d9\uae30 &amp; \ube44\ub3d9\uae30: \ub3d9\uae30 \ubc0f \ube44\ub3d9\uae30 \ucf54\ub4dc \ubaa8\ub450 \uc644\ubcbd \uc9c0\uc6d0</li> <li>\uc870\ud569 \uac00\ub2a5: \uac04\ub2e8\ud558\uace0 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\ub85c \ubcf5\uc7a1\ud55c \uc2e4\ud328 \uac10\uc9c0 \ub85c\uc9c1 \uad6c\uc131</li> <li>\uc758\uc874\uc131 \uc5c6\uc74c: \ucf54\uc5b4 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc678\ubd80 \uc758\uc874\uc131 \uc5c6\uc74c</li> <li>\uc644\uc804\ud55c \ud0c0\uc785 \ud78c\ud305: IDE \uc9c0\uc6d0\uc744 \uc704\ud55c \uc644\ubcbd\ud55c \ud0c0\uc785 \ud78c\ud2b8</li> <li>\ud504\ub85c\ub355\uc158 \uc900\ube44 \uc644\ub8cc: Prometheus, Slack, \ub85c\uae45\uc744 \ud1b5\ud55c \ub0b4\uc7a5 \ubaa8\ub2c8\ud130\ub9c1</li> </ul>"},{"location":"ko/#_1","title":"\ube60\ub978 \uc2dc\uc791","text":""},{"location":"ko/#_2","title":"\uc124\uce58","text":"<pre><code>pip install fluxgate\n</code></pre>"},{"location":"ko/#_3","title":"\uae30\ubcf8 \uc608\uc81c","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef call_payment_api(amount: float):\n    return requests.post(\"https://api.example.com/pay\", json={\"amount\": amount})\n</code></pre>"},{"location":"ko/#_4","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p>Circuit breaker\ub294 \uc138 \uac00\uc9c0 \uc8fc\uc694 \uc0c1\ud0dc\ub85c \uc791\ub3d9\ud569\ub2c8\ub2e4:</p> <pre><code>CLOSED --[tripper]--&gt; OPEN --[retry]--&gt; HALF_OPEN --[!tripper]--&gt; CLOSED\n                       ^                   |\n                       +----[tripper]------+\n</code></pre> <ul> <li>CLOSED: \uc815\uc0c1 \ub3d9\uc791, \ubaa8\ub4e0 \ud638\ucd9c \ud5c8\uc6a9</li> <li>OPEN: \uc2e4\ud328 \uc784\uacc4\uac12 \ucd08\uacfc, \ud638\ucd9c \ucc28\ub2e8</li> <li>HALF_OPEN: \ubcf5\uad6c \ud14c\uc2a4\ud2b8 \uc911, \uc81c\ud55c\uc801 \ud638\ucd9c \ud5c8\uc6a9</li> </ul>"},{"location":"ko/#_5","title":"\ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8","text":"<p>Fluxgate\ub294 \uc870\ud569 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc720\uc5f0\ud55c \uc2e4\ud328 \uac10\uc9c0 \ub85c\uc9c1\uc744 \uad6c\ucd95\ud569\ub2c8\ub2e4:</p> \ucef4\ud3ec\ub10c\ud2b8 \ubaa9\uc801 \uc608\uc81c Windows \ud638\ucd9c \uae30\ub85d \ucd94\uc801 <code>CountWindow(100)</code> - \ucd5c\uadfc 100\uac1c \ud638\ucd9c <code>TimeWindow(60)</code> - \ucd5c\uadfc 60\ucd08 Trackers \ucd94\uc801\ud560 \ud56d\ubaa9 \uc815\uc758 <code>TypeOf(ConnectionError)</code> - \ud2b9\uc815 \uc5d0\ub7ec \ucd94\uc801 <code>Custom(func)</code> - \ucee4\uc2a4\ud140 \ub85c\uc9c1 Trippers circuit \uc5f4 \uc2dc\uc810 <code>FailureRate(0.5)</code> - 50% \uc2e4\ud328\uc728 <code>AvgLatency(2.0)</code> - \ub290\ub9b0 \uc751\ub2f5 Retries \uc7ac\uc2dc\ub3c4 \uc2dc\uc810 <code>Cooldown(60.0)</code> - 60\ucd08 \ub300\uae30 <code>Backoff(10.0)</code> - \uc9c0\uc218 \ubc31\uc624\ud504 Permits \ubcf5\uad6c \uc81c\uc5b4 <code>Random(0.5)</code> - 50% \ud638\ucd9c \ud5c8\uc6a9 <code>RampUp(0.1, 0.8, 60)</code> - \uc810\uc9c4\uc801 \uc99d\uac00"},{"location":"ko/#_6","title":"\ube44\ub3d9\uae30 \uc9c0\uc6d0","text":"<p>Asyncio \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc644\ubcbd\ud558\uac8c \uc9c0\uc6d0\ud569\ub2c8\ub2e4:</p> <pre><code>from fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n    max_half_open_calls=5,\n)\n\n@cb\nasync def call_async_api():\n    async with httpx.AsyncClient() as client:\n        return await client.get(\"https://api.example.com/data\")\n</code></pre>"},{"location":"ko/#_7","title":"\ud504\ub85c\ub355\uc158 \uc608\uc81c","text":"<p>\uc678\ubd80 \uacb0\uc81c API\ub97c \uc704\ud55c \ud504\ub85c\ub355\uc158 \uc900\ube44 \uc644\ub8cc circuit breaker:</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# 5xx \uc5d0\ub7ec\uc640 \ub124\ud2b8\uc6cc\ud06c \uc2e4\ud328\ub9cc \ucd94\uc801\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0, jitter_ratio=0.1),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\"https://payment-api.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"ko/#_8","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>\ucef4\ud3ec\ub10c\ud2b8 \uc54c\uc544\ubcf4\uae30 - Windows, Trackers, Trippers, Retries, Permits \uc2ec\ud654 \ud559\uc2b5</li> <li>\uc608\uc81c \ubcf4\uae30 - \uc2e4\uc81c \uc0ac\uc6a9 \ud328\ud134</li> <li>API \ub808\ud37c\ub7f0\uc2a4 \uc77d\uae30 - \uc644\uc804\ud55c API \ubb38\uc11c</li> </ul>"},{"location":"ko/changelog/","title":"\ub9b4\ub9ac\uc2a4 \ub178\ud2b8","text":""},{"location":"ko/changelog/#011","title":"0.1.1","text":"<p>\ucd5c\ucd08 \ub9b4\ub9ac\uc2a4.</p>"},{"location":"ko/changelog/#features","title":"Features","text":"<ul> <li>\u2728 \ub3d9\uae30/\ube44\ub3d9\uae30 \uc9c0\uc6d0\uc744 \uc704\ud55c <code>CircuitBreaker</code>, <code>AsyncCircuitBreaker</code> \ucd94\uac00.</li> <li>\u2728 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0 \ucd94\uac00: <code>CountWindow</code> (\uac1c\uc218 \uae30\ubc18), <code>TimeWindow</code> (\uc2dc\uac04 \uae30\ubc18).</li> <li>\u2728 <code>&amp;</code>, <code>|</code>, <code>~</code> \uc5f0\uc0b0\uc790\ub85c \uc870\ud569 \uac00\ub2a5\ud55c \ud2b8\ub798\ucee4 \ucd94\uac00: <code>All</code>, <code>TypeOf</code>, <code>Custom</code>.</li> <li>\u2728 <code>&amp;</code>, <code>|</code> \uc5f0\uc0b0\uc790\ub85c \uc870\ud569 \uac00\ub2a5\ud55c \ud2b8\ub9ac\ud37c \ucd94\uac00: <code>Closed</code>, <code>HalfOpened</code>, <code>MinRequests</code>, <code>FailureRate</code>, <code>AvgLatency</code>, <code>SlowRate</code>.</li> <li>\u2728 \uc7ac\uc2dc\ub3c4 \uc804\ub7b5 \ucd94\uac00: <code>Never</code>, <code>Always</code>, <code>Cooldown</code>, <code>Backoff</code>.</li> <li>\u2728 \ud5c8\uc6a9 \uc804\ub7b5 \ucd94\uac00: <code>Random</code>, <code>RampUp</code>.</li> <li>\u2728 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud55c \ub9ac\uc2a4\ub108 \ucd94\uac00: <code>LogListener</code>, <code>PrometheusListener</code>, <code>SlackListener</code>.</li> <li>\u2728 \uc218\ub3d9 \uc81c\uc5b4 \uba54\uc11c\ub4dc \ucd94\uac00: <code>disable()</code>, <code>enable()</code>, <code>force_open()</code>, <code>reset()</code>.</li> <li>\u2728 <code>py.typed</code> \ub9c8\ucee4\uc640 \ud568\uaed8 \uc644\uc804\ud55c \ud0c0\uc785 \ud78c\ud2b8 \uc9c0\uc6d0.</li> </ul>"},{"location":"ko/circuit-breaker/","title":"Circuit Breaker","text":"<p>Circuit Breaker\ub294 \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc2e4\ud328\ud558\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud638\ucd9c\uc744 \uc790\ub3d9\uc73c\ub85c \ucc28\ub2e8\ud558\uc5ec \uc5f0\uc1c4 \uc7a5\uc560\ub97c \ubc29\uc9c0\ud558\ub294 \ub514\uc790\uc778 \ud328\ud134\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/circuit-breaker/#core-concepts","title":"\ud575\uc2ec \uac1c\ub150","text":"<p>Circuit Breaker\ub294 \uc804\uae30 \ud68c\ub85c\uc758 \ucc28\ub2e8\uae30\ucc98\ub7fc \uc791\ub3d9\ud569\ub2c8\ub2e4:</p> <ul> <li>\uc815\uc0c1 \uc0c1\ud0dc\uc5d0\uc11c\ub294 \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ud5c8\uc6a9 (\ud68c\ub85c\uac00 \ub2eb\ud600\uc788\uc74c)</li> <li>\uc2e4\ud328\uac00 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud558\uba74 \ud638\ucd9c\uc744 \ucc28\ub2e8 (\ud68c\ub85c\uac00 \uc5f4\ub9bc)</li> <li>\uc77c\uc815 \uc2dc\uac04 \ud6c4 \ubcf5\uad6c\ub97c \ud14c\uc2a4\ud2b8 (\ubc18\uac1c\ubc29 \uc0c1\ud0dc)</li> </ul>"},{"location":"ko/circuit-breaker/#state-transitions","title":"\uc0c1\ud0dc \uc804\ud658","text":"<p>Circuit Breaker\ub294 6\uac00\uc9c0 \uc0c1\ud0dc\ub97c \uac00\uc9d1\ub2c8\ub2e4:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 CLOSED  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt;\u2502 OPEN \u2502&lt;\u2500\u2500\u2500\u2500\u2500\u2510\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 [tripper] \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n     ^                    \u2502         \u2502\n     \u2502                    \u2502[retry]  \u2502[tripper]\n     \u2502                    v         \u2502\n     \u2502               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 HALF_OPEN \u2502\u2500\u2500\u2518\n        [!tripper]   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ko/circuit-breaker/#state-closed","title":"CLOSED (\ub2eb\ud798)","text":"<p>\uc815\uc0c1 \uc791\ub3d9 \uc0c1\ud0dc</p> <ul> <li>\ubaa8\ub4e0 \ud638\ucd9c\uc774 \uc2e4\uc81c \uc11c\ube44\uc2a4\ub85c \uc804\ub2ec\ub428</li> <li>\uc2e4\ud328 \uba54\ud2b8\ub9ad\uc744 \uc9c0\uc18d\uc801\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1</li> <li>Tripper \uc870\uac74\uc774 \ub9cc\uc871\ub418\uba74 OPEN\uc73c\ub85c \uc804\ud658</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import All\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=All(),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),  # CLOSED \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \ud3c9\uac00\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n</code></pre>"},{"location":"ko/circuit-breaker/#state-open","title":"OPEN (\uc5f4\ub9bc)","text":"<p>\ud638\ucd9c \ucc28\ub2e8 \uc0c1\ud0dc</p> <ul> <li>\ubaa8\ub4e0 \ud638\ucd9c\uc774 \uc989\uc2dc <code>CallNotPermittedError</code> \ubc1c\uc0dd</li> <li>\uc2e4\ud328\ud55c \uc11c\ube44\uc2a4\ub97c \ubcf4\ud638\ud558\uace0 \ub9ac\uc18c\uc2a4 \ub0ad\ube44 \ubc29\uc9c0</li> <li>Retry \uc804\ub7b5\uc5d0 \ub530\ub77c \uc77c\uc815 \uc2dc\uac04 \ud6c4 HALF_OPEN\uc73c\ub85c \uc804\ud658</li> </ul> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef call_api():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = call_api()\nexcept CallNotPermittedError as e:\n    print(f\"Circuit is open: {e.message}\")\n    # Fallback \ub85c\uc9c1 \uc2e4\ud589\n    return {\"fallback\": \"data\"}\n</code></pre>"},{"location":"ko/circuit-breaker/#state-half-open","title":"HALF_OPEN (\ubc18\uac1c\ubc29)","text":"<p>\ubcf5\uad6c \ud14c\uc2a4\ud2b8 \uc0c1\ud0dc</p> <ul> <li>Permit \uc804\ub7b5\uc5d0 \ub530\ub77c \uc81c\ud55c\uc801\uc73c\ub85c \ud638\ucd9c \ud5c8\uc6a9</li> <li>\uc131\uacf5\ud558\uba74 CLOSED\ub85c, \uc2e4\ud328\ud558\uba74 \ub2e4\uc2dc OPEN\uc73c\ub85c \uc804\ud658</li> <li>\uc810\uc9c4\uc801 \ubcf5\uad6c\ub97c \ud1b5\ud574 \uc11c\ube44\uc2a4 \ubd80\ub2f4 \ucd5c\uc18c\ud654</li> </ul> <pre><code>from fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=All(),\n    tripper=MinRequests(5) &amp; FailureRate(0.3),  # HALF_OPEN\uc5d0\uc11c\ub294 \ub354 \uc5c4\uaca9\ud55c \uae30\uc900\n    retry=Cooldown(duration=60.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),  # 10%\ubd80\ud130 \uc2dc\uc791\ud558\uc5ec \uc810\uc9c4\uc801 \uc99d\uac00\n)\n</code></pre>"},{"location":"ko/circuit-breaker/#state-metrics-only","title":"METRICS_ONLY (\uba54\ud2b8\ub9ad\ub9cc)","text":"<p>\uba54\ud2b8\ub9ad \uc218\uc9d1\ub9cc \uc218\ud589</p> <ul> <li>\ubaa8\ub4e0 \ud638\ucd9c\uc774 \uc2e4\uc81c \uc11c\ube44\uc2a4\ub85c \uc804\ub2ec\ub428</li> <li>\uba54\ud2b8\ub9ad\uc740 \uc218\uc9d1\ud558\uc9c0\ub9cc Circuit\uc740 \uc808\ub300 \uc5f4\ub9ac\uc9c0 \uc54a\uc74c</li> <li>\ud504\ub85c\ub355\uc158 \ubc30\ud3ec \uc804 \ubaa8\ub2c8\ud130\ub9c1 \ud14c\uc2a4\ud2b8\uc5d0 \uc720\uc6a9</li> </ul> <pre><code># \ud504\ub85c\ub355\uc158 \ubc30\ud3ec \uc804 \uba54\ud2b8\ub9ad \uc218\uc9d1\ncb.metrics_only()\n\n# \ub098\uc911\uc5d0 \uc2e4\uc81c Circuit Breaker \ud65c\uc131\ud654\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#state-disabled","title":"DISABLED (\ube44\ud65c\uc131)","text":"<p>Circuit Breaker \ube44\ud65c\uc131\ud654</p> <ul> <li>\ubaa8\ub4e0 \ud638\ucd9c\uc774 \uc2e4\uc81c \uc11c\ube44\uc2a4\ub85c \uc804\ub2ec\ub428</li> <li>\uba54\ud2b8\ub9ad\ub3c4 \uc218\uc9d1\ud558\uc9c0 \uc54a\uc74c</li> <li>\ub514\ubc84\uae45\uc774\ub098 \uae34\uae09 \uc0c1\ud669\uc5d0 \uc720\uc6a9</li> </ul> <pre><code># \uae34\uae09 \uc0c1\ud669\uc5d0\uc11c Circuit Breaker \ube44\ud65c\uc131\ud654\ncb.disable()\n\n# \ub098\uc911\uc5d0 \ub2e4\uc2dc \ud65c\uc131\ud654\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#state-forced-open","title":"FORCED_OPEN (\uac15\uc81c \uc5f4\ub9bc)","text":"<p>\uac15\uc81c\ub85c \ud638\ucd9c \ucc28\ub2e8</p> <ul> <li>\ubaa8\ub4e0 \ud638\ucd9c\uc774 \uc989\uc2dc <code>CallNotPermittedError</code> \ubc1c\uc0dd</li> <li>\uc790\ub3d9 \ubcf5\uad6c \uc5c6\uc74c (\uc218\ub3d9\uc73c\ub85c reset \ud544\uc694)</li> <li>\uacc4\ud68d\ub41c \uc720\uc9c0\ubcf4\uc218\ub098 \uae34\uae09 \ucc28\ub2e8\uc5d0 \uc720\uc6a9</li> </ul> <pre><code># \uc720\uc9c0\ubcf4\uc218\ub97c \uc704\ud574 \uac15\uc81c\ub85c Circuit \uc5f4\uae30\ncb.force_open()\n\n# \uc720\uc9c0\ubcf4\uc218 \uc644\ub8cc \ud6c4 \ubcf5\uad6c\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#usage","title":"\uc0ac\uc6a9 \ubc29\ubc95","text":""},{"location":"ko/circuit-breaker/#decorator-usage","title":"\ub370\ucf54\ub808\uc774\ud130 \ubc29\uc2dd","text":"<p>\uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \ubc29\ubc95\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = requests.post(\"https://payment.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"ko/circuit-breaker/#call-usage","title":"\uc9c1\uc811 \ud638\ucd9c \ubc29\uc2dd","text":"<p>\ub3d9\uc801\uc73c\ub85c \ud568\uc218\ub97c \ubcf4\ud638\ud574\uc57c \ud560 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>def process_payment(amount: float):\n    response = requests.post(\"https://payment.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n\n# Circuit Breaker\ub97c \ud1b5\ud574 \ud638\ucd9c\nresult = cb.call(process_payment, amount=100.0)\n</code></pre>"},{"location":"ko/circuit-breaker/#async-usage","title":"\ube44\ub3d9\uae30 \uc9c0\uc6d0","text":"<p>Asyncio \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc704\ud55c \uc644\ubcbd\ud55c \uc9c0\uc6d0\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>Note</p> <p>AsyncCircuitBreaker\ub294 <code>max_half_open_calls</code> \ud30c\ub77c\ubbf8\ud130\ub97c \ud1b5\ud574 HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ub3d9\uc2dc\uc5d0 \uc2e4\ud589 \uac00\ub2a5\ud55c \ud638\ucd9c \uc218\ub97c \uc81c\ud55c\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 10\uc774\uba70, asyncio.Semaphore\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub3d9\uc2dc\uc131\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4. \uc774 \uc81c\ud55c\uc740 \ubcf5\uad6c \ud14c\uc2a4\ud2b8 \uc911\uc778 \uc11c\ube44\uc2a4\uc5d0 \uacfc\ub3c4\ud55c \ubd80\ud558\uac00 \uac00\ud574\uc9c0\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.ConnectError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n    max_half_open_calls=5,  # HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ub3d9\uc2dc \ud638\ucd9c \uc81c\ud55c (\uae30\ubcf8\uac12: 10)\n)\n\n@cb\nasync def fetch_data():\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\"https://api.example.com/data\")\n        response.raise_for_status()\n        return response.json()\n\n# \uc0ac\uc6a9\nresult = await fetch_data()\n</code></pre>"},{"location":"ko/circuit-breaker/#info","title":"\uc0c1\ud0dc \uc815\ubcf4 \uc870\ud68c","text":"<p>Circuit Breaker\uc758 \ud604\uc7ac \uc0c1\ud0dc\uc640 \uba54\ud2b8\ub9ad\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>info = cb.info()\nprint(f\"Circuit: {info.name}\")\nprint(f\"State: {info.state}\")\nprint(f\"Changed at: {info.changed_at}\")\nprint(f\"Reopens: {info.reopens}\")\nprint(f\"Metrics: {info.metrics}\")\n\n# \ucd9c\ub825 \uc608\uc2dc:\n# Circuit: payment_api\n# State: closed\n# Changed at: 1234567890.123\n# Reopens: 0\n# Metrics: Metric(total_count=100, failure_count=5, total_duration=45.2, slow_count=3)\n</code></pre>"},{"location":"ko/circuit-breaker/#manual-control","title":"\uc218\ub3d9 \uc81c\uc5b4","text":"<p>\ud544\uc694\uc2dc Circuit Breaker\ub97c \uc218\ub3d9\uc73c\ub85c \uc81c\uc5b4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># CLOSED\ub85c \ub9ac\uc14b (\uba54\ud2b8\ub9ad\ub3c4 \ucd08\uae30\ud654)\ncb.reset()\n\n# METRICS_ONLY\ub85c \uc804\ud658\ncb.metrics_only()\n\n# DISABLED\ub85c \uc804\ud658\ncb.disable()\n\n# FORCED_OPEN\uc73c\ub85c \uc804\ud658\ncb.force_open()\n\n# \ub9ac\uc2a4\ub108\uc5d0 \uc54c\ub9bc \uc5c6\uc774 \uc0c1\ud0dc \ubcc0\uacbd\ncb.reset(notify=False)\n</code></pre>"},{"location":"ko/circuit-breaker/#error-handling","title":"\uc5d0\ub7ec \ucc98\ub9ac","text":"<p>Circuit\uc774 \uc5f4\ub824\uc788\uc744 \ub54c \ubc1c\uc0dd\ud558\ub294 \uc5d0\ub7ec\ub97c \ucc98\ub9ac\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/circuit-breaker/#fallback-parameter","title":"Fallback \ud30c\ub77c\ubbf8\ud130 \uc0ac\uc6a9 (\uad8c\uc7a5)","text":"<p><code>fallback</code> \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud558\uba74 \uc608\uc678 \ubc1c\uc0dd \uc2dc \uc790\ub3d9\uc73c\ub85c \ub300\uccb4 \ud568\uc218\uac00 \ud638\ucd9c\ub429\ub2c8\ub2e4.</p> <pre><code># fallback \ud568\uc218\ub294 \uc608\uc678\ub97c \uc778\uc790\ub85c \ubc1b\uc74c\ndef handle_error(e: Exception) -&gt; dict:\n    if isinstance(e, CallNotPermittedError):\n        return get_cached_data()  # Circuit \uc5f4\ub9bc\n    if isinstance(e, TimeoutError):\n        return get_stale_data()   # \ud0c0\uc784\uc544\uc6c3\n    raise e  # \ub2e4\ub978 \uc608\uc678\ub294 \uc7ac\ubc1c\uc0dd\n\n@cb(fallback=handle_error)\ndef api_call() -&gt; dict:\n    return requests.get(\"https://api.example.com\").json()\n\n# \uc0ac\uc6a9: \uc608\uc678 \ubc1c\uc0dd \uc2dc \uc790\ub3d9\uc73c\ub85c fallback \ud638\ucd9c\nresult = api_call()\n</code></pre>"},{"location":"ko/circuit-breaker/#call-with-fallback","title":"call_with_fallback \uc0ac\uc6a9","text":"<p>\uba85\uc2dc\uc801\uc73c\ub85c fallback\uc744 \uc9c0\uc815\ud558\uc5ec \ud638\ucd9c\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>result = cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"ko/circuit-breaker/#manual-try-except","title":"\uc218\ub3d9 try/except \ubc29\uc2dd","text":"<pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef api_call():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = api_call()\nexcept CallNotPermittedError:\n    # Circuit\uc774 \uc5f4\ub824\uc788\uc74c - Fallback \ucc98\ub9ac\n    result = get_cached_data()\nexcept Exception as e:\n    # \uc2e4\uc81c \uc11c\ube44\uc2a4 \uc5d0\ub7ec\n    logging.error(f\"API call failed: {e}\")\n    raise\n</code></pre>"},{"location":"ko/circuit-breaker/#complete-example","title":"\uc644\uc804\ud55c \uc608\uc81c","text":"<p>\uc2e4\uc81c \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc644\uc804\ud55c \uc608\uc81c\uc785\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# 5xx \uc5d0\ub7ec\uc640 \ub124\ud2b8\uc6cc\ud06c \uc2e4\ud328\ub9cc \ucd94\uc801\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; (FailureRate(0.6) | SlowRate(0.3))) |    # CLOSED: 60% \uc2e4\ud328 \ub610\ub294 30% \ub290\ub9b0 \ud638\ucd9c\n        (HalfOpened() &amp; (FailureRate(0.5) | SlowRate(0.2)))  # HALF_OPEN: 50% \uc2e4\ud328 \ub610\ub294 20% \ub290\ub9b0 \ud638\ucd9c\n    ),\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # Thundering herd \ubc29\uc9c0\n    ),\n    permit=RampUp(\n        initial=0.1,      # 10%\ubd80\ud130 \uc2dc\uc791\n        final=0.5,        # 50%\uae4c\uc9c0 \uc99d\uac00\n        duration=60.0     # 60\ucd08\uc5d0 \uac78\uccd0\n    ),\n    listeners=[LogListener(), PrometheusListener()],\n    slow_threshold=3.0,  # 3\ucd08 \uc774\uc0c1\uc744 \ub290\ub9b0 \ud638\ucd9c\ub85c \uac04\uc8fc\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://payment-api.example.com/charge\",\n        json={\"amount\": amount},\n        timeout=5.0\n    )\n    response.raise_for_status()\n    return response.json()\n\n# \uc0ac\uc6a9\ntry:\n    result = charge_payment(amount=100.0)\n    print(f\"Payment successful: {result}\")\nexcept CallNotPermittedError:\n    print(\"Payment service is temporarily unavailable\")\n    # Fallback: \uacb0\uc81c\ub97c \ud050\uc5d0 \ucd94\uac00\n    queue_payment(amount=100.0)\nexcept httpx.HTTPStatusError as e:\n    print(f\"Payment failed with status {e.response.status_code}\")\n    raise\n</code></pre>"},{"location":"ko/circuit-breaker/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Components - Circuit Breaker\ub97c \uad6c\uc131\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8 \uc0c1\uc138 \ud559\uc2b5</li> <li>Examples - \uc2e4\uc81c \uc0ac\uc6a9 \ud328\ud134\uacfc \uc2dc\ub098\ub9ac\uc624</li> <li>API Reference - \uc804\uccb4 API \ubb38\uc11c</li> </ul>"},{"location":"ko/examples/","title":"Examples","text":"<p>\uc2e4\uc81c \uc0ac\uc6a9 \uc0ac\ub840\ub85c Fluxgate\ub97c \ube60\ub974\uac8c \uc2dc\uc791\ud558\uc138\uc694.</p>"},{"location":"ko/examples/#_1","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":""},{"location":"ko/examples/#http-api","title":"HTTP API \ubcf4\ud638","text":"<p>\uc678\ubd80 API \ud638\ucd9c\uc744 Circuit Breaker\ub85c \ubcf4\ud638\ud569\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://api.example.com/charge\",\n        json={\"amount\": amount}\n    )\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"ko/examples/#_2","title":"\ube44\ub3d9\uae30 \uc0ac\uc6a9\ubc95","text":""},{"location":"ko/examples/#fastapi","title":"FastAPI \ud1b5\ud569","text":"<p>FastAPI \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc5d0 Circuit Breaker\ub97c \uc801\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fastapi import FastAPI, HTTPException\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker, CallNotPermittedError\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\napp = FastAPI()\n\ncb = AsyncCircuitBreaker(\n    name=\"external_api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n@app.get(\"/data\")\nasync def get_data():\n    try:\n        @cb\n        async def fetch():\n            async with httpx.AsyncClient() as client:\n                response = await client.get(\"https://api.example.com/data\")\n                response.raise_for_status()\n                return response.json()\n\n        return await fetch()\n    except CallNotPermittedError:\n        raise HTTPException(status_code=503, detail=\"Service unavailable\")\n</code></pre>"},{"location":"ko/examples/#circuit-breaker","title":"\uc5ec\ub7ec Circuit Breaker \uad00\ub9ac","text":"<p>\uc11c\ube44\uc2a4\ubcc4\ub85c \ub3c5\ub9bd\uc801\uc778 Circuit Breaker\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\n# \uc11c\ube44\uc2a4\ubcc4 Circuit Breaker\npayment_cb = AsyncCircuitBreaker(\n    name=\"payment_service\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\ninventory_cb = AsyncCircuitBreaker(\n    name=\"inventory_service\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.3),\n    retry=Cooldown(duration=30.0),\n    permit=Random(ratio=0.7),\n)\n\n@payment_cb\nasync def charge_payment(amount: float):\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            \"https://payment.example.com/charge\",\n            json={\"amount\": amount}\n        )\n        response.raise_for_status()\n        return response.json()\n\n@inventory_cb\nasync def check_inventory(product_id: str):\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            f\"https://inventory.example.com/products/{product_id}\"\n        )\n        response.raise_for_status()\n        return response.json()\n</code></pre>"},{"location":"ko/examples/#_3","title":"\uace0\uae09 \uc0ac\uc6a9\ubc95","text":""},{"location":"ko/examples/#_4","title":"\ucee4\uc2a4\ud140 \uc5d0\ub7ec \ucd94\uc801","text":"<p>\ud2b9\uc815 \uc870\uac74\uc758 \uc5d0\ub7ec\ub9cc Circuit Breaker\uc5d0\uc11c \ucd94\uc801\ud569\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\n# 5xx \uc5d0\ub7ec\uc640 \ub124\ud2b8\uc6cc\ud06c \uc7a5\uc560\ub9cc \ucd94\uc801\ndef is_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\ncb = CircuitBreaker(\n    name=\"api_client\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_server_error),\n    tripper=Closed() &amp; MinRequests(20) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n</code></pre>"},{"location":"ko/examples/#_5","title":"\uc0c1\ud0dc\ubcc4 \uc11c\ub85c \ub2e4\ub978 \uc784\uacc4\uac12","text":"<p>CLOSED\uc640 HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ub2e4\ub978 \uc784\uacc4\uac12\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    # CLOSED: 60% \uc2e4\ud328\uc728, HALF_OPEN: 50% \uc2e4\ud328\uc728\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Cooldown(duration=60.0),\n    # \uc810\uc9c4\uc801 \ud2b8\ub798\ud53d \uc99d\uac00: 10% \u2192 80% (60\ucd08)\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n)\n</code></pre>"},{"location":"ko/examples/#fallback","title":"Fallback \ucc98\ub9ac","text":"<p>Circuit\uc774 \uc5f4\ub838\uc744 \ub54c \ub300\uccb4 \ub3d9\uc791\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. <code>fallback</code> \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud558\uba74 \uc608\uc678 \ubc1c\uc0dd \uc2dc \uc790\ub3d9\uc73c\ub85c \ub300\uccb4 \ud568\uc218\uac00 \ud638\ucd9c\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/examples/#fallback_1","title":"\ub370\ucf54\ub808\uc774\ud130\uc5d0\uc11c fallback \uc0ac\uc6a9","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=TypeOf(ConnectionError),\n    tripper=Closed() &amp; MinRequests(10) &amp; FailureRate(0.5),\n    retry=Cooldown(duration=60.0),\n    permit=Random(ratio=0.5),\n)\n\n# fallback \ud568\uc218\ub294 \uc608\uc678\ub97c \uc778\uc790\ub85c \ubc1b\uc74c\ndef fallback_handler(e: Exception) -&gt; dict:\n    if isinstance(e, ConnectionError):\n        return get_cached_data()\n    raise e  # \ub2e4\ub978 \uc608\uc678\ub294 \uc7ac\ubc1c\uc0dd\n\n@cb(fallback=fallback_handler)\ndef fetch_data() -&gt; dict:\n    return fetch_from_api()\n\n# \uc0ac\uc6a9: Circuit\uc774 \uc5f4\ub824\uc788\uac70\ub098 \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \uc790\ub3d9\uc73c\ub85c fallback \ud638\ucd9c\nresult = fetch_data()\n</code></pre>"},{"location":"ko/examples/#call_with_fallback","title":"call_with_fallback \uc0ac\uc6a9","text":"<p>\uba85\uc2dc\uc801\uc73c\ub85c fallback\uc744 \uc9c0\uc815\ud558\uc5ec \ud638\ucd9c\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># \ud568\uc218\uc640 fallback\uc744 \ud568\uaed8 \uc804\ub2ec\nresult = cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n\n# \uc778\uc790\uac00 \uc788\ub294 \ud568\uc218\nresult = cb.call_with_fallback(\n    fetch_user_data,\n    lambda e: {\"user_id\": user_id, \"cached\": True},\n    user_id,  # \uc6d0\ubcf8 \ud568\uc218\uc5d0 \uc804\ub2ec\ub420 \uc778\uc790\n)\n</code></pre>"},{"location":"ko/examples/#fallback_2","title":"\ube44\ub3d9\uae30 fallback","text":"<p>AsyncCircuitBreaker\uc5d0\uc11c\ub3c4 \ub3d9\uc77c\ud558\uac8c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    # ... \uc124\uc815\n)\n\n@cb(fallback=lambda e: {\"status\": \"fallback\"})\nasync def fetch_data() -&gt; dict:\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\"https://api.example.com/data\")\n        return response.json()\n\n# \ub610\ub294 call_with_fallback\nresult = await cb.call_with_fallback(\n    fetch_from_api,\n    lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"ko/examples/#tryexcept","title":"\uc218\ub3d9 try/except \ubc29\uc2dd (\uae30\uc874 \ubc29\uc2dd)","text":"<p>fallback \uc5c6\uc774 \uc9c1\uc811 \uc608\uc678\ub97c \ucc98\ub9ac\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CallNotPermittedError\n\n@cb\ndef fetch():\n    return fetch_from_api()\n\ntry:\n    result = fetch()\nexcept CallNotPermittedError:\n    # Circuit\uc774 \uc5f4\ub824\uc788\uc744 \ub54c\n    result = get_cached_data()\nexcept ConnectionError:\n    # \uc5f0\uacb0 \uc2e4\ud328 \uc2dc\n    result = get_cached_data()\n</code></pre>"},{"location":"ko/examples/#_6","title":"\ud329\ud1a0\ub9ac \ud568\uc218","text":"<p>\uc5d4\ub4dc\ud3ec\uc778\ud2b8\ubcc4\ub85c \ub2e4\ub978 \uc815\ucc45\uc758 Circuit Breaker\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import Closed, MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.permits import Random\nimport httpx\n\ndef create_payment_circuit_breaker(\n    endpoint: str,\n    slow_threshold: float,\n    failure_rate: float = 0.5,\n    slow_rate: float = 0.5,\n) -&gt; AsyncCircuitBreaker:\n    return AsyncCircuitBreaker(\n        name=f\"payment_{endpoint}\",\n        window=CountWindow(size=100),\n        tracker=TypeOf(httpx.HTTPError),\n        tripper=Closed() &amp; MinRequests(10) &amp; (\n            FailureRate(failure_rate) | SlowRate(slow_rate, slow_threshold)\n        ),\n        retry=Cooldown(duration=60.0),\n        permit=Random(ratio=0.5),\n    )\n\n# \ubcc0\uc218\uc5d0 \uc800\uc7a5\ncharge_cb = create_payment_circuit_breaker(\"charge\", slow_threshold=2.0, failure_rate=0.3)\nrefund_cb = create_payment_circuit_breaker(\"refund\", slow_threshold=3.0, failure_rate=0.3)\nhistory_cb = create_payment_circuit_breaker(\"history\", slow_threshold=0.5)\n\n# \ub610\ub294 \ubc14\ub85c \ub370\ucf54\ub808\uc774\ud130\ub85c \uc0ac\uc6a9\n@create_payment_circuit_breaker(\"charge\", slow_threshold=2.0, failure_rate=0.3)\nasync def charge_payment(amount: float):\n    ...\n</code></pre>"},{"location":"ko/examples/#_7","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Components - \uc0c1\uc138 \ucef4\ud3ec\ub10c\ud2b8 \ubb38\uc11c</li> <li>Listeners - \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc54c\ub9bc \uc124\uc815</li> <li>API Reference - \uc804\uccb4 API \ubb38\uc11c</li> </ul>"},{"location":"ko/about/comparison/","title":"\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \ube44\uad50","text":"<p>\uc774 \ud398\uc774\uc9c0\uc5d0\uc11c\ub294 Fluxgate\uc640 \ub2e4\ub978 Python circuit breaker \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ube44\uad50\ud558\uc5ec \uc0c1\ud669\uc5d0 \ub9de\ub294 \uc120\ud0dd\uc744 \ub3d5\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/about/comparison/#_2","title":"\uac1c\uc694","text":"\ub77c\uc774\ube0c\ub7ec\ub9ac Python License"},{"location":"ko/about/comparison/#_3","title":"\uae30\ub2a5 \ube44\uad50","text":"\uae30\ub2a5 Fluxgate circuitbreaker pybreaker aiobreaker \ub3d9\uae30 \uc9c0\uc6d0 Yes Yes Yes No \ube44\ub3d9\uae30 \uc9c0\uc6d0 Yes (asyncio) Yes Tornado\ub9cc Yes (asyncio) \ud2b8\ub9ac\uac70 \uc870\uac74 \uc2e4\ud328\uc728 \uc5f0\uc18d \uc2e4\ud328 \uc5f0\uc18d \uc2e4\ud328 \uc5f0\uc18d \uc2e4\ud328 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0 Yes (Count/Time) No No No \uc870\ud569 \uac00\ub2a5\ud55c \uc870\uac74 Yes (<code>&amp;</code>, <code>\\|</code>) No No No \uc9c0\uc5f0\uc2dc\uac04 \uae30\ubc18 \ud2b8\ub9ac\uac70 Yes (AvgLatency, SlowRate) No No No Fallback Yes Yes No No Redis \uc800\uc7a5\uc18c No No Yes Yes \ub9ac\uc2a4\ub108/\ubaa8\ub2c8\ud130\ub9c1 Yes (Log, Prometheus, Slack) Yes (Monitor) Yes Yes \ud0c0\uc785 \ud78c\ud2b8 \uc644\uc804 \ubd80\ubd84 \ubd80\ubd84 \ubd80\ubd84 HALF_OPEN \uc81c\uc5b4 Yes (Permit) 1\ud68c \ud14c\uc2a4\ud2b8 success_threshold 1\ud68c \ud14c\uc2a4\ud2b8"},{"location":"ko/about/comparison/#_4","title":"\uc8fc\uc694 \ucc28\uc774\uc810","text":""},{"location":"ko/about/comparison/#_5","title":"\ud2b8\ub9ac\uac70 \uc870\uac74","text":"<p>\ub300\ubd80\ubd84\uc758 circuit breaker \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc5f0\uc18d \uc2e4\ud328 \ud69f\uc218\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code># circuitbreaker / pybreaker\n# 5\ud68c \uc5f0\uc18d \uc2e4\ud328 \ud6c4 OPEN\n@circuit(failure_threshold=5)\ndef call_api():\n    ...\n</code></pre> <p>Fluxgate\ub294 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0 \ub0b4 \uc2e4\ud328\uc728\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code># Fluxgate\n# \ucd5c\uadfc 100\uac1c \ud638\ucd9c \uc911 \uc2e4\ud328\uc728 50% \ucd08\uacfc \uc2dc OPEN\ncb = CircuitBreaker(\n    window=CountWindow(size=100),\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n    ...\n)\n</code></pre> <p>\uc774 \uc811\uadfc \ubc29\uc2dd\uc758 \uc7a5\uc810:</p> <ul> <li>\ub2e8 \ud55c \ubc88\uc758 \uc131\uacf5\uc73c\ub85c \uc2e4\ud328 \uce74\uc6b4\ud2b8\uac00 \ub9ac\uc14b\ub418\uc9c0 \uc54a\uc74c</li> <li>\uac04\ud5d0\uc801 \uc2e4\ud328\ub97c \ub354 \uc798 \ucc98\ub9ac</li> <li>\ub354 \uc815\ud655\ud55c \uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud3c9\uac00</li> </ul>"},{"location":"ko/about/comparison/#_6","title":"\uc870\ud569 \uac00\ub2a5\ud55c \uc870\uac74","text":"<p>Fluxgate\ub294 \ub17c\ub9ac \uc5f0\uc0b0\uc790\ub85c \uc5ec\ub7ec \uc870\uac74\uc744 \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\n\n# \uc0c1\ud0dc\ubcc4\ub85c \ub2e4\ub978 \uc784\uacc4\uac12 \uc801\uc6a9\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n\n# \uc5ec\ub7ec \ud2b8\ub9ac\uac70 \uc870\uac74 \uc870\ud569\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"ko/about/comparison/#_7","title":"\uc9c0\uc5f0\uc2dc\uac04 \uae30\ubc18 \ud2b8\ub9ac\uac70","text":"<p>Fluxgate\ub294 \uc5d0\ub7ec\ubfd0\ub9cc \uc544\ub2c8\ub77c \uc751\ub2f5 \uc2dc\uac04\uc744 \uae30\ubc18\uc73c\ub85c\ub3c4 circuit\uc744 \uc5f4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>from fluxgate.trippers import AvgLatency, SlowRate\n\n# \ud3c9\uade0 \uc9c0\uc5f0\uc2dc\uac04 2\ucd08 \ucd08\uacfc \uc2dc OPEN\ntripper = MinRequests(10) &amp; AvgLatency(2.0)\n\n# \ub290\ub9b0 \ud638\ucd9c(1\ucd08 \ucd08\uacfc)\uc774 30% \uc774\uc0c1\uc774\uba74 OPEN\ncb = CircuitBreaker(\n    tripper=MinRequests(10) &amp; SlowRate(0.3),\n    slow_threshold=1.0,  # 1\ucd08\n    ...\n)\n</code></pre>"},{"location":"ko/about/comparison/#_8","title":"\uc810\uc9c4\uc801 \ubcf5\uad6c","text":"<p>Fluxgate\ub294 HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \uc138\ubc00\ud55c \ubcf5\uad6c \uc81c\uc5b4\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <pre><code>from fluxgate.permits import RampUp\n\n# 60\ucd08\uc5d0 \uac78\uccd0 \ud2b8\ub798\ud53d\uc744 10%\uc5d0\uc11c 80%\ub85c \uc810\uc9c4\uc801 \uc99d\uac00\ncb = CircuitBreaker(\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"ko/about/comparison/#_9","title":"\ub77c\uc774\ube0c\ub7ec\ub9ac \uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/about/comparison/#fluxgate","title":"Fluxgate\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<ul> <li>\uc5f0\uc18d \uc2e4\ud328\uac00 \uc544\ub2cc \uc2e4\ud328\uc728 \uae30\ubc18 \ud2b8\ub9ac\uac70\uac00 \ud544\uc694\ud560 \ub54c</li> <li>\uc9c0\uc5f0\uc2dc\uac04 \uae30\ubc18 circuit breaking\uc774 \ud544\uc694\ud560 \ub54c</li> <li>\ubcf5\uc7a1\ud55c \ud2b8\ub9ac\uac70 \uc870\uac74\uc744 \uc870\ud569\ud574\uc57c \ud560 \ub54c</li> <li>\ud604\ub300\uc801\uc778 asyncio \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uad6c\ucd95\ud560 \ub54c</li> <li>\uc644\uc804\ud55c \ud0c0\uc785 \ud78c\ud2b8\uc640 IDE \uc9c0\uc6d0\uc774 \uc911\uc694\ud560 \ub54c</li> </ul>"},{"location":"ko/about/comparison/#circuitbreaker","title":"circuitbreaker\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<ul> <li>\uac04\ub2e8\ud558\uace0 \uac80\uc99d\ub41c \uc194\ub8e8\uc158\uc774 \ud544\uc694\ud560 \ub54c</li> <li>\uc5f0\uc18d \uc2e4\ud328 \uce74\uc6b4\ud305\uc73c\ub85c \ucda9\ubd84\ud560 \ub54c</li> <li>\ucd5c\uc18c\ud55c\uc758 \uc124\uc815\uc744 \uc6d0\ud560 \ub54c</li> </ul>"},{"location":"ko/about/comparison/#pybreaker","title":"pybreaker\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<ul> <li>\ubd84\uc0b0 \uc0c1\ud0dc\ub97c \uc704\ud55c Redis \uc800\uc7a5\uc18c\uac00 \ud544\uc694\ud560 \ub54c</li> <li>Tornado\ub85c \ube44\ub3d9\uae30\ub97c \uc0ac\uc6a9\ud560 \ub54c</li> <li><code>success_threshold</code> \uae30\ub2a5\uc774 \ud544\uc694\ud560 \ub54c</li> </ul>"},{"location":"ko/about/comparison/#aiobreaker","title":"aiobreaker\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<ul> <li>asyncio\uc640 \ud568\uaed8 Redis \uc800\uc7a5\uc18c\uac00 \ud544\uc694\ud560 \ub54c</li> <li>pybreaker\uc758 \uae30\ub2a5 \uc138\ud2b8\ub85c \ucda9\ubd84\ud560 \ub54c</li> </ul>"},{"location":"ko/about/comparison/#_10","title":"\ucc38\uace0","text":"<ul> <li>Circuit Breaker - \ud575\uc2ec \uac1c\ub150\uacfc \uc0ac\uc6a9\ubc95</li> <li>\ucef4\ud3ec\ub10c\ud2b8 - \uc0c1\uc138 \ucef4\ud3ec\ub10c\ud2b8 \ubb38\uc11c</li> </ul>"},{"location":"ko/about/design/","title":"\uc124\uacc4\uc640 \uc601\uac10","text":"<p>\uc774 \ubb38\uc11c\ub294 Fluxgate\uc758 \uc124\uacc4 \uacb0\uc815\uacfc \uc601\ud5a5\uc744 \uc900 \ud504\ub85c\uc81d\ud2b8\ub4e4\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_2","title":"\uc774\ub984\uc758 \uc720\ub798","text":"<p>Fluxgate magnetometer\ub294 \uc790\uae30\uc7a5\uc758 \ubcc0\ud654\ub97c \uac10\uc9c0\ud558\ub294 \uc13c\uc11c\ub85c, \ud3ec\ud654 \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc784\uacc4\uac12\uc5d0\uc11c \ubc18\uc751\ud569\ub2c8\ub2e4. Circuit breaker\uac00 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud558\uba74 \uc791\ub3d9\ud558\ub294 \ubc29\uc2dd\uacfc \uc720\uc0ac\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_3","title":"\uc601\uac10","text":""},{"location":"ko/about/design/#resilience4j","title":"Resilience4j","text":"<p>Resilience4j\ub294 Netflix Hystrix\uc5d0\uc11c \uc601\uac10\uc744 \ubc1b\uc740 Java\uc6a9 \uacbd\ub7c9 fault tolerance \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4. Fluxgate\ub294 Resilience4j\uc758 \uc5ec\ub7ec \ud575\uc2ec \uac1c\ub150\uc744 \ucc28\uc6a9\ud588\uc2b5\ub2c8\ub2e4.</p> <p>Resilience4j\ub294 \ub2e8\uc21c\ud55c \uc5f0\uc18d \uc2e4\ud328 \uce74\uc6b4\ud305 \ub300\uc2e0 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0(\uac1c\uc218 \uae30\ubc18 \ub610\ub294 \uc2dc\uac04 \uae30\ubc18)\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud638\ucd9c \uacb0\uacfc\ub97c \ucd94\uc801\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ub354 \uc815\ud655\ud558\uac8c \ud3c9\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. Fluxgate\ub3c4 \uc774 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud588\uc2b5\ub2c8\ub2e4.</p> <pre><code># Resilience4j\uc5d0\uc11c \uc601\uac10\uc744 \ubc1b\uc740 Fluxgate\uc758 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0\nfrom fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # \ucd5c\uadfc 100\uac1c \ud638\ucd9c\nwindow = TimeWindow(size=60)    # \ucd5c\uadfc 60\ucd08\n</code></pre>"},{"location":"ko/about/design/#django-permissions","title":"Django Permissions","text":"<p>Django\uc758 \uad8c\ud55c \uc2dc\uc2a4\ud15c\uc740 \ube44\ud2b8 \uc5f0\uc0b0\uc790(<code>&amp;</code>, <code>|</code>, <code>~</code>)\ub97c \uc0ac\uc6a9\ud558\uc5ec \uad8c\ud55c\uc744 \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \uc6b0\uc544\ud55c \ud328\ud134\uc774 Fluxgate\uc758 \uc870\ud569 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8 \uc124\uacc4\uc5d0 \uc601\uac10\uc744 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.</p> <pre><code># Django REST framework\uc758 \uc870\ud569 \uac00\ub2a5\ud55c \uad8c\ud55c\nfrom rest_framework.views import APIView\n\nclass MyView(APIView):\n    permission_classes = [IsAuthenticated &amp; (IsAdminUser | IsStaff)]\n</code></pre> <p>Fluxgate\ub294 Tripper\uc640 Tracker\uc5d0 \ub3d9\uc77c\ud55c \ud328\ud134\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# \ub17c\ub9ac \uc5f0\uc0b0\uc790\ub85c \uc870\ud569 \uac00\ub2a5\ud55c tripper\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre> <pre><code>from fluxgate.trackers import TypeOf\n\n# \uc870\ud569 \uac00\ub2a5\ud55c tracker\ntracker = TypeOf(ConnectionError, TimeoutError) &amp; ~TypeOf(CancellationError)\n</code></pre> <p>\uc774 \uc811\uadfc \ubc29\uc2dd\uc740 \ubcf5\uc7a1\ud55c \uc124\uc815 \uac1d\uccb4\ub098 \ube4c\ub354 \ud328\ud134 \uc5c6\uc774\ub3c4 \uc720\uc5f0\uc131\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_4","title":"\uc124\uacc4 \uacb0\uc815","text":""},{"location":"ko/about/design/#_5","title":"\ubd84\uc0b0 \uc0c1\ud0dc \uacf5\uc720 \ubbf8\uc9c0\uc6d0","text":"<p>Fluxgate\ub294 \ubd84\uc0b0 \uc0c1\ud0dc \uacf5\uc720(\uc608: Redis \uc800\uc7a5\uc18c)\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uac01 CircuitBreaker \uc778\uc2a4\ud134\uc2a4\ub294 \ub2e8\uc77c \ud504\ub85c\uc138\uc2a4 \ub0b4\uc5d0\uc11c \uc0c1\ud0dc\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</p> <p>\ubd84\uc0b0 \uc0c1\ud0dc\ub294 circuit breaker \ud328\ud134\uc758 \uadfc\ubcf8\uc801\uc778 \uc694\uad6c\uc0ac\ud56d\uc774 \uc544\ub2d9\ub2c8\ub2e4. \uc774 \ud328\ud134\uc758 \ud575\uc2ec \ubaa9\uc801\uc740 \ube44\uc815\uc0c1 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud638\ucd9c\uc744 \ube60\ub974\uac8c \uc911\ub2e8\ud558\uc5ec \uc5f0\uc1c4 \uc7a5\uc560\ub97c \ubc29\uc9c0\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.</p> <ul> <li>\uac01 \ud504\ub85c\uc138\uc2a4\ub294 \ub3c5\ub9bd\uc801\uc73c\ub85c \ub2e4\uc6b4\uc2a4\ud2b8\ub9bc \uc11c\ube44\uc2a4\uc758 \uc0c1\ud0dc\ub97c \ud3c9\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc11c\ube44\uc2a4\uac00 \ube44\uc815\uc0c1\uc774\ub77c\uba74 \ubaa8\ub4e0 \ud504\ub85c\uc138\uc2a4\uac00 \uc790\uccb4 \uc2e4\ud328\ub97c \ud1b5\ud574 \uc790\uc5f0\uc2a4\ub7fd\uac8c \uc774\ub97c \uac10\uc9c0\ud569\ub2c8\ub2e4.</li> <li>\ubd84\uc0b0 \uc0c1\ud0dc\ub97c \ucd94\uac00\ud558\uba74 \ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0, \ucd94\uac00 \uc7a5\uc560 \uc9c0\uc810, \uc6b4\uc601 \ubcf5\uc7a1\uc131\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \ube44\uc6a9\uc774 \uc774\uc810\uc744 \ucd08\uacfc\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/about/design/#_6","title":"\uc2a4\ub808\ub4dc \uc548\uc804\ud558\uc9c0 \uc54a\uc74c","text":"<p><code>CircuitBreaker</code>\ub294 \uc2a4\ub808\ub4dc \uc548\uc804\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub3d9\uc2dc\uc131 \uc791\uc5c5\uc5d0\ub294 asyncio\uc640 \ud568\uaed8 <code>AsyncCircuitBreaker</code>\ub97c \uc0ac\uc6a9\ud558\uc138\uc694.</p> <p>\ud604\uc7ac Python\uc758 GIL(Global Interpreter Lock)\ub85c \uc778\ud574 \uba40\ud2f0\uc2a4\ub808\ub4dc Python \ucf54\ub4dc\ub294 CPU \ubc14\uc6b4\ub4dc \uc791\uc5c5\uc5d0\uc11c \uc9c4\uc815\ud55c \ubcd1\ub82c\uc131\uc744 \ub2ec\uc131\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c \ub300\ubd80\ubd84\uc758 I/O \ubc14\uc6b4\ub4dc Python \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uc2a4\ub808\ub529\ubcf4\ub2e4 asyncio\uc5d0\uc11c \ub354 \ub9ce\uc740 \uc774\uc810\uc744 \uc5bb\uc2b5\ub2c8\ub2e4. \ud604\ub300 Python \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c(FastAPI, Starlette, aiohttp)\ub294 asyncio \uae30\ubc18\uc774\ubbc0\ub85c <code>AsyncCircuitBreaker</code>\uac00 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uc120\ud0dd\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_7","title":"\ucc38\uace0","text":"<ul> <li>\ube44\uad50 - \ub2e4\ub978 Python \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \ube44\uad50</li> <li>\ucef4\ud3ec\ub10c\ud2b8 - \uc0c1\uc138 \ucef4\ud3ec\ub10c\ud2b8 \ubb38\uc11c</li> </ul>"},{"location":"ko/components/","title":"\ucef4\ud3ec\ub10c\ud2b8 \uac1c\uc694","text":"<p>Fluxgate\ub294 \uc870\ud569 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc720\uc5f0\ud55c circuit breaker \uc124\uc815\uc744 \uad6c\ucd95\ud569\ub2c8\ub2e4. \uac01 \ucef4\ud3ec\ub10c\ud2b8\ub294 circuit breaker \ub3d9\uc791\uc758 \ud2b9\uc815 \uce21\uba74\uc744 \ub2f4\ub2f9\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/#architecture","title":"\uc544\ud0a4\ud14d\ucc98","text":"\ucef4\ud3ec\ub10c\ud2b8 \uc5ed\ud560 \uc9c0\uc6d0 \uc5f0\uc0b0\uc790 Window \ud638\ucd9c \uae30\ub85d \ucd94\uc801 (\uac1c\uc218 \ub610\ub294 \uc2dc\uac04 \uae30\ubc18) - Tracker \ucd94\uc801\ud560 \uc608\uc678 \uc815\uc758 &amp;, |, ~ Tripper Circuit\uc744 \uc5ec\ub2eb\ub294 \uc870\uac74 \uacb0\uc815 &amp;, | Retry OPEN \u2192 HALF_OPEN \uc804\ud658 \uc2dc\uc810 \uc81c\uc5b4 - Permit HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c \ud5c8\uc6a9 \uc5ec\ubd80 \uacb0\uc815 - Listener \uc0c1\ud0dc \uc804\ud658 \uac10\uc9c0 \ubc0f \uc678\ubd80 \uc2dc\uc2a4\ud15c \uc54c\ub9bc -"},{"location":"ko/components/#component-types","title":"\ucef4\ud3ec\ub10c\ud2b8 \ud0c0\uc785","text":""},{"location":"ko/components/#windows","title":"Windows","text":"<p>\uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0\ub97c \ud1b5\ud574 \ud638\ucd9c \uae30\ub85d\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.</p> <ul> <li>CountWindow - \ucd5c\uadfc N\uac1c \ud638\ucd9c</li> <li>TimeWindow - \ucd5c\uadfc N\ucd08</li> </ul> <pre><code>from fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # \ucd5c\uadfc 100\uac1c \ud638\ucd9c \ucd94\uc801\nwindow = TimeWindow(size=60)    # \ucd5c\uadfc 60\ucd08 \ucd94\uc801\n</code></pre>"},{"location":"ko/components/#trackers","title":"Trackers","text":"<p>\uc5b4\ub5a4 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \uac04\uc8fc\ud560\uc9c0 \uc815\uc758\ud569\ub2c8\ub2e4.</p> <ul> <li>All - \ubaa8\ub4e0 \uc608\uc678 \ucd94\uc801</li> <li>TypeOf - \ud2b9\uc815 \uc608\uc678 \ud0c0\uc785 \ucd94\uc801</li> <li>Custom - \ucee4\uc2a4\ud140 \ucd94\uc801 \ub85c\uc9c1</li> </ul> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\ntracker = TypeOf(ConnectionError, TimeoutError)\ntracker = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\n</code></pre> <p>\uc870\ud569 \uac00\ub2a5: <code>&amp;</code>, <code>|</code>, <code>~</code> \uc5f0\uc0b0\uc790\ub85c tracker \uc870\ud569 \uac00\ub2a5.</p>"},{"location":"ko/components/#trippers","title":"Trippers","text":"<p>\uba54\ud2b8\ub9ad\uc744 \uae30\ubc18\uc73c\ub85c circuit\uc744 \uc5f4\uace0 \ub2eb\uc744 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4.</p> <ul> <li>Closed/HalfOpened - \uc0c1\ud0dc \uae30\ubc18 \uc870\uac74</li> <li>MinRequests - \ucd5c\uc18c \ud638\ucd9c \uc218</li> <li>FailureRate - \uc2e4\ud328\uc728</li> <li>AvgLatency - \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04</li> <li>SlowRate - \ub290\ub9b0 \ud638\ucd9c \ube44\uc728</li> </ul> <pre><code>from fluxgate.trippers import Closed, MinRequests, FailureRate\n\ntripper = Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>\uc870\ud569 \uac00\ub2a5: <code>&amp;</code>, <code>|</code> \uc5f0\uc0b0\uc790\ub85c \uc870\uac74 \uc870\ud569 \uac00\ub2a5.</p>"},{"location":"ko/components/#retries","title":"Retries","text":"<p>OPEN\uc5d0\uc11c HALF_OPEN \uc0c1\ud0dc\ub85c \uc804\ud658\ud560 \uc2dc\uc810\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4.</p> <ul> <li>Never - \uc218\ub3d9 \ub9ac\uc14b \ud544\uc694</li> <li>Always - \uc989\uc2dc \uc7ac\uc2dc\ub3c4</li> <li>Cooldown - \uace0\uc815 \ub300\uae30 \uc2dc\uac04</li> <li>Backoff - \uc9c0\uc218 \ubc31\uc624\ud504</li> </ul> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\nretry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n</code></pre>"},{"location":"ko/components/#permits","title":"Permits","text":"<p>HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ud560 \ud638\ucd9c\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4.</p> <ul> <li>Random - \ud655\ub960\uc801 \ud5c8\uc6a9</li> <li>RampUp - \uc810\uc9c4\uc801 \ud2b8\ub798\ud53d \uc99d\uac00</li> </ul> <pre><code>from fluxgate.permits import Random, RampUp\n\npermit = Random(ratio=0.5)\npermit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre>"},{"location":"ko/components/#listeners","title":"Listeners","text":"<p>\uc0c1\ud0dc \uc804\ud658\uc744 \uac10\uc9c0\ud558\uace0 \uc678\ubd80 \uc2dc\uc2a4\ud15c\uc5d0 \uc54c\ub9bd\ub2c8\ub2e4.</p> <ul> <li>LogListener - \ud45c\uc900 \ub85c\uae45</li> <li>PrometheusListener - Prometheus \uba54\ud2b8\ub9ad (opt)</li> <li>SlackListener - Slack \uc54c\ub9bc (opt)</li> </ul> <pre><code>from fluxgate.listeners.log import LogListener\n\nlisteners = [LogListener()]\ncb = CircuitBreaker(..., listeners=listeners)\n</code></pre>"},{"location":"ko/components/#full-example","title":"\uc804\uccb4 \uc608\uc81c","text":"<p>\ubaa8\ub4e0 \uac83\uc744 \ud568\uaed8 \uc0ac\uc6a9:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_server_error),\n    tripper=MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    ),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n)\n</code></pre>"},{"location":"ko/components/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<p>\uac01 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uc138\uc694:</p> <ul> <li>Windows - \uc62c\ubc14\ub978 \uc708\ub3c4\uc6b0 \ud0c0\uc785 \uc120\ud0dd</li> <li>Trackers - \uc2e4\ud328 \uae30\uc900 \uc815\uc758</li> <li>Trippers - Circuit \ub3d9\uc791 \uc124\uc815</li> <li>Retries - \ubcf5\uad6c \uc804\ub7b5 \uacc4\ud68d</li> <li>Permits - \ubcf5\uad6c \uc911 \ud2b8\ub798\ud53d \uc81c\uc5b4</li> <li>Listeners - \uc0c1\ud0dc \uc804\ud658 \ubaa8\ub2c8\ud130\ub9c1</li> </ul>"},{"location":"ko/components/permits/","title":"Permits","text":"<p>HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c \ud5c8\uc6a9 \uc5ec\ubd80\ub97c \uc81c\uc5b4\ud569\ub2c8\ub2e4. Circuit\uc774 \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud560 \ub54c \ud2b8\ub798\ud53d\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \ud5c8\uc6a9\ud558\uc5ec \uc548\uc815\uc801\uc778 \ubcf5\uad6c\ub97c \ub3d5\uc2b5\ub2c8\ub2e4.</p> Permit \ud0c0\uc785 \ub3d9\uc791 \ubc29\uc2dd \uc0ac\uc6a9 \uc0ac\ub840 Random \uace0\uc815\ub41c \ud655\ub960\ub85c \ub79c\ub364 \ud5c8\uc6a9 \ub2e8\uc21c\ud55c \ud2b8\ub798\ud53d \uc81c\ud55c RampUp \uc2dc\uac04\uc5d0 \ub530\ub77c \uc810\uc9c4\uc801 \uc99d\uac00 \ubd80\ub4dc\ub7ec\uc6b4 \ud2b8\ub798\ud53d \ubcf5\uad6c"},{"location":"ko/components/permits/#random","title":"Random","text":"<p>\uace0\uc815\ub41c \ud655\ub960\ub85c \ud638\ucd9c\uc744 \ub79c\ub364\ud558\uac8c \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c 50% \ud655\ub960\ub85c \ud638\ucd9c \ud5c8\uc6a9\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=Random(ratio=0.5),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#random-how-it-works","title":"\ub3d9\uc791 \ubc29\uc2dd","text":"<ul> <li>\uac01 \ud638\ucd9c\ub9c8\ub2e4 \ub3c5\ub9bd\uc801\uc73c\ub85c \ud655\ub960 \uacc4\uc0b0</li> <li><code>ratio</code> \uac12\uc774 \ud5c8\uc6a9 \ud655\ub960 \uacb0\uc815 (0.0 ~ 1.0)</li> <li>\uc2dc\uac04\uacfc \ubb34\uad00\ud558\uac8c \uc77c\uc815\ud55c \ube44\uc728 \uc720\uc9c0</li> </ul>"},{"location":"ko/components/permits/#random-use-cases","title":"\uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# \ubcf4\uc218\uc801 \ubcf5\uad6c: 10%\ub9cc \ud5c8\uc6a9\ncb = CircuitBreaker(\n    name=\"conservative_api\",\n    permit=Random(ratio=0.1),\n    ...\n)\n\n# \uc801\uadf9\uc801 \ubcf5\uad6c: 80% \ud5c8\uc6a9\ncb = CircuitBreaker(\n    name=\"aggressive_api\",\n    permit=Random(ratio=0.8),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#rampup","title":"RampUp","text":"<p>\uc2dc\uac04\uc5d0 \ub530\ub77c \ud5c8\uc6a9 \ube44\uc728\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# 10%\uc5d0\uc11c \uc2dc\uc791\ud558\uc5ec 60\ucd08\uc5d0 \uac78\uccd0 80%\uae4c\uc9c0 \uc99d\uac00\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#rampup-how-it-works","title":"\ub3d9\uc791 \ubc29\uc2dd","text":"<ul> <li>HALF_OPEN \uc804\ud658 \uc2dc\uac01\ubd80\ud130 \uacbd\uacfc \uc2dc\uac04 \uce21\uc815</li> <li>\uc120\ud615\uc73c\ub85c \ud5c8\uc6a9 \ube44\uc728 \uc99d\uac00: <code>initial + (final - initial) \u00d7 (elapsed / duration)</code></li> <li><code>duration</code> \uacbd\uacfc \ud6c4\uc5d0\ub294 <code>final</code> \ube44\uc728 \uc720\uc9c0</li> </ul> <p>\uc608\uc2dc: initial=0.1, final=0.8, duration=60\ucd08</p> <ul> <li>0\ucd08: 10% \ud5c8\uc6a9</li> <li>15\ucd08: 27.5% \ud5c8\uc6a9</li> <li>30\ucd08: 45% \ud5c8\uc6a9</li> <li>45\ucd08: 62.5% \ud5c8\uc6a9</li> <li>60\ucd08 \uc774\ud6c4: 80% \ud5c8\uc6a9</li> </ul>"},{"location":"ko/components/permits/#rampup-use-cases","title":"\uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# \uc810\uc9c4\uc801 \ubcf5\uad6c\uac00 \ud544\uc694\ud55c \uc678\ubd80 API\ncb = CircuitBreaker(\n    name=\"external_api\",\n    permit=RampUp(initial=0.1, final=0.9, duration=120.0),\n    ...\n)\n\n# \ube60\ub978 \ubcf5\uad6c\uac00 \uac00\ub2a5\ud55c \ub0b4\ubd80 \uc11c\ube44\uc2a4\ncb = CircuitBreaker(\n    name=\"internal_service\",\n    permit=RampUp(initial=0.3, final=1.0, duration=30.0),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#choosing-a-permit","title":"\uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/components/permits/#comparison","title":"\ube44\uad50","text":"\ud2b9\uc131 Random RampUp \ubcf5\uc7a1\ub3c4 \ub2e8\uc21c \uc911\uac04 \ud5c8\uc6a9 \ube44\uc728 \uc77c\uc815 \uc2dc\uac04\uc5d0 \ub530\ub77c \uc99d\uac00 \ubcf5\uad6c \uc18d\ub3c4 \uc989\uc2dc \uace0\uc815 \ube44\uc728 \uc810\uc9c4\uc801 \uc99d\uac00 \ubd80\ud558 \uae09\uc99d \uac00\ub2a5 (\ub192\uc740 ratio \uc0ac\uc6a9 \uc2dc) \ucd5c\uc18c\ud654 \uc0ac\uc6a9 \uc0ac\ub840 \ub2e8\uc21c\ud55c \ud2b8\ub798\ud53d \uc81c\ud55c \uc548\uc815\uc801\uc778 \uc810\uc9c4\uc801 \ubcf5\uad6c"},{"location":"ko/components/permits/#choose-random","title":"Random\uc744 \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ub2e8\uc21c\ud55c \ud2b8\ub798\ud53d \uc81c\uc5b4 \ud544\uc694</li> <li>\uc989\uc2dc \uc77c\uc815\ud55c \ube44\uc728\ub85c \ubcf5\uad6c</li> <li>\ubd80\ud558 \uae09\uc99d\uc774 \ubb38\uc81c\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0</li> </ul> <p>\uc608\uc2dc: \ub0b4\ubd80 \uc11c\ube44\uc2a4, \ubcf5\uad6c \uc2dc\uac04\uc774 \uc911\uc694\ud55c \uacbd\uc6b0</p> <p>\uad8c\uc7a5 \uc124\uc815:</p> <pre><code># \ubcf4\uc218\uc801 (\uc548\uc815\uc131 \uc6b0\uc120)\npermit = Random(ratio=0.3)\n\n# \uade0\ud615\uc801\npermit = Random(ratio=0.5)\n\n# \uc801\uadf9\uc801 (\ube60\ub978 \ubcf5\uad6c \uc6b0\uc120)\npermit = Random(ratio=0.8)\n</code></pre>"},{"location":"ko/components/permits/#choose-rampup","title":"RampUp\uc744 \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\uc810\uc9c4\uc801\uc778 \ud2b8\ub798\ud53d \uc99d\uac00 \ud544\uc694</li> <li>\ubd80\ud558 \uae09\uc99d \ubc29\uc9c0 \uc911\uc694</li> <li>\uc678\ubd80 \uc11c\ube44\uc2a4 \ubcf4\ud638 \ud544\uc694</li> </ul> <p>\uc608\uc2dc: \uc678\ubd80 API, \ub370\uc774\ud130\ubca0\uc774\uc2a4, \ubd80\ud558\uc5d0 \ubbfc\uac10\ud55c \uc11c\ube44\uc2a4</p> <p>\uad8c\uc7a5 \uc124\uc815:</p> <pre><code># \ubcf4\uc218\uc801 \ubcf5\uad6c\npermit = RampUp(initial=0.1, final=0.5, duration=120.0)\n\n# \uade0\ud615\uc801 \ubcf5\uad6c\npermit = RampUp(initial=0.2, final=0.8, duration=60.0)\n\n# \uc801\uadf9\uc801 \ubcf5\uad6c\npermit = RampUp(initial=0.5, final=1.0, duration=30.0)\n</code></pre>"},{"location":"ko/components/permits/#relationship-with-retry","title":"Retry\uc640\uc758 \uad00\uacc4","text":"<p>Permit\uacfc Retry\ub294 \ud568\uaed8 \uc791\ub3d9\ud558\uc5ec \ubcf5\uad6c \uc804\ub7b5\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4:</p> <ul> <li>Retry: OPEN \u2192 HALF_OPEN \uc804\ud658 \uc2dc\uc810 \uacb0\uc815</li> <li>Permit: HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c \ud5c8\uc6a9 \ube44\uc728 \uacb0\uc815</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\n# \uc7ac\uc2dc\ub3c4\ub294 \uc810\uc9c4\uc801\uc73c\ub85c, \ud5c8\uc6a9\uc740 \ucc9c\ucc9c\ud788 \uc99d\uac00\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>\ub3d9\uc791 \ud750\ub984:</p> <ol> <li>Circuit\uc774 OPEN \uc0c1\ud0dc\ub85c \uc804\ud658</li> <li><code>Retry</code>\uac00 \ub300\uae30 \uc2dc\uac04 \uacb0\uc815 (\uc608: 10\ucd08)</li> <li>10\ucd08 \ud6c4 HALF_OPEN\uc73c\ub85c \uc804\ud658</li> <li><code>Permit</code>\uc774 \ud638\ucd9c \ud5c8\uc6a9 \uc5ec\ubd80 \uacb0\uc815 (\uc608: \uc2dc\uc791 10%, \uc810\uc9c4\uc801 \uc99d\uac00)</li> <li>\uc131\uacf5\ud558\uba74 CLOSED\ub85c, \uc2e4\ud328\ud558\uba74 \ub2e4\uc2dc OPEN\uc73c\ub85c</li> </ol>"},{"location":"ko/components/permits/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Listeners - Circuit \uc0c1\ud0dc \ubcc0\ud654 \ubaa8\ub2c8\ud130\ub9c1</li> <li>CircuitBreaker - \uc804\uccb4 \uc124\uc815 \ud1b5\ud569</li> </ul>"},{"location":"ko/components/retries/","title":"Retries","text":"<p>Retry\ub294 OPEN \uc0c1\ud0dc\uc5d0\uc11c HALF_OPEN \uc0c1\ud0dc\ub85c \uc804\ud658\ud560 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4.</p> Retry \ud0c0\uc785 \uc804\ud658 \uc2dc\uc810 \uc0ac\uc6a9 \uc0ac\ub840 Always \uc989\uc2dc \ube60\ub978 \ubcf5\uad6c \uc2dc\ub3c4 Never \uc804\ud658 \ubd88\uac00 \uc218\ub3d9 \ubcf5\uad6c Cooldown \uace0\uc815 \ub300\uae30 \uc2dc\uac04 \ud6c4 \uc77c\uc815 \uc2dc\uac04 \ub300\uae30 Backoff \uc9c0\uc218 \ubc31\uc624\ud504 \ubc18\ubcf5 \uc2e4\ud328 \uc2dc \ub300\uae30 \uc2dc\uac04 \uc99d\uac00"},{"location":"ko/components/retries/#always","title":"Always","text":"<p>\ub9e4 \ud638\ucd9c\ub9c8\ub2e4 \uc989\uc2dc HALF_OPEN\uc73c\ub85c \uc804\ud658\uc744 \uc2dc\ub3c4\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Always\n\n# \uc989\uc2dc \ubcf5\uad6c \uc2dc\ub3c4\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Always(),\n    ...\n)\n</code></pre>"},{"location":"ko/components/retries/#never","title":"Never","text":"<p>\uc218\ub3d9\uc73c\ub85c reset()\uc744 \ud638\ucd9c\ud560 \ub54c\uae4c\uc9c0 OPEN \uc0c1\ud0dc\ub97c \uc720\uc9c0\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Never\n\n# \uc218\ub3d9 \ubcf5\uad6c\ub9cc \ud5c8\uc6a9\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Never(),\n    ...\n)\n\n# \uc218\ub3d9 \ubcf5\uad6c\ncb.reset()\n</code></pre>"},{"location":"ko/components/retries/#cooldown","title":"Cooldown","text":"<p>\uace0\uc815\ub41c \ub300\uae30 \uc2dc\uac04 \ud6c4 HALF_OPEN\uc73c\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\n\n# 60\ucd08 \ub300\uae30 \ud6c4 \ubcf5\uad6c \uc2dc\ub3c4\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0),\n    ...\n)\n\n# jitter \ucd94\uac00\ub85c thundering herd \ubc29\uc9c0\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0, jitter_ratio=0.1),  # \u00b110% \ub79c\ub364\n    ...\n)\n</code></pre>"},{"location":"ko/components/retries/#backoff","title":"Backoff","text":"<p>\uc7ac\uc2dc\ub3c4 \ud69f\uc218\uc5d0 \ub530\ub77c \ub300\uae30 \uc2dc\uac04\uc774 \uc9c0\uc218\uc801\uc73c\ub85c \uc99d\uac00\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\n\n# 10\ucd08\ubd80\ud130 \uc2dc\uc791, 2\ubc30\uc529 \uc99d\uac00, \ucd5c\ub300 300\ucd08\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0\n    ),\n    ...\n)\n# \uc7ac\uc2dc\ub3c4 \ud69f\uc218\ubcc4 \ub300\uae30 \uc2dc\uac04:\n# 0\ud68c \u2192 10\ucd08\n# 1\ud68c \u2192 20\ucd08\n# 2\ud68c \u2192 40\ucd08\n# 3\ud68c \u2192 80\ucd08\n# 4\ud68c \u2192 160\ucd08\n# 5\ud68c \uc774\uc0c1 \u2192 300\ucd08\n\n# jitter \ucd94\uac00\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # \u00b110% \ub79c\ub364\n    ),\n    ...\n)\n</code></pre>"},{"location":"ko/components/retries/#choosing-a-retry","title":"\uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/components/retries/#comparison","title":"\ube44\uad50","text":"\ud2b9\uc131 Always Never Cooldown Backoff \ubcf5\uad6c \uc18d\ub3c4 \uc989\uc2dc \ubd88\uac00\ub2a5 \uace0\uc815 \uc2dc\uac04 \uc810\uc9c4\uc801 \uc99d\uac00 \uc11c\ube44\uc2a4 \ubd80\ud558 \ub192\uc74c \uc5c6\uc74c \uc911\uac04 \ub0ae\uc74c \ubc18\ubcf5 \uc2e4\ud328 \ub300\uc751 \uc5c6\uc74c N/A \uc5c6\uc74c \uc6b0\uc218 \uc0ac\uc6a9 \ubcf5\uc7a1\ub3c4 \ub2e8\uc21c \ub2e8\uc21c \ub2e8\uc21c \uc911\uac04"},{"location":"ko/components/retries/#choose-always","title":"Always\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\uc77c\uc2dc\uc801 \uc7a5\uc560\uac00 \ub300\ubd80\ubd84\uc778 \uacbd\uc6b0</li> <li>\ube60\ub978 \ubcf5\uad6c\uac00 \uc911\uc694\ud55c \uacbd\uc6b0</li> <li>\uc11c\ube44\uc2a4 \ubd80\ud558\uac00 \ubb38\uc81c\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0</li> </ul> <p>\uc608\uc2dc: \ub124\ud2b8\uc6cc\ud06c \uc21c\uac04 \ub2e8\uc808, \uc77c\uc2dc\uc801 DNS \uc624\ub958</p>"},{"location":"ko/components/retries/#choose-never","title":"Never\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\uc218\ub3d9 \uac1c\uc785\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</li> <li>\ubaa8\ub2c8\ud130\ub9c1 \ud6c4 \uacb0\uc815\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</li> </ul> <p>\uc608\uc2dc: \ubc30\ud3ec \uc911\ub2e8, \uc810\uac80 \uc911\uc778 \uc11c\ube44\uc2a4</p>"},{"location":"ko/components/retries/#choose-cooldown","title":"Cooldown\uc744 \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\uc608\uce21 \uac00\ub2a5\ud55c \ubcf5\uad6c \uc2dc\uac04</li> <li>\uace0\uc815\ub41c \ub300\uae30 \uc2dc\uac04\uc73c\ub85c \ucda9\ubd84\ud55c \uacbd\uc6b0</li> <li>Thundering herd \ubc29\uc9c0 \ud544\uc694 (jitter \uc0ac\uc6a9)</li> </ul> <p>\uc608\uc2dc: \uc678\ubd80 API rate limit, \uc2a4\ucf00\uc904\ub41c \uc810\uac80</p>"},{"location":"ko/components/retries/#choose-backoff","title":"Backoff\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ubc18\ubcf5 \uc2e4\ud328 \uac00\ub2a5\uc131\uc774 \ub192\uc740 \uacbd\uc6b0</li> <li>\uc11c\ube44\uc2a4 \ubd80\ud558\ub97c \uc810\uc9c4\uc801\uc73c\ub85c \uc904\uc5ec\uc57c \ud558\ub294 \uacbd\uc6b0</li> <li>\ubcf5\uad6c \uc2dc\uac04\uc744 \uc608\uce21\ud558\uae30 \uc5b4\ub824\uc6b4 \uacbd\uc6b0</li> </ul> <p>\uc608\uc2dc: \uc7a5\uc560 \ubcf5\uad6c \uc911\uc778 \uc11c\ube44\uc2a4, \uacfc\ubd80\ud558 \uc0c1\ud0dc</p>"},{"location":"ko/components/retries/#using-jitter","title":"Jitter \uc0ac\uc6a9","text":"<p>Jitter\ub97c \ucd94\uac00\ud558\uc138\uc694:</p> <ul> <li>\ub2e4\uc218\uc758 circuit breaker\uac00 \ub3d9\uc2dc\uc5d0 \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud558\ub294 \uacbd\uc6b0</li> <li>Thundering herd \ubb38\uc81c\ub97c \ubc29\uc9c0\ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0</li> </ul> <pre><code># jitter_ratio=0.1 \u2192 \u00b110% \ub79c\ub364\n# duration=60.0 \u2192 \uc2e4\uc81c \ub300\uae30: 54~66\ucd08\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\n</code></pre>"},{"location":"ko/components/retries/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Permits - HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c \ud5c8\uc6a9 \uc815\ucc45</li> <li>Trippers - Circuit \uc0c1\ud0dc \uc804\ud658 \uc870\uac74</li> </ul>"},{"location":"ko/components/trackers/","title":"Trackers","text":"<p>Tracker\ub294 \ubc1c\uc0dd\ud55c \uc608\uc678\ub97c circuit breaker\uac00 \uc2e4\ud328\ub85c \uae30\ub85d\ud560\uc9c0 \ud310\ub2e8\ud569\ub2c8\ub2e4. \ubaa8\ub4e0 \uc608\uc678\ub294 \ud638\ucd9c\uc790\uc5d0\uac8c \uc804\ud30c\ub418\uba70, \uc2e4\ud328\ub85c \uae30\ub85d\ub41c \uc608\uc678\ub9cc \uba54\ud2b8\ub9ad\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.</p> Tracker \ud0c0\uc785 \ub9e4\uce6d \ubc29\uc2dd \uc0ac\uc6a9 \uc0ac\ub840 All \ubaa8\ub4e0 \uc608\uc678 \ubaa8\ub4e0 \uc2e4\ud328 \ucd94\uc801 TypeOf \uc608\uc678 \ud0c0\uc785 \ud2b9\uc815 \uc608\uc678\ub9cc \ucd94\uc801 Custom \uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218 \ubcf5\uc7a1\ud55c \uc870\uac74"},{"location":"ko/components/trackers/#all","title":"All","text":"<p>\ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import All\n\ncb = CircuitBreaker(\n    name=\"api\",\n    tracker=All(),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#typeof","title":"TypeOf","text":"<p>\ud2b9\uc815 \ud0c0\uc785\uc758 \uc608\uc678\ub9cc \uc2e4\ud328\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\n# \ub124\ud2b8\uc6cc\ud06c \uad00\ub828 \uc608\uc678\ub9cc \ucd94\uc801\ncb = CircuitBreaker(\n    name=\"external_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#custom","title":"Custom","text":"<p>\uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218\ub85c \uc608\uc678\ub97c \ud310\ubcc4\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nimport httpx\n\n# HTTP 5xx \uc5d0\ub7ec\ub9cc \ucd94\uc801\ndef is_server_error(e: Exception) -&gt; bool:\n    return isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500\n\ncb = CircuitBreaker(\n    name=\"http_api\",\n    tracker=Custom(is_server_error),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#operators","title":"\ub17c\ub9ac \uc5f0\uc0b0\uc790","text":"<p>Tracker\ub294 \ub17c\ub9ac \uc5f0\uc0b0\uc790\ub85c \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/trackers/#and-","title":"AND (<code>&amp;</code>) - \ub450 \uc870\uac74 \ubaa8\ub450 \ub9cc\uc871","text":"<pre><code>from fluxgate.trackers import TypeOf\n\n# ConnectionError\uc774\uba74\uc11c \ud2b9\uc815 \uba54\uc2dc\uc9c0\ub97c \ud3ec\ud568\ud558\ub294 \uacbd\uc6b0\ntracker = (\n    TypeOf(ConnectionError) &amp;\n    Custom(lambda e: \"timeout\" in str(e).lower())\n)\n</code></pre>"},{"location":"ko/components/trackers/#or-","title":"OR (<code>|</code>) - \ub458 \uc911 \ud558\ub098 \ub9cc\uc871","text":"<pre><code>from fluxgate.trackers import TypeOf\n\n# ConnectionError \ub610\ub294 TimeoutError\ntracker = TypeOf(ConnectionError) | TypeOf(TimeoutError)\n\n# \ub610\ub294 \ud55c \ubc88\uc5d0 \uc9c0\uc815\ntracker = TypeOf(ConnectionError, TimeoutError)\n</code></pre>"},{"location":"ko/components/trackers/#not-","title":"NOT (<code>~</code>) - \uc870\uac74 \ubc18\uc804","text":"<pre><code>from fluxgate.trackers import Custom\nimport httpx\n\n# HTTP \uc5d0\ub7ec \uc911 4xx \uc81c\uc678 (5xx\ub9cc \ucd94\uc801)\nis_4xx = lambda e: isinstance(e, httpx.HTTPStatusError) and 400 &lt;= e.response.status_code &lt; 500\ntracker = TypeOf(httpx.HTTPStatusError) &amp; ~Custom(is_4xx)\n</code></pre>"},{"location":"ko/components/trackers/#_1","title":"\ubcf5\uc7a1\ud55c \uc870\ud569","text":"<pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# (\ub124\ud2b8\uc6cc\ud06c \uc5d0\ub7ec \ub610\ub294 5xx \uc5d0\ub7ec) \uadf8\ub9ac\uace0 \uc7ac\uc2dc\ub3c4 \uac00\ub2a5\nnetwork_errors = TypeOf(ConnectionError, TimeoutError)\nserver_errors = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\nnot_auth_error = ~Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 401)\n\ntracker = (network_errors | server_errors) &amp; not_auth_error\n</code></pre>"},{"location":"ko/components/trackers/#choosing-a-tracker","title":"\uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/components/trackers/#comparison","title":"\ube44\uad50","text":"\ud2b9\uc131 All TypeOf Custom \uac04\uacb0\uc131 \uac00\uc7a5 \ub2e8\uc21c \ub2e8\uc21c \ud568\uc218 \uc791\uc131 \ud544\uc694 \uc720\uc5f0\uc131 \ub0ae\uc74c \uc911\uac04 \ub192\uc74c \uc131\ub2a5 O(1) O(1) \ud568\uc218\uc5d0 \ub530\ub77c \ub2e4\ub984 \uc0ac\uc6a9 \uc0ac\ub840 \ubaa8\ub4e0 \uc2e4\ud328 \ucd94\uc801 \ud0c0\uc785\ubcc4 \ucd94\uc801 \ubcf5\uc7a1\ud55c \uc870\uac74"},{"location":"ko/components/trackers/#choose-all","title":"All\uc744 \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \uac04\uc8fc</li> <li>\ub2e8\uc21c\ud55c \uc5d0\ub7ec \ud578\ub4e4\ub9c1</li> <li>\ud2b9\uc815 \uc608\uc678\ub9cc \uc81c\uc678\ud558\uace0 \uc2f6\uc744 \ub54c (\ub17c\ub9ac \uc5f0\uc0b0\uc790 \uc870\ud569)</li> </ul> <p>\uc608\uc2dc: \ub2e8\uc21c\ud55c \ub0b4\ubd80 \uc11c\ube44\uc2a4, \ubaa8\ub4e0 \uc5d0\ub7ec\uac00 \uc911\uc694\ud55c \uacbd\uc6b0</p>"},{"location":"ko/components/trackers/#choose-typeof","title":"TypeOf\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ud2b9\uc815 \ud0c0\uc785\uc758 \uc608\uc678\ub9cc \ucd94\uc801</li> <li>\ub124\ud2b8\uc6cc\ud06c, \ud0c0\uc784\uc544\uc6c3 \ub4f1 \uc608\uce21 \uac00\ub2a5\ud55c \uc5d0\ub7ec</li> <li>\ud0c0\uc785\uc73c\ub85c \ubd84\ub958 \uac00\ub2a5\ud55c \uc2e4\ud328</li> </ul> <p>\uc608\uc2dc: \uc678\ubd80 API \ud638\ucd9c, \ub124\ud2b8\uc6cc\ud06c \uc758\uc874 \uc11c\ube44\uc2a4</p>"},{"location":"ko/components/trackers/#choose-custom","title":"Custom\uc744 \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>HTTP \uc0c1\ud0dc \ucf54\ub4dc \uae30\ubc18 \ud310\ubcc4</li> <li>\uc608\uc678 \uba54\uc2dc\uc9c0\ub098 \uc18d\uc131 \uac80\uc0ac</li> <li>\ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1</li> </ul> <p>\uc608\uc2dc: HTTP API, \uc870\uac74\ubd80 \uc7ac\uc2dc\ub3c4, \uc138\ubc00\ud55c \uc5d0\ub7ec \ubd84\ub958</p>"},{"location":"ko/components/trackers/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Trippers - Tracker\uac00 \uc218\uc9d1\ud55c \uba54\ud2b8\ub9ad\uc744 \uae30\ubc18\uc73c\ub85c circuit \uc81c\uc5b4</li> <li>Windows - \uc2e4\ud328 \ucd94\uc801 \ubc29\uc2dd \uacb0\uc815</li> </ul>"},{"location":"ko/components/trippers/","title":"Trippers","text":"<p>Tripper\ub294 Window\uac00 \uc218\uc9d1\ud55c \uba54\ud2b8\ub9ad\uc744 \ud3c9\uac00\ud558\uc5ec circuit \uc0c1\ud0dc \uc804\ud658 \uc5ec\ubd80\ub97c \ud310\ub2e8\ud569\ub2c8\ub2e4. \uc5ec\ub7ec \uc870\uac74\uc744 \ub17c\ub9ac \uc5f0\uc0b0\uc790(<code>&amp;</code>, <code>|</code>)\ub85c \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> Tripper \ud0c0\uc785 \uc870\uac74 \uc0ac\uc6a9 \uc0ac\ub840 Closed CLOSED \uc0c1\ud0dc\uc77c \ub54c \uc0c1\ud0dc\ubcc4 \uc870\uac74 \ubd84\uae30 HalfOpened HALF_OPEN \uc0c1\ud0dc\uc77c \ub54c \uc0c1\ud0dc\ubcc4 \uc870\uac74 \ubd84\uae30 MinRequests \ucd5c\uc18c \ud638\ucd9c \uc218 \ucda9\uc871 \uc0d8\ud50c \ud06c\uae30 \ubcf4\uc7a5 FailureRate \uc2e4\ud328\uc728 \uc784\uacc4\uac12 \ucd08\uacfc \uc5d0\ub7ec\uc728 \uae30\ubc18 \ucc28\ub2e8 AvgLatency \ud3c9\uade0 \uc9c0\uc5f0\uc2dc\uac04 \ucd08\uacfc \uc131\ub2a5 \uae30\ubc18 \ucc28\ub2e8 SlowRate \ub290\ub9b0 \ud638\ucd9c \ube44\uc728 \ucd08\uacfc \ub290\ub9b0 \uc751\ub2f5 \uae30\ubc18 \ucc28\ub2e8"},{"location":"ko/components/trippers/#closed","title":"Closed","text":"<p>CLOSED \uc0c1\ud0dc\uc77c \ub54c\ub9cc true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import Closed, FailureRate\n\n# CLOSED \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc2e4\ud328\uc728 \uac80\uc0ac\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=Closed() &amp; FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#halfopened","title":"HalfOpened","text":"<p>HALF_OPEN \uc0c1\ud0dc\uc77c \ub54c\ub9cc true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import HalfOpened, FailureRate\n\n# HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c\ub294 \ub354 \uc5c4\uaca9\ud55c \uae30\uc900 \uc801\uc6a9\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=HalfOpened() &amp; FailureRate(0.3),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#minrequests","title":"MinRequests","text":"<p>\ucd5c\uc18c \ud638\ucd9c \uc218\ub97c \ucda9\uc871\ud560 \ub54c\ub9cc true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\n\n# \ucd5c\uc18c 10\uac1c \ud638\ucd9c \ud6c4 \uc2e4\ud328\uc728 \uac80\uc0ac\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#failurerate","title":"FailureRate","text":"<p>\uc2e4\ud328\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud560 \ub54c true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import FailureRate\n\n# \uc2e4\ud328\uc728 50% \ucd08\uacfc \uc2dc circuit \uc5f4\uae30\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=FailureRate(0.5),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#avglatency","title":"AvgLatency","text":"<p>\ud3c9\uade0 \uc9c0\uc5f0\uc2dc\uac04\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud560 \ub54c true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import AvgLatency\n\n# \ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04 2\ucd08 \ucd08\uacfc \uc2dc circuit \uc5f4\uae30\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=AvgLatency(2.0),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#slowrate","title":"SlowRate","text":"<p>\ub290\ub9b0 \ud638\ucd9c \ube44\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud560 \ub54c true\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <p>Warning</p> <p><code>SlowRate</code>\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 CircuitBreaker\uc758 <code>slow_threshold</code> \ud30c\ub77c\ubbf8\ud130\ub97c \ubc18\ub4dc\uc2dc \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774 \uac12\ubcf4\ub2e4 \uc624\ub798 \uac78\ub9ac\ub294 \ud638\ucd9c\uc774 \"\ub290\ub9b0 \ud638\ucd9c\"\ub85c \uac04\uc8fc\ub429\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 <code>inf</code>(\ubb34\ud55c\ub300)\uc774\ubbc0\ub85c, \uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \ubaa8\ub4e0 \ud638\ucd9c\uc774 \"\ube60\ub978 \ud638\ucd9c\"\ub85c \uac04\uc8fc\ub418\uc5b4 SlowRate\uac00 \ud56d\uc0c1 0%\uac00 \ub429\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import SlowRate\n\n# \ub290\ub9b0 \ud638\ucd9c 30% \ucd08\uacfc \uc2dc circuit \uc5f4\uae30\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=SlowRate(0.3),\n    slow_threshold=1.0,  # 1\ucd08 \uc774\uc0c1\uc744 \ub290\ub9b0 \ud638\ucd9c\ub85c \uac04\uc8fc\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#operators","title":"\ub17c\ub9ac \uc5f0\uc0b0\uc790","text":"<p>Tripper\ub294 \ub17c\ub9ac \uc5f0\uc0b0\uc790\ub85c \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/trippers/#and-","title":"AND (<code>&amp;</code>) - \ubaa8\ub4e0 \uc870\uac74 \ub9cc\uc871","text":"<pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# \ucd5c\uc18c 10\uac1c \ud638\ucd9c AND \uc2e4\ud328\uc728 50% \uc774\uc0c1\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#or-","title":"OR (<code>|</code>) - \uc870\uac74 \uc911 \ud558\ub098 \ub9cc\uc871","text":"<pre><code>from fluxgate.trippers import FailureRate, SlowRate\n\n# \uc2e4\ud328\uc728 50% \uc774\uc0c1 OR \ub290\ub9b0 \ud638\ucd9c 30% \uc774\uc0c1\ntripper = FailureRate(0.5) | SlowRate(0.3)\n</code></pre>"},{"location":"ko/components/trippers/#_1","title":"\ubcf5\uc7a1\ud55c \uc870\ud569","text":"<pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# CLOSED: \ucd5c\uc18c 10\uac1c \ud638\ucd9c \ud6c4 \uc2e4\ud328\uc728 50%\n# HALF_OPEN: \ucd5c\uc18c 5\uac1c \ud638\ucd9c \ud6c4 \uc2e4\ud328\uc728 30%\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"ko/components/trippers/#choosing-a-tripper","title":"\uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/components/trippers/#comparison","title":"\ube44\uad50","text":"\ud2b9\uc131 Closed/HalfOpened MinRequests FailureRate AvgLatency SlowRate \ubaa9\uc801 \uc0c1\ud0dc\ubcc4 \uc870\uac74 \ubd84\uae30 \uc0d8\ud50c \ud06c\uae30 \ubcf4\uc7a5 \uc5d0\ub7ec\uc728 \uac80\uc0ac \ud3c9\uade0 \uc131\ub2a5 \uac80\uc0ac \ub290\ub9b0 \ud638\ucd9c \uac80\uc0ac \ub2e8\ub3c5 \uc0ac\uc6a9 \ubd88\uac00\ub2a5 \ubd88\uac00\ub2a5 \uac00\ub2a5 \uac00\ub2a5 \uac00\ub2a5 \uc77c\ubc18\uc801 \uc870\ud569 \ub2e4\ub978 Tripper\uc640 AND \ub2e4\ub978 Tripper\uc640 AND MinRequests\uc640 AND MinRequests\uc640 AND MinRequests\uc640 AND"},{"location":"ko/components/trippers/#use-minrequests","title":"MinRequests\ub97c \uc0ac\uc6a9\ud558\uc138\uc694","text":"<p>\uad8c\uc7a5 \uc0ac\ud56d</p> <ul> <li>\uac70\uc758 \ubaa8\ub4e0 Tripper \uc870\ud569\uc5d0 \ud3ec\ud568</li> <li>\uc0d8\ud50c \ud06c\uae30\uac00 \uc791\uc744 \ub54c \uc624\ud310 \ubc29\uc9c0</li> <li>Window size\uc758 10-20% \uc815\ub3c4\uac00 \uc801\ub2f9</li> </ul> <p>\uc608\uc2dc:</p> <pre><code># Window size 100\uac1c, MinRequests 10\uac1c\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#rate-vs-latency","title":"FailureRate vs AvgLatency vs SlowRate","text":"<p>FailureRate\ub97c \uc120\ud0dd\ud558\uc138\uc694:</p> <ul> <li>\uc5d0\ub7ec \ubc1c\uc0dd \uc5ec\ubd80\uac00 \uc911\uc694\ud55c \uacbd\uc6b0</li> <li>\uba85\ud655\ud55c \uc2e4\ud328 \uae30\uc900\uc774 \uc788\ub294 \uacbd\uc6b0</li> </ul> <p>AvgLatency\ub97c \uc120\ud0dd\ud558\uc138\uc694:</p> <ul> <li>\uc804\uccb4 \uc751\ub2f5 \uc2dc\uac04 \uc131\ub2a5\uc774 \uc911\uc694\ud55c \uacbd\uc6b0</li> <li>\ud3c9\uade0\uc801\uc778 \uc9c0\uc5f0\uc774 \ubb38\uc81c\uc778 \uacbd\uc6b0</li> </ul> <p>SlowRate\ub97c \uc120\ud0dd\ud558\uc138\uc694:</p> <ul> <li>\ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728\uc774 \uc911\uc694\ud55c \uacbd\uc6b0</li> <li>\ud2b9\uc815 \uc784\uacc4\uac12(slow_threshold) \ucd08\uacfc \ube44\uc728\uc744 \uc81c\uc5b4\ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0</li> </ul>"},{"location":"ko/components/trippers/#combining-conditions","title":"\uc5ec\ub7ec \uc870\uac74 \uc870\ud569\ud558\uae30","text":"<pre><code>from fluxgate.trippers import MinRequests, FailureRate, SlowRate\n\n# \uc2e4\ud328\uc728 OR \ub290\ub9b0 \ud638\ucd9c \ube44\uc728\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"ko/components/trippers/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Retries - Circuit\uc774 \uc5f4\ub838\uc744 \ub54c \uc7ac\uc2dc\ub3c4 \uc815\ucc45</li> <li>Permits - HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c \ud5c8\uc6a9 \uc815\ucc45</li> </ul>"},{"location":"ko/components/windows/","title":"Windows","text":"<p>Window\ub294 \ucd5c\uadfc \ud638\ucd9c\uc758 \uc131\uacf5/\uc2e4\ud328, \uc751\ub2f5 \uc2dc\uac04 \ub4f1\uc744 \ucd94\uc801\ud558\uc5ec tripper\uac00 circuit \uc0c1\ud0dc\ub97c \uacb0\uc815\ud560 \uc218 \uc788\ub3c4\ub85d \uba54\ud2b8\ub9ad\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> Window \ud0c0\uc785 \ucd94\uc801 \ubc29\uc2dd \uc0ac\uc6a9 \uc0ac\ub840 CountWindow \ucd5c\uadfc N\uac1c \ud638\ucd9c \uace0\uc815\ub41c \ud638\ucd9c \uc218 \uae30\ubc18 \ud3c9\uac00 TimeWindow \ucd5c\uadfc N\ucd08 \uc2dc\uac04 \uae30\ubc18 \ud3c9\uac00, \ud2b8\ub798\ud53d \ubcc0\ub3d9 \ub300\uc751"},{"location":"ko/components/windows/#countwindow","title":"CountWindow","text":"<p>\uace0\uc815\ub41c \uac1c\uc218\uc758 \ucd5c\uadfc \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#countwindow-basic","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from fluxgate.windows import CountWindow\n\n# \ucd5c\uadfc 100\uac1c \ud638\ucd9c \ucd94\uc801\nwindow = CountWindow(size=100)\n</code></pre>"},{"location":"ko/components/windows/#countwindow-how-it-works","title":"\ub3d9\uc791 \ubc29\uc2dd","text":"<ul> <li>\ucd5c\uadfc N\uac1c \ud638\ucd9c\ub9cc \uba54\ubaa8\ub9ac\uc5d0 \uc720\uc9c0</li> <li>\uc708\ub3c4\uc6b0\uac00 \uac00\ub4dd \ucc28\uba74 \uac00\uc7a5 \uc624\ub798\ub41c \uae30\ub85d \uc81c\uac70</li> <li>\ud638\ucd9c \uc218\uac00 \uc801\uc744 \ub54c\ub3c4 \uc77c\uad00\ub41c \ud3c9\uac00 \uac00\ub2a5</li> </ul>"},{"location":"ko/components/windows/#countwindow-use-cases","title":"\uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\n\n# \uc548\uc815\uc801\uc778 \ud2b8\ub798\ud53d \ud328\ud134\uc744 \uac00\uc9c4 API\ncb = CircuitBreaker(\n    name=\"stable_api\",\n    window=CountWindow(size=100),  # \ucd5c\uadfc 100\uac1c \ud638\ucd9c \ud3c9\uac00\n    ...\n)\n</code></pre>"},{"location":"ko/components/windows/#timewindow","title":"TimeWindow","text":"<p>\uc2dc\uac04 \uae30\ubc18\uc73c\ub85c \ucd5c\uadfc N\ucd08\uc758 \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#timewindow-basic","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from fluxgate.windows import TimeWindow\n\n# \ucd5c\uadfc 60\ucd08 \ucd94\uc801\nwindow = TimeWindow(size=60)\n</code></pre>"},{"location":"ko/components/windows/#timewindow-how-it-works","title":"\ub3d9\uc791 \ubc29\uc2dd","text":"<ul> <li>\uc2dc\uac04\uc744 1\ucd08 \ub2e8\uc704 \ubc84\ud0b7\uc73c\ub85c \ubd84\ud560</li> <li>\uac01 \ubc84\ud0b7\uc740 \ud574\ub2f9 \ucd08\uc758 \ubaa8\ub4e0 \ud638\ucd9c \uc9d1\uacc4</li> <li>\uc624\ub798\ub41c \ubc84\ud0b7\uc740 \uc790\ub3d9\uc73c\ub85c \ub9cc\ub8cc\ub418\uace0 \uc7ac\uc0ac\uc6a9</li> </ul>"},{"location":"ko/components/windows/#timewindow-use-cases","title":"\uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\n\n# \ud2b8\ub798\ud53d \ubcc0\ub3d9\uc774 \ud070 API\ncb = CircuitBreaker(\n    name=\"variable_traffic_api\",\n    window=TimeWindow(size=60),  # \ucd5c\uadfc 60\ucd08 \ud3c9\uac00\n    ...\n)\n</code></pre>"},{"location":"ko/components/windows/#choosing-a-window","title":"\uc120\ud0dd \uac00\uc774\ub4dc","text":""},{"location":"ko/components/windows/#comparison","title":"\ube44\uad50","text":"\ud2b9\uc131 CountWindow TimeWindow \ucd94\uc801 \ubc29\uc2dd \ucd5c\uadfc N\uac1c \ud638\ucd9c \ucd5c\uadfc N\ucd08 \uba54\ubaa8\ub9ac \uc0ac\uc6a9 \uc815\ud655\ud788 N\uac1c \uae30\ub85d N\uac1c \ubc84\ud0b7 (1\ucd08 \ub2e8\uc704) \ud2b8\ub798\ud53d \uae09\uc99d \uc624\ub798\ub41c \ub370\uc774\ud130\uac00 \ube60\ub974\uac8c \ubc00\ub824\ub0a8 \uc77c\uc815 \uc2dc\uac04 \ub370\uc774\ud130 \uc720\uc9c0 \ub0ae\uc740 \ud2b8\ub798\ud53d \ube60\ub974\uac8c \uba54\ud2b8\ub9ad \uc218\uc9d1 \ub370\uc774\ud130 \uc218\uc9d1 \ub290\ub9bc \ud3c9\uac00 \ubc94\uc704 \ud2b8\ub798\ud53d \ud328\ud134\uc5d0 \ub530\ub77c \ubcc0\ub3d9 \ud56d\uc0c1 \uc77c\uc815 (N\ucd08) \uc624\ubc84\ud5e4\ub4dc \ub0ae\uc74c \uc57d\uac04 \ub192\uc74c"},{"location":"ko/components/windows/#choose-countwindow","title":"CountWindow\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ud2b8\ub798\ud53d\uc774 \uc548\uc815\uc801\uc774\uace0 \uc608\uce21 \uac00\ub2a5</li> <li>\uba54\ubaa8\ub9ac \ud6a8\uc728\uc774 \uc911\uc694</li> <li>\ube60\ub978 \uba54\ud2b8\ub9ad \uc218\uc9d1 \ud544\uc694</li> </ul> <p>\uc608\uc2dc: \ub0b4\ubd80 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uac04 \ud1b5\uc2e0, \ubc30\uce58 \uc791\uc5c5</p>"},{"location":"ko/components/windows/#choose-timewindow","title":"TimeWindow\ub97c \uc120\ud0dd\ud558\uc138\uc694","text":"<p>\uc801\ud569\ud55c \uacbd\uc6b0:</p> <ul> <li>\ud2b8\ub798\ud53d \ud328\ud134\uc774 \ubd88\uaddc\uce59</li> <li>\uc2dc\uac04 \uae30\ubc18 \uc815\ucc45 \ud544\uc694</li> <li>\uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1 \uc911\uc694</li> </ul> <p>\uc608\uc2dc: \uacf5\uac1c API, \uc0ac\uc6a9\uc790 \ub300\uba74 \uc11c\ube44\uc2a4, \uc678\ubd80 \uc11c\ube44\uc2a4 \ud638\ucd9c</p>"},{"location":"ko/components/windows/#metrics","title":"\uba54\ud2b8\ub9ad \uacc4\uc0b0","text":"<p>\ub450 window \ud0c0\uc785 \ubaa8\ub450 \ub3d9\uc77c\ud55c \uba54\ud2b8\ub9ad\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <pre><code>from fluxgate.windows import CountWindow\nfrom fluxgate.metric import Record\n\nwindow = CountWindow(size=100)\n\n# \ud638\ucd9c \uae30\ub85d\nwindow.record(Record(success=True, duration=0.5, timestamp=1234567890.0))\nwindow.record(Record(success=False, duration=1.2, timestamp=1234567891.0))\n\n# \uba54\ud2b8\ub9ad \uc870\ud68c\nmetric = window.get_metric()\nprint(f\"Total calls: {metric.total_count}\")\nprint(f\"Failed calls: {metric.failure_count}\")\nprint(f\"Average duration: {metric.avg_duration}\")\n</code></pre> <p>\uc81c\uacf5 \uba54\ud2b8\ub9ad:</p> <ul> <li><code>total_count</code> - \ucd1d \ud638\ucd9c \uc218</li> <li><code>failure_count</code> - \uc2e4\ud328 \ud638\ucd9c \uc218</li> <li><code>total_duration</code> - \ucd1d \uc751\ub2f5 \uc2dc\uac04</li> <li><code>slow_count</code> - \ub290\ub9b0 \ud638\ucd9c \uc218</li> <li><code>avg_duration</code> - \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04 (property)</li> <li><code>failure_rate</code> - \uc2e4\ud328\uc728 (property)</li> <li><code>slow_rate</code> - \ub290\ub9b0 \ud638\ucd9c \ube44\uc728 (property)</li> </ul>"},{"location":"ko/components/windows/#auto-reset","title":"\ucd08\uae30\ud654","text":"<p>Window\ub294 circuit breaker\uc758 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub420 \ub54c \ucd08\uae30\ud654\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#performance","title":"\uc131\ub2a5 \uace0\ub824\uc0ac\ud56d","text":"\uc5f0\uc0b0 CountWindow TimeWindow \uba54\ubaa8\ub9ac O(N) - N\uac1c \uae30\ub85d O(N) - N\uac1c \ubc84\ud0b7 (1\ucd08) record() O(1) O(1) get_metric() O(1) O(1) <p>\ub450 \uad6c\ud604 \ubaa8\ub450 \ud6a8\uc728\uc801\uc774\uba70 \ub300\ubd80\ubd84\uc758 \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c \ubb34\uc2dc\ud560 \uc218 \uc788\ub294 \uc624\ubc84\ud5e4\ub4dc\ub97c \uac00\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Trackers - \uc5b4\ub5a4 \uc608\uc678\ub97c \ucd94\uc801\ud560\uc9c0 \uc815\uc758</li> <li>Trippers - Window \uba54\ud2b8\ub9ad\uc744 \uae30\ubc18\uc73c\ub85c circuit \uc81c\uc5b4</li> </ul>"},{"location":"ko/components/listeners/","title":"Listeners","text":"<p>Listener\ub294 Circuit Breaker\uc758 \uc0c1\ud0dc \uc804\ud658\uc744 \uac10\uc9c0\ud558\uace0 \uc678\ubd80 \uc2dc\uc2a4\ud15c\uc5d0 \uc54c\ub9bc\uc744 \ubcf4\ub0c5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(\n    name=\"api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n    ],\n)\n</code></pre>"},{"location":"ko/components/listeners/#signal","title":"Signal","text":"<p>\ub9ac\uc2a4\ub108\ub294 \uc0c1\ud0dc \uc804\ud658 \uc2dc <code>Signal</code> \uac1d\uccb4\ub97c \ubc1b\uc2b5\ub2c8\ub2e4:</p> <pre><code>@dataclass(frozen=True)\nclass Signal:\n    circuit_name: str     # Circuit Breaker \uc774\ub984\n    old_state: StateEnum  # \uc774\uc804 \uc0c1\ud0dc\n    new_state: StateEnum  # \uc0c8\ub85c\uc6b4 \uc0c1\ud0dc\n    timestamp: float      # \uc804\ud658 \uc2dc\uac01 (Unix timestamp)\n</code></pre>"},{"location":"ko/components/listeners/#sync-vs-async","title":"\ub3d9\uae30 vs \ube44\ub3d9\uae30","text":""},{"location":"ko/components/listeners/#ilistener","title":"\ub3d9\uae30 \ub9ac\uc2a4\ub108 (IListener)","text":"<p><code>CircuitBreaker</code>\uc640 <code>AsyncCircuitBreaker</code> \ubaa8\ub450\uc5d0\uc11c \uc0ac\uc6a9 \uac00\ub2a5:</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        print(f\"{signal.circuit_name}: {signal.old_state} \u2192 {signal.new_state}\")\n</code></pre> <p>\uc8fc\uc758: <code>AsyncCircuitBreaker</code>\uc5d0\uc11c \ub3d9\uae30 \ub9ac\uc2a4\ub108 \uc0ac\uc6a9 \uc2dc, \ube14\ub85c\ud0b9 I/O \uc791\uc5c5(\ub124\ud2b8\uc6cc\ud06c \ud638\ucd9c, \ud30c\uc77c \uc4f0\uae30 \ub4f1)\uc774 \uc788\ub2e4\uba74 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \ub9c9\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ube14\ub85c\ud0b9 \uc791\uc5c5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 <code>IAsyncListener</code>\ub97c \uc0ac\uc6a9\ud558\uc138\uc694.</p>"},{"location":"ko/components/listeners/#iasynclistener","title":"\ube44\ub3d9\uae30 \ub9ac\uc2a4\ub108 (IAsyncListener)","text":"<p><code>AsyncCircuitBreaker</code>\uc5d0\uc11c\ub9cc \uc0ac\uc6a9 \uac00\ub2a5:</p> <pre><code>from fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass CustomAsyncListener(IAsyncListener):\n    async def __call__(self, signal: Signal) -&gt; None:\n        await send_notification(signal)\n</code></pre>"},{"location":"ko/components/listeners/#available-listeners","title":"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub9ac\uc2a4\ub108","text":""},{"location":"ko/components/listeners/#loglistener","title":"LogListener","text":"<p>\ud45c\uc900 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 <code>logging</code> \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c1\ud0dc \uc804\ud658\uc744 \ub85c\uae45\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.listeners.log import LogListener\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"ko/components/listeners/#prometheuslistener","title":"PrometheusListener","text":"<p>Prometheus \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1\ud558\uc5ec \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uacfc \uc5f0\ub3d9\ud569\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre> <pre><code>from fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(..., listeners=[PrometheusListener()])\n</code></pre>"},{"location":"ko/components/listeners/#slacklistener-asyncslacklistener","title":"SlackListener / AsyncSlackListener","text":"<p>Slack \ucc44\ub110\uc5d0 \uc0c1\ud0dc \uc804\ud658 \uc54c\ub9bc\uc744 \uc804\uc1a1\ud569\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[slack]\n</code></pre> <pre><code>from fluxgate.listeners.slack import SlackListener, AsyncSlackListener\n\n# \ub3d9\uae30\nsync_cb = CircuitBreaker(..., listeners=[\n    SlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n\n# \ube44\ub3d9\uae30\nasync_cb = AsyncCircuitBreaker(..., listeners=[\n    AsyncSlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n</code></pre>"},{"location":"ko/components/listeners/#custom-listeners","title":"\ucee4\uc2a4\ud140 \ub9ac\uc2a4\ub108","text":""},{"location":"ko/components/listeners/#_1","title":"\ub3d9\uae30 \ub9ac\uc2a4\ub108","text":"<pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass DatabaseListener(IListener):\n    def __init__(self, db_connection):\n        self.db = db_connection\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self.db.execute(\n                \"INSERT INTO circuit_events (name, timestamp) VALUES (?, ?)\",\n                (signal.circuit_name, signal.timestamp)\n            )\n</code></pre>"},{"location":"ko/components/listeners/#_2","title":"\ube44\ub3d9\uae30 \ub9ac\uc2a4\ub108","text":"<pre><code>import httpx\nfrom fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass WebhookListener(IAsyncListener):\n    def __init__(self, webhook_url: str):\n        self.url = webhook_url\n        self.client = httpx.AsyncClient()\n\n    async def __call__(self, signal: Signal) -&gt; None:\n        payload = {\n            \"circuit\": signal.circuit_name,\n            \"transition\": f\"{signal.old_state.value} \u2192 {signal.new_state.value}\",\n            \"timestamp\": signal.timestamp,\n        }\n        await self.client.post(self.url, json=payload)\n</code></pre>"},{"location":"ko/components/listeners/#error-handling","title":"\uc5d0\ub7ec \ucc98\ub9ac","text":"<p>\ub9ac\uc2a4\ub108\uc5d0\uc11c \uc608\uc678\uac00 \ubc1c\uc0dd\ud574\ub3c4 Circuit Breaker\uc758 \ub3d9\uc791\uc5d0\ub294 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc608\uc678\ub294 \uc790\ub3d9\uc73c\ub85c \ub85c\uae45\ub418\uba70, Circuit Breaker\ub294 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\uc744 \uacc4\uc18d\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/#combining-listeners","title":"\uc5ec\ub7ec \ub9ac\uc2a4\ub108 \uc870\ud569","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\nfrom fluxgate.listeners.slack import SlackListener\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n        SlackListener(channel=\"C1234567890\", token=\"xoxb-...\"),\n    ],\n)\n</code></pre>"},{"location":"ko/components/listeners/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>LogListener - \ub85c\uae45 \uc124\uc815</li> <li>PrometheusListener - Prometheus \uc5f0\ub3d9</li> <li>SlackListener - Slack \uc54c\ub9bc \uc124\uc815</li> </ul>"},{"location":"ko/components/listeners/logging/","title":"LogListener","text":"<p>Python \ud45c\uc900 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 <code>logging</code> \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uc5ec Circuit Breaker\uc758 \uc0c1\ud0dc \uc804\ud658\uc744 \ub85c\uae45\ud558\ub294 \ub9ac\uc2a4\ub108\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/logging/#usage","title":"\uc0ac\uc6a9\ubc95","text":""},{"location":"ko/components/listeners/logging/#circuit-breaker","title":"\ub3d9\uae30 Circuit Breaker","text":"<pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(levelname)s - %(message)s'\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre> <p>\ucd9c\ub825 \uc608\uc2dc:</p> <pre><code>[2025-01-15 10:30:45] Circuit Breaker 'payment_api' transitioned from CLOSED to OPEN\n[2025-01-15 10:31:45] Circuit Breaker 'payment_api' transitioned from OPEN to HALF_OPEN\n[2025-01-15 10:31:50] Circuit Breaker 'payment_api' transitioned from HALF_OPEN to CLOSED\n</code></pre>"},{"location":"ko/components/listeners/logging/#circuit-breaker_1","title":"\ube44\ub3d9\uae30 Circuit Breaker","text":"<pre><code>import logging\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\nlogging.basicConfig(level=logging.INFO)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre>"},{"location":"ko/components/listeners/logging/#custom-log-level","title":"\ucee4\uc2a4\ud140 \ub85c\uadf8 \ub808\ubca8","text":"<p>\ub2e4\ub978 \ub85c\uadf8 \ub808\ubca8\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \ucee4\uc2a4\ud140 \ub9ac\uc2a4\ub108\ub97c \uc791\uc131\ud558\uc138\uc694:</p> <pre><code>import logging\nimport time\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass WarningLogListener(IListener):\n    \"\"\"OPEN \uc0c1\ud0dc \uc804\ud658\ub9cc WARNING \ub808\ubca8\ub85c \ub85c\uae45\"\"\"\n\n    def __call__(self, signal: Signal) -&gt; None:\n        timestamp = time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(signal.timestamp))\n        message = (\n            f\"[{timestamp}] Circuit Breaker '{signal.circuit_name}' \"\n            f\"transitioned from {signal.old_state.value} to {signal.new_state.value}\"\n        )\n\n        if signal.new_state == StateEnum.OPEN:\n            logging.warning(message)\n        else:\n            logging.info(message)\n</code></pre>"},{"location":"ko/components/listeners/logging/#structured-logging","title":"\uad6c\uc870\ud654\ub41c \ub85c\uae45","text":"<p>JSON \ud615\ud0dc\ub85c \ub85c\uae45:</p> <pre><code>import json\nimport logging\nimport time\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass JsonLogListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        log_data = {\n            \"event\": \"circuit_breaker_transition\",\n            \"circuit_name\": signal.circuit_name,\n            \"old_state\": signal.old_state.value,\n            \"new_state\": signal.new_state.value,\n            \"timestamp\": signal.timestamp,\n        }\n        logging.info(json.dumps(log_data))\n</code></pre>"},{"location":"ko/components/listeners/logging/#file-logging","title":"\ud30c\uc77c \ub85c\uae45","text":"<pre><code>import logging\nfrom logging.handlers import RotatingFileHandler\nfrom fluxgate.listeners.log import LogListener\n\nhandler = RotatingFileHandler(\n    'circuit_breaker.log',\n    maxBytes=10*1024*1024,  # 10MB\n    backupCount=5\n)\nhandler.setFormatter(logging.Formatter(\n    '%(asctime)s - %(levelname)s - %(message)s'\n))\n\nlogger = logging.getLogger()\nlogger.addHandler(handler)\nlogger.setLevel(logging.INFO)\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"ko/components/listeners/logging/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>PrometheusListener - \uba54\ud2b8\ub9ad \uae30\ubc18 \ubaa8\ub2c8\ud130\ub9c1</li> <li>SlackListener - \uc2e4\uc2dc\uac04 \uc54c\ub9bc</li> <li>Overview - \ub9ac\uc2a4\ub108 \uac1c\uc694\ub85c \ub3cc\uc544\uac00\uae30</li> </ul>"},{"location":"ko/components/listeners/prometheus/","title":"PrometheusListener","text":"<p>Prometheus \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1\ud558\uc5ec Circuit Breaker\uc758 \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ub9ac\uc2a4\ub108\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/prometheus/#installation","title":"\uc124\uce58","text":"<pre><code>pip install fluxgate[prometheus]\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#metrics","title":"\uba54\ud2b8\ub9ad","text":""},{"location":"ko/components/listeners/prometheus/#circuit_breaker_state-gauge","title":"circuit_breaker_state (Gauge)","text":"<p>\ud604\uc7ac Circuit Breaker\uc758 \uc0c1\ud0dc\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: Circuit Breaker \uc774\ub984</li> <li><code>state</code>: \uc0c1\ud0dc\uac12 (<code>closed</code>, <code>open</code>, <code>half_open</code>, <code>metrics_only</code>, <code>disabled</code>, <code>forced_open</code>)</li> </ul> <p>\uac12: <code>1</code> (\ud604\uc7ac \uc0c1\ud0dc) / <code>0</code> (\ud604\uc7ac \uc0c1\ud0dc \uc544\ub2d8)</p>"},{"location":"ko/components/listeners/prometheus/#circuit_breaker_state_transition-counter","title":"circuit_breaker_state_transition (Counter)","text":"<p>\uc0c1\ud0dc \uc804\ud658 \ud69f\uc218\ub97c \uce74\uc6b4\ud305\ud569\ub2c8\ub2e4.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: Circuit Breaker \uc774\ub984</li> <li><code>old_state</code>: \uc774\uc804 \uc0c1\ud0dc</li> <li><code>new_state</code>: \uc0c8 \uc0c1\ud0dc</li> </ul>"},{"location":"ko/components/listeners/prometheus/#usage","title":"\uc0ac\uc6a9\ubc95","text":""},{"location":"ko/components/listeners/prometheus/#circuit-breaker","title":"\ub3d9\uae30 Circuit Breaker","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Prometheus \uba54\ud2b8\ub9ad \uc11c\ubc84 \uc2dc\uc791\nstart_http_server(8000)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n# \uba54\ud2b8\ub9ad: http://localhost:8000/metrics\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#circuit-breaker_1","title":"\ube44\ub3d9\uae30 Circuit Breaker","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Prometheus \uba54\ud2b8\ub9ad \uc11c\ubc84 \uc2dc\uc791 (\ubcc4\ub3c4 \uc2a4\ub808\ub4dc)\nstart_http_server(8000)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#fastapi","title":"FastAPI \ud1b5\ud569","text":"<pre><code>from fastapi import FastAPI\nfrom prometheus_client import make_asgi_app\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\napp = FastAPI()\n\n# Prometheus \uba54\ud2b8\ub9ad \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \ub9c8\uc6b4\ud2b8\nmetrics_app = make_asgi_app()\napp.mount(\"/metrics\", metrics_app)\n\ncb = AsyncCircuitBreaker(\n    name=\"api_gateway\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n</code></pre> <p>\ucc38\uace0: <code>prometheus_client</code>\ub294 thread-safe\ud558\uba70 \ub3d9\uae30/\ube44\ub3d9\uae30 \ucf54\ub4dc \ubaa8\ub450\uc5d0\uc11c \uc0ac\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4. \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uacf5\uc2dd \ubb38\uc11c\ub97c \ucc38\uace0\ud558\uc138\uc694.</p>"},{"location":"ko/components/listeners/prometheus/#multiple-circuits","title":"\uc5ec\ub7ec Circuit Breaker \ubaa8\ub2c8\ud130\ub9c1","text":"<pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\nstart_http_server(8000)\n\n# \ub9ac\uc2a4\ub108 \uc778\uc2a4\ud134\uc2a4 \uc7ac\uc0ac\uc6a9\nlistener = PrometheusListener()\n\npayment_cb = CircuitBreaker(name=\"payment_api\", ..., listeners=[listener])\ninventory_cb = CircuitBreaker(name=\"inventory_api\", ..., listeners=[listener])\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#custom-metrics","title":"\ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad","text":"<p>\ucd94\uac00 \uba54\ud2b8\ub9ad\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 <code>IListener</code>\ub97c \uad6c\ud604\ud558\uc5ec \ucee4\uc2a4\ud140 \ub9ac\uc2a4\ub108\ub97c \uc791\uc131\ud558\uc138\uc694:</p> <pre><code>from prometheus_client import Counter\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nCUSTOM_METRIC = Counter('my_custom_metric', 'Description', ['circuit_name'])\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        # \ucee4\uc2a4\ud140 \ub85c\uc9c1\n        CUSTOM_METRIC.labels(circuit_name=signal.circuit_name).inc()\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>SlackListener - \uc2e4\uc2dc\uac04 \uc54c\ub9bc \uc124\uc815</li> <li>LogListener - \ub85c\uae45 \uc124\uc815</li> <li>Overview - \ub9ac\uc2a4\ub108 \uac1c\uc694\ub85c \ub3cc\uc544\uac00\uae30</li> </ul>"},{"location":"ko/components/listeners/slack/","title":"SlackListener / AsyncSlackListener","text":"<p>Slack \ucc44\ub110\uc5d0 Circuit Breaker \uc0c1\ud0dc \uc804\ud658 \uc54c\ub9bc\uc744 \uc804\uc1a1\ud558\ub294 \ub9ac\uc2a4\ub108\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/slack/#installation","title":"\uc124\uce58","text":"<pre><code>pip install fluxgate[slack]\n</code></pre>"},{"location":"ko/components/listeners/slack/#slack-setup","title":"Slack \uc124\uc815","text":""},{"location":"ko/components/listeners/slack/#1-slack-app","title":"1. Slack App \uc0dd\uc131","text":"<ol> <li>https://api.slack.com/apps\uc5d0\uc11c \"Create New App\"</li> <li>\"From scratch\" \uc120\ud0dd</li> <li>App \uc774\ub984 \ubc0f Workspace \uc120\ud0dd</li> </ol>"},{"location":"ko/components/listeners/slack/#2-bot-token","title":"2. Bot Token \uad8c\ud55c","text":"<p>OAuth &amp; Permissions\uc5d0\uc11c \ub2e4\uc74c \uad8c\ud55c \ucd94\uac00:</p> <ul> <li><code>chat:write</code> - \uba54\uc2dc\uc9c0 \uc804\uc1a1</li> <li><code>chat:write.public</code> - \uacf5\uac1c \ucc44\ub110\uc5d0 \uba54\uc2dc\uc9c0 \uc804\uc1a1 (\uc120\ud0dd)</li> </ul>"},{"location":"ko/components/listeners/slack/#3-bot-token","title":"3. Bot Token \ubcf5\uc0ac","text":"<p>OAuth &amp; Permissions \u2192 Bot User OAuth Token (xoxb-\ub85c \uc2dc\uc791)</p>"},{"location":"ko/components/listeners/slack/#4-id","title":"4. \ucc44\ub110 ID \ud655\uc778","text":"<p>\ucc44\ub110 \uc6b0\ud074\ub9ad \u2192 \"View channel details\" \u2192 Channel ID \ubcf5\uc0ac (\uc608: C1234567890)</p>"},{"location":"ko/components/listeners/slack/#usage","title":"\uc0ac\uc6a9\ubc95","text":""},{"location":"ko/components/listeners/slack/#circuit-breaker","title":"\ub3d9\uae30 Circuit Breaker","text":"<pre><code>import os\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.slack import SlackListener\n\nslack = SlackListener(\n    channel=os.environ[\"SLACK_CHANNEL\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[slack],\n)\n</code></pre>"},{"location":"ko/components/listeners/slack/#circuit-breaker_1","title":"\ube44\ub3d9\uae30 Circuit Breaker","text":"<pre><code>import os\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.slack import AsyncSlackListener\n\nslack = AsyncSlackListener(\n    channel=os.environ[\"SLACK_CHANNEL\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[slack],\n)\n</code></pre>"},{"location":"ko/components/listeners/slack/#message-format","title":"\uba54\uc2dc\uc9c0 \ud615\uc2dd","text":""},{"location":"ko/components/listeners/slack/#closed-open","title":"CLOSED \u2192 OPEN","text":"<ul> <li>\ud83d\udea8 Circuit Breaker Triggered</li> <li>\ube68\uac15\uc0c9 (#FF4C4C)</li> <li>\uc0c8 \uc2a4\ub808\ub4dc \uc2dc\uc791</li> </ul>"},{"location":"ko/components/listeners/slack/#open-half_open","title":"OPEN \u2192 HALF_OPEN","text":"<ul> <li>\ud83d\udd04 Attempting Circuit Breaker Recovery</li> <li>\uc8fc\ud669\uc0c9 (#FFA500)</li> <li>\uac19\uc740 \uc2a4\ub808\ub4dc\uc5d0 \ub2f5\uae00</li> </ul>"},{"location":"ko/components/listeners/slack/#half_open-open","title":"HALF_OPEN \u2192 OPEN","text":"<ul> <li>\u26a0\ufe0f Circuit Breaker Re-triggered</li> <li>\ube68\uac15\uc0c9 (#FF4C4C)</li> <li>\uac19\uc740 \uc2a4\ub808\ub4dc\uc5d0 \ub2f5\uae00</li> </ul>"},{"location":"ko/components/listeners/slack/#half_open-closed","title":"HALF_OPEN \u2192 CLOSED","text":"<ul> <li>\u2705 Circuit Breaker Recovered</li> <li>\ucd08\ub85d\uc0c9 (#36a64f)</li> <li>\uac19\uc740 \uc2a4\ub808\ub4dc\uc5d0 \ub2f5\uae00 + \ucc44\ub110 \ube0c\ub85c\ub4dc\uce90\uc2a4\ud2b8</li> </ul>"},{"location":"ko/components/listeners/slack/#conditional-notifications","title":"\uc870\uac74\ubd80 \uc54c\ub9bc","text":"<p>\ud2b9\uc815 \uc0c1\ud0dc \uc804\ud658\ub9cc \uc54c\ub9bc\ubc1b\uae30:</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\nfrom fluxgate.listeners.slack import SlackListener\n\nclass CriticalSlackListener(IListener):\n    \"\"\"OPEN \uc0c1\ud0dc \uc804\ud658\ub9cc \uc54c\ub9bc\"\"\"\n\n    def __init__(self, channel: str, token: str):\n        self._slack = SlackListener(channel, token)\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self._slack(signal)\n</code></pre>"},{"location":"ko/components/listeners/slack/#custom-messages","title":"\ucee4\uc2a4\ud140 \uba54\uc2dc\uc9c0","text":"<p>\uba54\uc2dc\uc9c0 \ud3ec\ub9f7\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub824\uba74 <code>IListener</code>\ub97c \uc9c1\uc811 \uad6c\ud604\ud558\uc138\uc694. Slack API \uba54\uc2dc\uc9c0 \ud615\uc2dd\uc740 \uacf5\uc2dd \ubb38\uc11c\ub97c \ucc38\uace0\ud558\uc138\uc694.</p>"},{"location":"ko/components/listeners/slack/#troubleshooting","title":"\ubb38\uc81c \ud574\uacb0","text":"<ul> <li>401 Unauthorized: Bot Token \ud655\uc778</li> <li>403 Forbidden: <code>chat:write</code> \uad8c\ud55c \ubc0f Workspace \uc124\uce58 \ud655\uc778</li> <li>404 Channel Not Found: \ucc44\ub110 ID \ud655\uc778 \ubc0f Bot \ucd08\ub300 \uc5ec\ubd80 \ud655\uc778</li> </ul>"},{"location":"ko/components/listeners/slack/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>PrometheusListener - \uba54\ud2b8\ub9ad \uae30\ubc18 \ubaa8\ub2c8\ud130\ub9c1</li> <li>LogListener - \ub85c\uae45 \uc124\uc815</li> <li>Overview - \ub9ac\uc2a4\ub108 \uac1c\uc694\ub85c \ub3cc\uc544\uac00\uae30</li> </ul>"}]}
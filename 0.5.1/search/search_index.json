{"config":{"lang":["en","ko"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Fluxgate","text":"<p>A modern, composable circuit breaker library for Python with full support for both synchronous and asynchronous code.</p>"},{"location":"#why-fluxgate","title":"Why Fluxgate?","text":"<p>Circuit breakers prevent cascading failures in distributed systems by monitoring service health and temporarily blocking calls to failing services. Fluxgate makes this easy with:</p> <ul> <li>Sync &amp; Async: First-class support for both synchronous and asynchronous code</li> <li>Composable: Build complex failure detection logic using simple, reusable components</li> <li>Zero Dependencies: Core library has no external dependencies</li> <li>Fully Typed: Complete type hints for better IDE support</li> <li>Monitoring Ready: Built-in monitoring with Prometheus, Slack, and logging</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install fluxgate\n</code></pre>"},{"location":"#basic-example","title":"Basic Example","text":"<pre><code>from fluxgate import CircuitBreaker\n\ncb = CircuitBreaker(\"payment_api\")\n\n@cb\ndef call_payment_api(amount: float):\n    return requests.post(\"https://api.example.com/pay\", json={\"amount\": amount})\n</code></pre> <p>That's it! The circuit breaker uses sensible defaults:</p> <ul> <li>Trips when failure rate exceeds 50% (after 100 calls minimum)</li> <li>Waits 60 seconds before attempting recovery</li> <li>Gradually increases allowed calls from 0% to 100% over 60 seconds during recovery</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<p>A circuit breaker is a state machine that determines whether to allow or block calls to a service. It operates in three main states:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; CLOSED\n    CLOSED --&gt; OPEN: tripper\n    OPEN --&gt; HALF_OPEN: retry\n    HALF_OPEN --&gt; CLOSED: !tripper\n    HALF_OPEN --&gt; OPEN: tripper</code></pre> <ul> <li>CLOSED: This is the default state. All calls are permitted and a <code>tracker</code> monitors their outcomes. If the failure rate exceeds a configured threshold (the <code>tripper</code> condition), the breaker \"trips\" and moves to the <code>OPEN</code> state.</li> <li>OPEN: In this state, the circuit breaker blocks all calls to the service, preventing further failures. After a configured <code>retry</code> timeout, it transitions to <code>HALF_OPEN</code>.</li> <li>HALF_OPEN: The breaker allows a limited number of \"probe\" calls (controlled by a <code>permit</code>) to test if the service has recovered. If these calls succeed, the breaker returns to <code>CLOSED</code>. If they fail, it trips again and returns to <code>OPEN</code>.</li> </ul>"},{"location":"#core-components","title":"Core Components","text":"<p>Fluxgate's power comes from its composable components. You can mix and match them to create precise and flexible failure detection logic tailored to your needs.</p> Component Purpose Common Implementations Windows Collects and stores recent call outcomes (success/failure). <code>CountWindow(100)</code>: Stores the last 100 calls.<code>TimeWindow(60)</code>: Stores calls from the last 60 seconds. Trackers Decides whether a call's outcome should be tracked as a failure. <code>TypeOf(ConnectionError)</code>: Tracks specific exception types.<code>Custom(func)</code>: Use your own function for complex logic. Trippers Defines the condition for tripping the circuit from <code>CLOSED</code> to <code>OPEN</code>. <code>FailureRate(0.5)</code>: Trips if failure rate exceeds 50%.<code>AvgLatency(2.0)</code>: Trips if average response time is over 2 seconds. Retries Determines when the circuit should transition from <code>OPEN</code> to <code>HALF_OPEN</code>. <code>Cooldown(60.0)</code>: Waits for a fixed 60-second cooldown.<code>Backoff(10.0)</code>: Uses an exponential backoff strategy starting at 10 seconds. Permits Manages how many \"probe\" calls are allowed in the <code>HALF_OPEN</code> state. <code>Random(0.5)</code>: Allows 50% of calls to pass through.<code>RampUp(0.1, 0.8, 60)</code>: Gradually increases the allowed call ratio over 60 seconds."},{"location":"#async-support","title":"Async Support","text":"<p>Full support for asyncio applications:</p> <pre><code>import asyncio\nfrom fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\"async_api\")\n\n@cb\nasync def call_async_api():\n    pass  # Your async HTTP call here\n\nasync def main():\n    result = await call_async_api()\n\nasyncio.run(main())\n</code></pre>"},{"location":"#complete-example","title":"Complete Example","text":"<p>A fully configured circuit breaker for an external payment API:</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, FailureStreak\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Track only 5xx errors and network failures\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=FailureStreak(5) | (MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    )),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0, jitter_ratio=0.1),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\"https://payment-api.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Components - Deep dive into windows, trackers, trippers, retries, and permits</li> <li>See Examples - Real-world usage patterns</li> <li>Read API Reference - Complete API documentation</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p>"},{"location":"changelog/#051-20251217","title":"[0.5.1] - 2025.12.17","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>SlackListener thread management: Improved thread lifecycle for manual state transitions.<ul> <li>Thread now ends on transitions to <code>CLOSED</code>, <code>DISABLED</code>, or <code>METRICS_ONLY</code> (previously only <code>HALF_OPEN \u2192 CLOSED</code>)</li> <li>Thread continues on transitions to <code>FORCED_OPEN</code> since the failure cycle persists</li> <li>Direct <code>reset()</code> from <code>OPEN</code> now properly clears the thread for the next failure cycle</li> </ul> </li> </ul>"},{"location":"changelog/#050-20251216","title":"[0.5.0] - 2025.12.16","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li><code>All</code> permit strategy: A simple permit that always allows all calls in <code>HALF_OPEN</code> state. Useful for testing or when you want to rely solely on the tripper for state transitions.</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import All\n\ncb = CircuitBreaker(name=\"api\", permit=All())\n</code></pre> <ul> <li><code>Template</code> TypedDict for SlackListener: Customize Slack message templates by subclassing <code>SlackListener</code> and overriding <code>TRANSITION_TEMPLATES</code> and <code>FALLBACK_TEMPLATE</code> class attributes.</li> </ul> <pre><code>from fluxgate.listeners.slack import SlackListener, Template\nfrom fluxgate.state import StateEnum\n\nclass CustomSlackListener(SlackListener):\n    TRANSITION_TEMPLATES: dict[tuple[StateEnum, StateEnum], Template] = {\n        (StateEnum.CLOSED, StateEnum.OPEN): {\n            \"title\": \"\ud83d\udea8 Alert\",\n            \"color\": \"#FF0000\",\n            \"description\": \"Circuit opened!\",\n        },\n    }\n</code></pre>"},{"location":"changelog/#041-20251215","title":"[0.4.1] - 2025.12.15","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Sensible defaults for CircuitBreaker: All component parameters now have default values, allowing simpler initialization with just a name:</li> </ul> <pre><code>from fluxgate import CircuitBreaker\n\ncb = CircuitBreaker(\"my-service\")\n\n@cb\ndef call_api():\n    return requests.get(\"https://api.example.com\")\n</code></pre> <p>Default values:</p> <ul> <li><code>window</code>: <code>CountWindow(100)</code></li> <li><code>tracker</code>: <code>All()</code></li> <li><code>tripper</code>: <code>MinRequests(100) &amp; (FailureRate(0.5) | SlowRate(1.0))</code></li> <li><code>retry</code>: <code>Cooldown(60.0)</code></li> <li><code>permit</code>: <code>RampUp(0.0, 1.0, 60.0)</code></li> <li><code>slow_threshold</code>: <code>60.0</code></li> </ul>"},{"location":"changelog/#040-20251205","title":"[0.4.0] - 2025.12.05","text":""},{"location":"changelog/#breaking-changes","title":"Breaking Changes","text":"<ul> <li><code>AvgLatency</code> now uses <code>&gt;=</code> instead of <code>&gt;</code>: The tripper now trips when the average latency reaches or exceeds the threshold, consistent with other rate-based trippers (<code>FailureRate</code>, <code>SlowRate</code>).</li> <li><code>TypeOf</code> now requires at least one exception type: Creating <code>TypeOf()</code> without arguments now raises <code>ValueError</code>.</li> </ul>"},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li><code>SlackListener</code> no longer crashes on unsupported transitions: Previously, state transitions not in the predefined message templates (e.g., <code>DISABLED</code>, <code>FORCED_OPEN</code>, <code>METRICS_ONLY</code>, or manual <code>reset()</code> from <code>OPEN</code> to <code>CLOSED</code>) would raise <code>KeyError</code>. Now these transitions are silently ignored.</li> </ul>"},{"location":"changelog/#031-20251205","title":"[0.3.1] - 2025.12.05","text":""},{"location":"changelog/#breaking-changes_1","title":"Breaking Changes","text":"<ul> <li><code>ITripper.consecutive_failures</code> is now required: The <code>consecutive_failures</code> parameter no longer has a default value. Custom tripper implementations must pass this argument explicitly.</li> </ul>"},{"location":"changelog/#030-20251205","title":"[0.3.0] - 2025.12.05","text":""},{"location":"changelog/#breaking-changes_2","title":"Breaking Changes","text":"<ul> <li><code>ITripper</code> interface signature changed: The <code>__call__</code> method now accepts a <code>consecutive_failures</code> parameter. Custom tripper implementations must update their signature:</li> </ul> <pre><code># Before (v0.2.x)\ndef __call__(self, metric: Metric, state: StateEnum) -&gt; bool: ...\n\n# After (v0.3.0)\ndef __call__(self, metric: Metric, state: StateEnum, consecutive_failures: int = 0) -&gt; bool: ...\n</code></pre>"},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li><code>FailureStreak</code> tripper: Trip the circuit after N consecutive failures. Useful for fast failure detection during cold start or complete service outage.</li> </ul> <pre><code>from fluxgate.trippers import FailureStreak, MinRequests, FailureRate\n\n# Fast trip on 5 consecutive failures, or statistical trip on 50% failure rate\ntripper = FailureStreak(5) | (MinRequests(20) &amp; FailureRate(0.5))\n</code></pre>"},{"location":"changelog/#020-20251203","title":"[0.2.0] - 2025.12.03","text":""},{"location":"changelog/#breaking-changes_3","title":"Breaking Changes","text":"<ul> <li><code>slow_threshold</code> is now required: The <code>slow_threshold</code> parameter no longer has a default value and must be explicitly set when creating <code>CircuitBreaker</code> or <code>AsyncCircuitBreaker</code> instances.<ul> <li>If you don't use <code>SlowRate</code>, set it to <code>float(\"inf\")</code> to disable slow call tracking.</li> <li>This follows Python's principle: \"Explicit is better than implicit.\"</li> </ul> </li> </ul> <p>Migration:</p> <pre><code># Before (v0.1.x)\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    ...\n)\n\n# After (v0.2.0)\ncb = CircuitBreaker(\n    name=\"api\",\n    window=CountWindow(size=100),\n    ...\n    slow_threshold=float(\"inf\"),  # or a specific value like 3.0\n)\n</code></pre>"},{"location":"changelog/#012-20251203","title":"[0.1.2] - 2025.12.03","text":""},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>LogListener: Added <code>logger</code> and <code>level_map</code> parameters for flexible logging configuration.<ul> <li><code>logger</code>: Inject a custom logger instance instead of using the root logger.</li> <li><code>level_map</code>: Customize log levels per state (default: <code>OPEN</code>/<code>FORCED_OPEN</code> \u2192 <code>WARNING</code>, others \u2192 <code>INFO</code>).</li> </ul> </li> </ul>"},{"location":"changelog/#011-20251201","title":"[0.1.1] - 2025.12.01","text":"<p>This is the initial public release of Fluxgate.</p>"},{"location":"changelog/#features","title":"Features","text":"<ul> <li>\u2728 Core: Initial implementation of <code>CircuitBreaker</code> and <code>AsyncCircuitBreaker</code>.</li> <li>\u2728 Windows: Sliding window strategies (<code>CountWindow</code>, <code>TimeWindow</code>).</li> <li>\u2728 Trackers: Composable failure trackers (<code>All</code>, <code>TypeOf</code>, <code>Custom</code>) with <code>&amp;</code>, <code>|</code>, and <code>~</code> operators.</li> <li>\u2728 Trippers: Composable tripping conditions (<code>Closed</code>, <code>HalfOpened</code>, <code>MinRequests</code>, <code>FailureRate</code>, <code>AvgLatency</code>, <code>SlowRate</code>) with <code>&amp;</code> and <code>|</code> operators.</li> <li>\u2728 Retries: Recovery strategies (<code>Never</code>, <code>Always</code>, <code>Cooldown</code>, <code>Backoff</code>).</li> <li>\u2728 Permits: Gradual recovery strategies (<code>Random</code>, <code>RampUp</code>).</li> <li>\u2728 Listeners: Built-in monitoring and alerting integrations (<code>LogListener</code>, <code>PrometheusListener</code>, <code>SlackListener</code>).</li> <li>\u2728 Manual Control: Methods for manual intervention (<code>disable</code>, <code>metrics_only</code>, <code>force_open</code>, <code>reset</code>).</li> <li>\u2728 Typing: Full type hinting and <code>py.typed</code> compliance for excellent IDE support.</li> </ul>"},{"location":"circuit-breaker/","title":"Circuit Breaker","text":"<p>A Circuit Breaker is a mechanism that prevents a system from repeatedly trying to execute an operation that is likely to fail, which is essential for building resilient distributed systems.</p>"},{"location":"circuit-breaker/#core-concepts","title":"Core Concepts","text":"<p>It works just like an electrical circuit breaker in your home.</p> <ul> <li>When everything is normal, the circuit is closed, and calls flow through.</li> <li>If failures surpass a threshold, the circuit opens, and calls are blocked.</li> <li>After a timeout, the circuit enters a half-open state to test if the underlying service has recovered.</li> </ul>"},{"location":"circuit-breaker/#state-transitions","title":"State Transitions","text":"<p>A circuit breaker automatically transitions between three main states: <code>CLOSED</code>, <code>OPEN</code>, and <code>HALF_OPEN</code>. It also provides manual override states (<code>DISABLED</code>, <code>FORCED_OPEN</code>, <code>METRICS_ONLY</code>) for maintenance and testing.</p> <pre><code>stateDiagram-v2\n    [*] --&gt; CLOSED\n    CLOSED --&gt; OPEN: tripper\n    OPEN --&gt; HALF_OPEN: retry\n    HALF_OPEN --&gt; CLOSED: !tripper\n    HALF_OPEN --&gt; OPEN: tripper</code></pre>"},{"location":"circuit-breaker/#state-closed","title":"CLOSED: The Normal State","text":"<p>This is the default operational state where all calls pass through to the protected service. The circuit breaker continuously monitors calls in the background.</p> <ul> <li>Operation: Allows all calls.</li> <li>Monitoring: Tracks successes and failures.</li> <li>Transition: Trips to <code>OPEN</code> if the failure threshold defined by the <code>tripper</code> is met.</li> </ul> <pre><code>from fluxgate import CircuitBreaker\n\n# Use defaults: trips at 50% failure rate after 100 calls, 60s cooldown\ncb = CircuitBreaker(\"api\")\n</code></pre>"},{"location":"circuit-breaker/#state-open","title":"OPEN: The Failing State","text":"<p>When the failure threshold is exceeded, the circuit opens. In this state, it immediately rejects all calls without attempting to contact the service.</p> <ul> <li>Operation: Blocks all calls, raising a <code>CallNotPermittedError</code>.</li> <li>Benefit: Prevents an application from wasting resources on a failing service and gives the service time to recover.</li> <li>Transition: Moves to <code>HALF_OPEN</code> after the timeout defined by the <code>retry</code> strategy.</li> </ul> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef call_api():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = call_api()\nexcept CallNotPermittedError as e:\n    # The circuit is open, so execute fallback logic.\n    print(f\"Circuit is open: {e.message}\")\n    return {\"fallback\": \"data\"}\n</code></pre>"},{"location":"circuit-breaker/#state-half-open","title":"HALF_OPEN: The Recovery State","text":"<p>After the retry timeout, the circuit moves to this state to test if the service has recovered.</p> <ul> <li>Operation: Allows a limited number of \"probe\" calls, as defined by the <code>permit</code> strategy.</li> <li>Transition to CLOSED: If the probe calls succeed, the circuit closes and returns to normal operation.</li> <li>Transition to OPEN: If the probe calls fail, the circuit re-opens to prevent further damage.</li> </ul> <p>This gradual recovery approach prevents a \"thundering herd\" from overwhelming a service that is still fragile.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    # Use a stricter tripping condition during recovery testing.\n    tripper=MinRequests(5) &amp; FailureRate(0.3),\n    # Start by allowing 10% of traffic, then ramp up to 80% over 60 seconds.\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n)\n</code></pre>"},{"location":"circuit-breaker/#state-metrics-only","title":"METRICS_ONLY: Monitor Without Tripping","text":"<p>In this state, the circuit breaker tracks metrics but never trips open.</p> <ul> <li>Operation: Allows all calls to pass through, just like in the <code>CLOSED</code> state.</li> <li>Use Case: Safely gather metrics from a new service or during a load test before enabling active protection.</li> </ul> <pre><code># Collect metrics before enabling the breaker.\ncb.metrics_only()\n\n# When ready, activate the circuit breaker's normal lifecycle.\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#state-disabled","title":"DISABLED: Bypass the Breaker","text":"<p>This state completely disables the circuit breaker.</p> <ul> <li>Operation: Allows all calls to pass through.</li> <li>Monitoring: Does not track any metrics.</li> <li>Use Case: Useful for debugging, running specific tests, or in emergency situations where you need to bypass the breaker entirely.</li> </ul> <pre><code># Disable the circuit breaker during an emergency.\ncb.disable()\n\n# Re-enable it later.\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#state-forced-open","title":"FORCED_OPEN: Manually Block Calls","text":"<p>This state forces the circuit to be open and block all calls.</p> <ul> <li>Operation: Rejects all calls with <code>CallNotPermittedError</code>.</li> <li>Recovery: Does not automatically recover. It requires a manual <code>reset()</code> call.</li> <li>Use Case: Ideal for planned maintenance or for manually taking a service offline.</li> </ul> <pre><code># Force the circuit open during a planned deployment.\ncb.force_open()\n\n# After maintenance is complete, return to normal operation.\ncb.reset()\n</code></pre>"},{"location":"circuit-breaker/#usage","title":"Usage","text":"<p>You can apply a circuit breaker to your code in several ways.</p>"},{"location":"circuit-breaker/#decorator-usage","title":"Decorator Style","text":"<p>Using a decorator is the most common and convenient way to protect a function.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),  # Only track these errors\n)\n\n@cb\ndef charge_payment(amount: float):\n    pass  # Your payment API call here\n</code></pre>"},{"location":"circuit-breaker/#call-usage","title":"Direct Call Style","text":"<p>The <code>call</code> method is useful for protecting functions that you can't modify with a decorator, such as functions from a third-party library.</p> <pre><code>def process_payment(amount: float):\n    pass  # Your payment API call here\n\n# Protect the function by wrapping it with .call()\nresult = cb.call(process_payment, amount=100.0)\n</code></pre>"},{"location":"circuit-breaker/#async-usage","title":"Async Support","text":"<p>Fluxgate provides full support for modern <code>asyncio</code> applications via the <code>AsyncCircuitBreaker</code>.</p> <p>Note</p> <p>To prevent a recovering service from being overwhelmed, <code>AsyncCircuitBreaker</code> limits the number of concurrent calls allowed in the <code>HALF_OPEN</code> state. This is controlled by the <code>max_half_open_calls</code> parameter (default is 10) and is managed internally by an <code>asyncio.Semaphore</code>.</p> <pre><code>import asyncio\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    tracker=TypeOf(httpx.ConnectError),\n    max_half_open_calls=5,  # Limit concurrent calls in HALF_OPEN to 5.\n)\n\n@cb\nasync def fetch_data():\n    pass  # Your async HTTP call here\n\n# Use await to call the async function\nasync def main():\n    result = await fetch_data()\n\nasyncio.run(main())\n</code></pre>"},{"location":"circuit-breaker/#info","title":"Inspecting the Breaker's State","text":"<p>You can inspect the current state and metrics of a circuit breaker at any time using the <code>.info()</code> method.</p> <pre><code>info = cb.info()\nprint(f\"Circuit: {info.name}\")\nprint(f\"State: {info.state}\")\nprint(f\"Last state change: {info.changed_at}\")\nprint(f\"Reopens at: {info.reopens}\")\nprint(f\"Current metrics: {info.metrics}\")\n\n# Example output:\n# Circuit: payment_api\n# State: closed\n# Last state change: 1234567890.123\n# Reopens at: 0\n# Current metrics: Metric(total_count=100, failure_count=5, total_duration=45.2, slow_count=3)\n</code></pre>"},{"location":"circuit-breaker/#manual-control","title":"Manual Control","text":"<p>There may be times when you need to control the circuit breaker's state manually.</p> <pre><code># Reset to CLOSED state and clear all metrics.\ncb.reset()\n\n# Transition to METRICS_ONLY to monitor without tripping.\ncb.metrics_only()\n\n# Transition to DISABLED to bypass the breaker entirely.\ncb.disable()\n\n# Transition to FORCED_OPEN to manually block calls.\ncb.force_open()\n\n# You can also change state without notifying listeners.\ncb.reset(notify=False)\n</code></pre>"},{"location":"circuit-breaker/#error-handling","title":"Error Handling and Fallbacks","text":"<p>When a circuit is open, it raises a <code>CallNotPermittedError</code>. You can handle this by defining a fallback mechanism to provide an alternative response, such as returning cached data or a default value.</p>"},{"location":"circuit-breaker/#fallback-parameter","title":"Automatic Fallback with <code>fallback</code> (Recommended)","text":"<p>The easiest method is to provide a fallback function directly to the decorator. This function will be called automatically whenever an exception occurs.</p> <pre><code># The fallback function receives the exception as an argument.\ndef handle_error(e: Exception) -&gt; dict:\n    if isinstance(e, CallNotPermittedError):\n        return get_cached_data()  # Circuit is open\n    if isinstance(e, TimeoutError):\n        return get_stale_data()   # Operation timed out\n    raise e  # Re-raise any other unexpected exceptions.\n\n@cb(fallback=handle_error)\ndef api_call() -&gt; dict:\n    return requests.get(\"https://api.example.com\").json()\n\n# The fallback is invoked automatically on any exception.\nresult = api_call()\n</code></pre>"},{"location":"circuit-breaker/#call-with-fallback","title":"Explicit Fallback with <code>call_with_fallback</code>","text":"<p>You can also specify a fallback explicitly for a single call.</p> <pre><code>result = cb.call_with_fallback(\n    fetch_from_api,\n    fallback_func=lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"circuit-breaker/#manual-try-except","title":"Manual <code>try...except</code> Handling","text":"<p>For the most control, you can use a standard <code>try...except</code> block.</p> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef api_call():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = api_call()\nexcept CallNotPermittedError:\n    # The circuit is open, so execute the fallback.\n    result = get_cached_data()\nexcept Exception as e:\n    # The underlying service call failed.\n    logging.error(f\"API call failed: {e}\")\n    raise\n</code></pre>"},{"location":"circuit-breaker/#complete-example","title":"Complete Example","text":"<p>Here is a complete example of a fully configured circuit breaker to protect a critical payment API.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate, FailureStreak\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Define a custom tracker to only count critical server-side errors as failures.\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500  # 5xx errors are failures\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=Custom(is_retriable_error),\n    tripper=(\n        # Fast trip on 5 consecutive failures (protects during cold start).\n        FailureStreak(5) |\n        # Statistical trip based on failure/slow rates once enough data is collected.\n        (MinRequests(20) &amp; (\n            (Closed() &amp; (FailureRate(0.6) | SlowRate(0.3))) |\n            (HalfOpened() &amp; (FailureRate(0.5) | SlowRate(0.2)))\n        ))\n    ),\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # Add jitter to prevent a thundering herd.\n    ),\n    permit=RampUp(\n        initial=0.1,      # Start by allowing 10% of traffic.\n        final=0.5,        # Gradually increase to 50%.\n        duration=60.0     # Ramp up over 60 seconds.\n    ),\n    slow_threshold=3.0,  # Mark any call over 3 seconds as slow.\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://payment-api.example.com/charge\",\n        json={\"amount\": amount},\n        timeout=5.0\n    )\n    response.raise_for_status()\n    return response.json()\n\n# Example usage with fallback logic\ntry:\n    result = charge_payment(amount=100.0)\n    print(f\"Payment successful: {result}\")\nexcept CallNotPermittedError:\n    print(\"Payment service is temporarily unavailable. Queuing payment for later.\")\n    # Fallback: Add the payment to a queue to be processed later.\n    queue_payment(amount=100.0)\nexcept httpx.HTTPStatusError as e:\n    print(f\"Payment failed with status {e.response.status_code}\")\n    raise\n</code></pre>"},{"location":"circuit-breaker/#next-steps","title":"Next Steps","text":"<ul> <li>Components: Dive deeper into the components that make up a circuit breaker.</li> <li>Examples: See more real-world usage patterns and scenarios.</li> <li>API Reference: Explore the complete API documentation.</li> </ul>"},{"location":"examples/","title":"Examples","text":"<p>This page provides practical, real-world examples to help you get started with Fluxgate.</p>"},{"location":"examples/#1-protecting-an-external-api-call","title":"1. Protecting an External API Call","text":"<p>This is the most common use case. The goal is to protect our application from a slow or failing external service.</p> <p>With default settings, Fluxgate will:</p> <ul> <li>Track failures over the last 100 calls</li> <li>Trip at 50% failure rate (after 100 calls minimum)</li> <li>Wait 60 seconds before recovery</li> <li>Allow 50% of calls during recovery</li> </ul> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=TypeOf(httpx.HTTPError),  # Only track HTTP errors\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://api.example.com/charge\",\n        json={\"amount\": amount}\n    )\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"examples/#2-integrating-with-a-web-framework-fastapi","title":"2. Integrating with a Web Framework (FastAPI)","text":"<p>When integrating with a web framework, you typically want to catch a <code>CallNotPermittedError</code> and return a user-friendly error response, like a <code>503 Service Unavailable</code>.</p> <pre><code>from fastapi import FastAPI, HTTPException\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker, CallNotPermittedError\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.retries import Cooldown\n\napp = FastAPI()\n\n# A single circuit breaker for a critical external service.\nexternal_api_cb = AsyncCircuitBreaker(\n    name=\"external_product_api\",\n    tracker=TypeOf(httpx.HTTPError),\n    retry=Cooldown(duration=30.0),  # Shorter cooldown for faster recovery\n)\n\n# A separate function for your core logic is a good practice.\n@external_api_cb\nasync def fetch_product_data(product_id: str):\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"https://api.example.com/products/{product_id}\")\n        response.raise_for_status()\n        return response.json()\n\n@app.get(\"/products/{product_id}\")\nasync def get_product(product_id: str):\n    try:\n        data = await fetch_product_data(product_id)\n        return data\n    except CallNotPermittedError:\n        # The circuit is open, return a 503 error.\n        raise HTTPException(\n            status_code=503,\n            detail=\"The external product service is currently unavailable. Please try again later.\"\n        )\n    except httpx.HTTPStatusError as e:\n        # The external service returned an error.\n        raise HTTPException(status_code=e.response.status_code, detail=str(e))\n</code></pre>"},{"location":"examples/#3-applying-different-policies-per-service","title":"3. Applying Different Policies per Service","text":"<p>It's common to have different circuit breakers for different external services, each with its own tailored policy. A high-criticality service like payments might have a more conservative configuration than a less critical one like inventory.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import TimeWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import MinRequests, FailureRate, FailureStreak\nfrom fluxgate.retries import Backoff\n\n# More conservative policy for the critical payment service.\n# FailureStreak provides fast protection during cold start before MinRequests is met.\npayment_cb = AsyncCircuitBreaker(\n    name=\"payment_service\",\n    window=TimeWindow(size=300),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=FailureStreak(5) | (MinRequests(20) &amp; FailureRate(0.4)),\n    retry=Backoff(initial=30.0, max_duration=600.0),\n)\n\n# More aggressive policy for the less critical inventory service.\ninventory_cb = AsyncCircuitBreaker(\n    name=\"inventory_service\",\n    window=TimeWindow(size=60),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=MinRequests(10) &amp; FailureRate(0.6),\n    retry=Backoff(initial=10.0, max_duration=300.0),\n)\n\n@payment_cb\nasync def charge_payment(amount: float):\n    pass\n\n@inventory_cb\nasync def check_inventory(product_id: str):\n    pass\n</code></pre>"},{"location":"examples/#4-handling-fallbacks","title":"4. Handling Fallbacks","text":"<p>When a call is blocked or fails, you often want to execute alternative logic, such as returning cached data. This is known as a \"fallback\".</p>"},{"location":"examples/#using-the-fallback-decorator-argument-recommended","title":"Using the <code>fallback</code> Decorator Argument (Recommended)","text":"<p>This is the cleanest approach. The provided function is called automatically whenever the protected function raises any exception. Your fallback function receives the exception instance, so you can decide how to handle it.</p> <pre><code>from fluxgate import CircuitBreaker, CallNotPermittedError\n\n# Placeholder for a function that gets data from a cache.\ndef get_cached_data(e: Exception):\n    print(f\"Returning cached data due to: {type(e).__name__}\")\n    return {\"source\": \"cache\"}\n\n# The fallback is only called if fetch_from_api raises an exception.\n@cb(fallback=get_cached_data)\ndef fetch_data_with_fallback() -&gt; dict:\n    # ... logic to fetch from the live API ...\n    raise httpx.ConnectError(\"Connection failed!\")\n\n# Usage: The fallback is invoked automatically.\nresult = fetch_data_with_fallback() # Returns {\"source\": \"cache\"}\n</code></pre>"},{"location":"examples/#using-call_with_fallback","title":"Using <code>call_with_fallback</code>","text":"<p>This is useful when you can't use a decorator. It works just like the <code>fallback</code> argument.</p> <pre><code>def fetch_from_api():\n    # ...\n    pass\n\n# The fallback is only called if fetch_from_api raises an exception.\nresult = cb.call_with_fallback(\n    fetch_from_api,\n    fallback_func=get_cached_data,\n)\n</code></pre>"},{"location":"examples/#manual-tryexcept","title":"Manual <code>try...except</code>","text":"<p>For maximum control, you can use a standard <code>try...except</code> block. This gives you the most flexibility but is also more verbose.</p> <pre><code>from fluxgate import CallNotPermittedError\n\n@cb\ndef fetch_data():\n    # ...\n    pass\n\ntry:\n    result = fetch_data()\nexcept CallNotPermittedError as e:\n    # This block executes ONLY when the circuit is open.\n    print(\"Circuit is open, returning fallback.\")\n    result = get_cached_data(e)\nexcept httpx.HTTPError as e:\n    # This block executes on other specific errors.\n    print(f\"API call failed: {e}, returning fallback.\")\n    result = get_cached_data(e)\n</code></pre>"},{"location":"examples/#5-advanced-configuration-patterns","title":"5. Advanced Configuration Patterns","text":""},{"location":"examples/#custom-error-tracking","title":"Custom Error Tracking","text":"<p>A <code>tracker</code> lets you define precisely what counts as a failure. For example, you can ignore 4xx client errors while tracking 5xx server errors.</p> <pre><code>import httpx\nfrom fluxgate.trackers import Custom\n\n# This function returns True only for errors we want to track.\ndef is_retriable_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        # 5xx errors are failures, but 4xx errors are not.\n        return e.response.status_code &gt;= 500\n    # Also track network errors.\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\ncb = CircuitBreaker(\n    name=\"api_client\",\n    tracker=Custom(is_retriable_server_error),\n    ...\n)\n</code></pre>"},{"location":"examples/#different-thresholds-per-state","title":"Different Thresholds per State","text":"<p>You can use <code>Closed()</code> and <code>HalfOpened()</code> trippers to create stricter rules for recovery attempts.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\ncb = CircuitBreaker(\n    name=\"api\",\n    # Use different tripping conditions for the CLOSED and HALF_OPEN states.\n    tripper=(\n        (Closed() &amp; MinRequests(20) &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.5)) # Stricter\n    ),\n    ...\n)\n</code></pre>"},{"location":"examples/#factory-for-dynamic-creation","title":"Factory for Dynamic Creation","text":"<p>A factory function is a powerful pattern for creating and managing many similar circuit breakers without repeating code.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trippers import MinRequests, FailureRate\n\ndef circuit_breaker_factory(name: str, policy: str) -&gt; CircuitBreaker:\n    \"\"\"Creates a circuit breaker based on a predefined policy name.\"\"\"\n    if policy == \"strict\":\n        return CircuitBreaker(\n            name=name,\n            tripper=MinRequests(20) &amp; FailureRate(0.4),\n        )\n    elif policy == \"lenient\":\n        return CircuitBreaker(\n            name=name,\n            window=CountWindow(50),\n            tripper=MinRequests(10) &amp; FailureRate(0.7),\n            retry=Cooldown(30.0),\n        )\n    else:\n        raise ValueError(f\"Unknown policy: {policy}\")\n\n# Create breakers on the fly\ncheckout_cb = circuit_breaker_factory(\"checkout\", \"strict\")\nrecommendation_cb = circuit_breaker_factory(\"recommendations\", \"lenient\")\n</code></pre>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<ul> <li>Components Overview: Dive deeper into each component.</li> <li>Listeners Overview: Learn how to monitor your circuit breakers.</li> <li>API Reference: Explore the complete API documentation.</li> </ul>"},{"location":"about/comparison/","title":"Comparison with Other Libraries","text":"<p>This page provides a fair comparison between Fluxgate and other popular Python circuit breaker libraries. The goal is to highlight the different design philosophies and features to help you choose the best tool for your specific needs.</p>"},{"location":"about/comparison/#feature-comparison","title":"Feature Comparison","text":"Feature Fluxgate circuitbreaker pybreaker aiobreaker Async Support \u2705 \u2705 (Tornado only) \u2705 Primary Trigger Logic Failure Rate, Consecutive Failures Consecutive Failures Consecutive Failures Consecutive Failures Sliding Window \u2705 (Count or Time) \u274c \u274c \u274c Latency-Based Triggers \u2705 (<code>AvgLatency</code>, <code>SlowRate</code>) \u274c \u274c \u274c Composable Rules (&amp;, |) \u2705 \u274c \u274c \u274c Gradual Recovery (<code>RampUp</code>) \u2705 \u274c \u274c \u274c State Listeners \u2705 \u274c \u2705 \u2705 Built-in Monitoring \u2705 (Prometheus, Slack) \u274c \u274c \u274c External State Storage \u274c \u274c \u2705 (Redis) \u2705 (Redis)"},{"location":"about/comparison/#key-differences","title":"Key Differences","text":""},{"location":"about/comparison/#1-more-robust-triggering-logic","title":"1. More Robust Triggering Logic","text":"<p>Most libraries trip based on a simple consecutive failure count. This can be brittle; a single successful call can reset the counter to zero, even if the service is still unhealthy.</p> <p>Fluxgate uses a failure rate over a sliding window, which provides a much more accurate and stable assessment of service health. Additionally, Fluxgate supports <code>FailureStreak</code> for consecutive failure detection, which is useful for fast protection during cold start or complete service outage. You can combine both approaches for maximum resilience.</p> <ul> <li> <p>Other Libraries:</p> <pre><code># Opens after 5 failures in a row.\n@circuit(failure_threshold=5)\ndef call_api(): ...\n</code></pre> </li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\n\n# Opens if the failure rate exceeds 50%\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n)\n</code></pre> </li> </ul>"},{"location":"about/comparison/#2-composable-and-flexible-rules","title":"2. Composable and Flexible Rules","text":"<p>Fluxgate allows you to build sophisticated, fine-grained rules by combining simple components with logical operators (<code>&amp;</code>, <code>|</code>). Other libraries typically support only a single condition.</p> <ul> <li>Other Libraries: A single threshold.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\n\n# Use different rules for different states.\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n\n# Trip on high failure rate OR high slow-call rate.\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre> </li> </ul>"},{"location":"about/comparison/#3-latency-based-triggers","title":"3. Latency-Based Triggers","text":"<p>Fluxgate can trip based on response time, not just exceptions. This is critical for detecting service \"brownouts\" (where a service is slow but not failing).</p> <ul> <li>Other Libraries: Can only react to exceptions.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, AvgLatency, SlowRate\n\n# Trip when average latency is over 2 seconds.\ntripper = MinRequests(10) &amp; AvgLatency(2.0)\n\n# Trip when more than 30% of calls are slower than 1 second.\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; SlowRate(0.3),\n    slow_threshold=1.0,  # Defines what \"slow\" means\n)\n</code></pre> </li> </ul>"},{"location":"about/comparison/#4-gradual-recovery","title":"4. Gradual Recovery","text":"<p>When a service is recovering, you want to re-introduce traffic gradually to avoid overwhelming it. Fluxgate provides <code>RampUp</code> for this purpose. Other libraries typically only allow a single test call at a time.</p> <ul> <li>Other Libraries: Allow one call, then close the circuit if it succeeds.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate.permits import RampUp\n\n# Gradually increase traffic from 10% to 80% over 60 seconds.\ncb = CircuitBreaker(\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> </li> </ul>"},{"location":"about/comparison/#when-to-choose-each-library","title":"When to Choose Each Library","text":""},{"location":"about/comparison/#when-should-you-choose-fluxgate","title":"When should you choose <code>Fluxgate</code>?","text":"<p>You need the most robust and feature-rich circuit breaker.</p> <ul> <li>You want to trigger based on failure rates, latency, or consecutive failures (<code>FailureStreak</code>).</li> <li>You need complex, composable rules (e.g., different thresholds for different states).</li> <li>You want to gradually ramp up traffic during recovery.</li> <li>You are building a modern asyncio application.</li> <li>You value a fully type-hinted API for better developer experience.</li> </ul>"},{"location":"about/comparison/#when-should-you-choose-circuitbreaker","title":"When should you choose <code>circuitbreaker</code>?","text":"<p>You need a simple, reliable, and widely-used library for basic use cases.</p> <ul> <li>Triggering on consecutive failures is sufficient for your needs.</li> <li>You value simplicity and minimal configuration.</li> </ul>"},{"location":"about/comparison/#when-should-you-choose-pybreaker-or-aiobreaker","title":"When should you choose <code>pybreaker</code> or <code>aiobreaker</code>?","text":"<p>You have a hard requirement for sharing circuit breaker state across multiple processes or servers.</p> <ul> <li>Your architecture requires a distributed state store (Redis).</li> <li><code>pybreaker</code> is suitable for threaded or Tornado-based applications.</li> <li><code>aiobreaker</code> is the <code>asyncio</code> equivalent of <code>pybreaker</code>.</li> </ul>"},{"location":"about/comparison/#see-also","title":"See Also","text":"<ul> <li>Design &amp; Inspiration: Learn about the philosophy behind Fluxgate.</li> <li>Components Overview: Dive into the components that enable these features.</li> </ul>"},{"location":"about/design/","title":"Design &amp; Inspiration","text":"<p>This document explains the core design philosophy of Fluxgate, the projects that inspired it, and the rationale behind key architectural decisions.</p>"},{"location":"about/design/#the-name","title":"The Name","text":"<p>A fluxgate magnetometer is a sensor that detects changes in magnetic fields by monitoring saturation states and responding when a threshold is exceeded. This mirrors how a circuit breaker monitors a system's health and \"trips\" when a failure threshold is passed.</p>"},{"location":"about/design/#inspiration","title":"Inspiration","text":"<p>Fluxgate's design is heavily influenced by two fantastic, industry-proven projects.</p>"},{"location":"about/design/#resilience4j","title":"Resilience4j","text":"<p>Resilience4j is a lightweight, popular fault tolerance library for Java. Fluxgate borrows its most critical concept: the use of sliding windows for tracking service health.</p> <p>Unlike simpler patterns that only track consecutive failures, a sliding window (either count-based or time-based) provides a much more accurate and robust assessment of a service's health over a recent period.</p> <pre><code># Fluxgate's sliding window approach is directly inspired by Resilience4j.\nfrom fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # Tracks the last 100 calls.\nwindow = TimeWindow(size=60)    # Tracks calls in the last 60 seconds.\n</code></pre>"},{"location":"about/design/#django-rest-framework","title":"Django REST Framework","text":"<p>Django's permission system uses a brilliant and highly flexible pattern of composable objects combined with logical operators (<code>&amp;</code>, <code>|</code>, <code>~</code>).</p> <pre><code># In Django REST Framework, complex rules are built by combining simple permission classes.\nfrom rest_framework.permissions import IsAuthenticated, IsAdminUser\n\nclass MyView(APIView):\n    permission_classes = [IsAuthenticated &amp; IsAdminUser]\n</code></pre> <p>Fluxgate applies this exact same philosophy to its <code>Tracker</code> and <code>Tripper</code> components. Instead of forcing users to learn a complex configuration schema or use a clunky builder pattern, it provides simple, reusable building blocks that can be combined to create sophisticated rules.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# Complex tripping logic is created by combining simple trippers.\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre> <p>This composable approach is at the heart of Fluxgate's flexibility.</p>"},{"location":"about/design/#design-decisions","title":"Design Decisions","text":"<p>Fluxgate makes two intentional design choices that differ from some other libraries.</p>"},{"location":"about/design/#no-distributed-state-sharing","title":"No Distributed State Sharing","text":"<p>Fluxgate's circuit breakers manage their state entirely within the application's process. There is no built-in support for sharing state across multiple processes or servers (e.g., via Redis).</p> <p>This was a deliberate decision based on the core purpose of the circuit breaker pattern. The goal is to protect an application from repeatedly calling an unhealthy service. This can be achieved effectively without distributed state.</p> <ul> <li>Independent Assessment: If a downstream service is unhealthy, every instance of your application will naturally detect this through its own failed calls. The circuits will open independently and correctly on each server.</li> <li>Simplicity and Resilience: Adding a dependency on a distributed state store (like Redis) introduces a new network dependency, a new point of failure, and significant operational complexity. A failure in the state store could disable the entire circuit breaking mechanism.</li> <li>Performance: Relying on in-process memory is significantly faster than making a network call to check the state of the circuit on every request.</li> </ul> <p>By keeping state local, Fluxgate remains lightweight, fast, and resilient, with zero external dependencies.</p>"},{"location":"about/design/#circuitbreaker-is-not-thread-safe","title":"<code>CircuitBreaker</code> is Not Thread-Safe","text":"<p>For concurrent applications, Fluxgate strongly encourages using <code>AsyncCircuitBreaker</code> with <code>asyncio</code>, not multi-threading with <code>CircuitBreaker</code>.</p> <p>The standard <code>CircuitBreaker</code> class is not thread-safe. This is an intentional choice reflecting the current state of Python's concurrency ecosystem.</p> <ul> <li>Due to Python's Global Interpreter Lock (GIL), multi-threading is not an effective strategy for parallelizing CPU-bound code and offers limited benefits for I/O-bound code compared to <code>asyncio</code>.</li> <li>The modern Python ecosystem has overwhelmingly embraced <code>asyncio</code> for high-performance I/O-bound tasks. Web frameworks (FastAPI, Starlette, aiohttp), database drivers (asyncpg), and HTTP clients (httpx) are all built on the <code>asyncio</code> event loop.</li> <li><code>AsyncCircuitBreaker</code> is the natural, idiomatic, and most performant way to use a circuit breaker in these modern applications.</li> </ul> <p>Focusing on a first-class <code>asyncio</code> experience provides a safer, more efficient, and more future-proof library.</p>"},{"location":"about/design/#see-also","title":"See Also","text":"<ul> <li>Comparison: See how Fluxgate compares to other Python libraries.</li> <li>Components Overview: Dive into the components that make up the library.</li> </ul>"},{"location":"api/core/","title":"Core API","text":"<p>This page documents the main user-facing classes and exceptions. These are the primary entry points for using Fluxgate.</p>"},{"location":"api/core/#circuit-breaker-classes","title":"Circuit Breaker Classes","text":"<p>These are the main classes you will instantiate to create a circuit breaker.</p>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker","title":"fluxgate.circuitbreaker.CircuitBreaker","text":"<pre><code>CircuitBreaker(\n    name: str,\n    window: IWindow | None = None,\n    tracker: ITracker | None = None,\n    tripper: ITripper | None = None,\n    retry: IRetry | None = None,\n    permit: IPermit | None = None,\n    slow_threshold: float = 60.0,\n    listeners: Iterable[IListener] = (),\n)\n</code></pre> <p>Synchronous circuit breaker implementation.</p> <p>Protects your service from cascading failures by monitoring call failures and temporarily blocking calls when a failure threshold is reached.</p> <p>The circuit breaker operates in three main states:</p> <ul> <li>CLOSED: Normal operation, calls pass through</li> <li>OPEN: Failure threshold exceeded, calls are blocked</li> <li>HALF_OPEN: Testing if the service recovered, limited calls allowed</li> </ul> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Circuit breaker identifier</p> required <code>window</code> <code>IWindow | None</code> <p>Sliding window for metrics collection (default: CountWindow(100))</p> <code>None</code> <code>tracker</code> <code>ITracker | None</code> <p>Determines which exceptions to track as failures (default: All())</p> <code>None</code> <code>tripper</code> <code>ITripper | None</code> <p>Condition to open/close the circuit based on metrics (default: MinRequests(100) &amp; (FailureRate(0.5) | SlowRate(1.0)))</p> <code>None</code> <code>retry</code> <code>IRetry | None</code> <p>Strategy for transitioning from OPEN to HALF_OPEN (default: Cooldown(60.0))</p> <code>None</code> <code>permit</code> <code>IPermit | None</code> <p>Strategy for allowing calls in HALF_OPEN state (default: RampUp(0.0, 1.0, 60.0))</p> <code>None</code> <code>slow_threshold</code> <code>float</code> <p>Duration threshold in seconds to mark calls as slow (default: 60.0)</p> <code>60.0</code> <code>listeners</code> <code>Iterable[IListener]</code> <p>Event listeners for state transitions (default: empty)</p> <code>()</code> <p>Examples:</p> <p>Basic usage with defaults:</p> <pre><code>&gt;&gt;&gt; cb = CircuitBreaker(\"my-service\")\n&gt;&gt;&gt; @cb\n... def call_api():\n...     return requests.get(\"https://api.example.com\")\n</code></pre> <p>Custom configuration:</p> <pre><code>&gt;&gt;&gt; cb = CircuitBreaker(\n...     name=\"payment_api\",\n...     tracker=TypeOf(ConnectionError),\n...     tripper=MinRequests(10) &amp; FailureRate(0.5),\n...     slow_threshold=1.0,\n... )\n</code></pre> Note <p>This implementation is NOT thread-safe. Each process maintains its own independent circuit breaker state. For asyncio applications, use AsyncCircuitBreaker instead.</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    window: IWindow | None = None,\n    tracker: ITracker | None = None,\n    tripper: ITripper | None = None,\n    retry: IRetry | None = None,\n    permit: IPermit | None = None,\n    slow_threshold: float = 60.0,\n    listeners: Iterable[IListener] = (),\n) -&gt; None:\n    self._name = name\n    self._window = window or CountWindow(100)\n    self._tracker = tracker or All()\n    self._tripper = tripper or MinRequests(100) &amp; (FailureRate(0.5) | SlowRate(1.0))\n    self._retry = retry or Cooldown(60.0)\n    self._permit = permit or RampUp(0.0, 1.0, 60.0)\n    self._listeners = tuple(listeners)\n    self._slow_threshold = slow_threshold\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._consecutive_failures = 0\n    self._state: CircuitBreaker._State = self._Closed(self)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.__call__","title":"__call__","text":"<pre><code>__call__(func: Callable[P, R]) -&gt; Callable[P, R]\n</code></pre><pre><code>__call__(\n    func: None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[[Callable[P, R]], Callable[P, R]]\n</code></pre> <pre><code>__call__(\n    func: Callable[P, R] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, R]\n    | Callable[[Callable[P, R]], Callable[P, R]]\n)\n</code></pre> <p>Decorate a function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @cb\n... def api_call():\n...     return requests.get(\"https://api.example.com\")\n</code></pre> <pre><code>&gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n... def api_call():\n...     return requests.get(\"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R] | None</code> <p>Function to protect</p> <code>None</code> <code>fallback</code> <code>Callable[[Exception], R] | None</code> <p>Optional function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> <code>None</code> <p>Returns:</p> Type Description <code>Callable[P, R] | Callable[[Callable[P, R]], Callable[P, R]]</code> <p>Wrapped function with circuit breaker behavior</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN (if no fallback)</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __call__(\n    self,\n    func: Callable[P, R] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[P, R] | Callable[[Callable[P, R]], Callable[P, R]]:\n    \"\"\"Decorate a function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; @cb\n        ... def api_call():\n        ...     return requests.get(\"https://api.example.com\")\n\n        &gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n        ... def api_call():\n        ...     return requests.get(\"https://api.example.com\")\n\n    Args:\n        func: Function to protect\n        fallback: Optional function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n\n    Returns:\n        Wrapped function with circuit breaker behavior\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN (if no fallback)\n    \"\"\"\n\n    def decorator(f: Callable[P, R]) -&gt; Callable[P, R]:\n        @functools.wraps(f)\n        def wrapper(*args: P.args, **kwargs: P.kwargs) -&gt; R:\n            try:\n                return self._state.execute(f, *args, **kwargs)\n            except Exception as e:\n                if fallback is not None:\n                    return fallback(e)\n                raise\n\n        return wrapper\n\n    if func is not None:\n        return decorator(func)\n    return decorator\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.call","title":"call","text":"<pre><code>call(\n    func: Callable[P, R], /, *args: args, **kwargs: kwargs\n) -&gt; R\n</code></pre> <p>Execute a function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; cb.call(requests.get, \"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R]</code> <p>Function to execute</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def call(\n    self,\n    func: Callable[P, R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute a function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; cb.call(requests.get, \"https://api.example.com\")\n\n    Args:\n        func: Function to execute\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN\n    \"\"\"\n    return self._state.execute(func, *args, **kwargs)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.call_with_fallback","title":"call_with_fallback","text":"<pre><code>call_with_fallback(\n    func: Callable[P, R],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute a function with circuit breaker protection and fallback.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; cb.call_with_fallback(fetch_data, lambda e: cached_data)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, R]</code> <p>Function to execute</p> required <code>fallback</code> <code>Callable[[Exception], R]</code> <p>Function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result or fallback result</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def call_with_fallback(\n    self,\n    func: Callable[P, R],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute a function with circuit breaker protection and fallback.\n\n    Examples:\n        &gt;&gt;&gt; cb.call_with_fallback(fetch_data, lambda e: cached_data)\n\n    Args:\n        func: Function to execute\n        fallback: Function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result or fallback result\n    \"\"\"\n    try:\n        return self._state.execute(func, *args, **kwargs)\n    except Exception as e:\n        return fallback(e)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.info","title":"info","text":"<pre><code>info() -&gt; CircuitBreakerInfo\n</code></pre> <p>Get current circuit breaker state and metrics.</p> <p>Returns:</p> Type Description <code>CircuitBreakerInfo</code> <p>Dictionary with circuit breaker state information</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def info(self) -&gt; CircuitBreakerInfo:\n    \"\"\"Get current circuit breaker state and metrics.\n\n    Returns:\n        Dictionary with circuit breaker state information\n    \"\"\"\n    return CircuitBreakerInfo(\n        name=self._name,\n        state=self._state.get_state_enum().value,\n        changed_at=self._changed_at,\n        reopens=self._reopens,\n        metrics=self._window.get_metric(),\n    )\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.reset","title":"reset","text":"<pre><code>reset(notify: bool = True) -&gt; None\n</code></pre> <p>Reset circuit breaker to CLOSED state and clear metrics.</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def reset(self, notify: bool = True) -&gt; None:\n    \"\"\"Reset circuit breaker to CLOSED state and clear metrics.\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    current_state = self._state.get_state_enum()\n    self._state = self._Closed(self)\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._consecutive_failures = 0\n    self._window.reset()\n\n    if notify:\n        signal = Signal(\n            circuit_name=self._name,\n            old_state=current_state,\n            new_state=StateEnum.CLOSED,\n            timestamp=self._changed_at,\n        )\n        self._notify(signal)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.disable","title":"disable","text":"<pre><code>disable(notify: bool = True) -&gt; None\n</code></pre> <p>Disable circuit breaker (all calls pass through without tracking).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def disable(self, notify: bool = True) -&gt; None:\n    \"\"\"Disable circuit breaker (all calls pass through without tracking).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.DISABLED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.metrics_only","title":"metrics_only","text":"<pre><code>metrics_only(notify: bool = True) -&gt; None\n</code></pre> <p>Enable metrics-only mode (track metrics but never open circuit).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def metrics_only(self, notify: bool = True) -&gt; None:\n    \"\"\"Enable metrics-only mode (track metrics but never open circuit).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.METRICS_ONLY, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.CircuitBreaker.force_open","title":"force_open","text":"<pre><code>force_open(notify: bool = True) -&gt; None\n</code></pre> <p>Force circuit breaker to OPEN state (all calls blocked).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def force_open(self, notify: bool = True) -&gt; None:\n    \"\"\"Force circuit breaker to OPEN state (all calls blocked).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    self._transition_to(StateEnum.FORCED_OPEN, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker","title":"fluxgate.circuitbreaker.AsyncCircuitBreaker","text":"<pre><code>AsyncCircuitBreaker(\n    name: str,\n    window: IWindow | None = None,\n    tracker: ITracker | None = None,\n    tripper: ITripper | None = None,\n    retry: IRetry | None = None,\n    permit: IPermit | None = None,\n    slow_threshold: float = 60.0,\n    max_half_open_calls: int = 10,\n    listeners: Iterable[IListener | IAsyncListener] = (),\n)\n</code></pre> <p>Asynchronous circuit breaker implementation for asyncio applications.</p> <p>Thread-safe circuit breaker with async/await support. Uses asyncio locks to coordinate state transitions and metric updates across concurrent tasks.</p> <p>The circuit breaker operates in three main states:</p> <ul> <li>CLOSED: Normal operation, calls pass through</li> <li>OPEN: Failure threshold exceeded, calls are blocked</li> <li>HALF_OPEN: Testing if the service recovered, limited calls allowed</li> </ul> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Circuit breaker identifier</p> required <code>window</code> <code>IWindow | None</code> <p>Sliding window for metrics collection (default: CountWindow(100))</p> <code>None</code> <code>tracker</code> <code>ITracker | None</code> <p>Determines which exceptions to track as failures (default: All())</p> <code>None</code> <code>tripper</code> <code>ITripper | None</code> <p>Condition to open/close the circuit based on metrics (default: MinRequests(100) &amp; (FailureRate(0.5) | SlowRate(1.0)))</p> <code>None</code> <code>retry</code> <code>IRetry | None</code> <p>Strategy for transitioning from OPEN to HALF_OPEN (default: Cooldown(60.0))</p> <code>None</code> <code>permit</code> <code>IPermit | None</code> <p>Strategy for allowing calls in HALF_OPEN state (default: RampUp(0.0, 1.0, 60.0))</p> <code>None</code> <code>slow_threshold</code> <code>float</code> <p>Duration threshold in seconds to mark calls as slow (default: 60.0)</p> <code>60.0</code> <code>max_half_open_calls</code> <code>int</code> <p>Maximum concurrent calls allowed in HALF_OPEN state (default: 10)</p> <code>10</code> <code>listeners</code> <code>Iterable[IListener | IAsyncListener]</code> <p>Event listeners for state transitions (default: empty)</p> <code>()</code> <p>Examples:</p> <p>Basic usage with defaults:</p> <pre><code>&gt;&gt;&gt; cb = AsyncCircuitBreaker(\"my-service\")\n&gt;&gt;&gt; @cb\n... async def call_api():\n...     async with httpx.AsyncClient() as client:\n...         return await client.get(\"https://api.example.com\")\n</code></pre> <p>Custom configuration:</p> <pre><code>&gt;&gt;&gt; cb = AsyncCircuitBreaker(\n...     name=\"payment_api\",\n...     tracker=TypeOf(httpx.ConnectError),\n...     tripper=MinRequests(10) &amp; FailureRate(0.5),\n...     slow_threshold=1.0,\n... )\n</code></pre> Note <p>Uses asyncio locks for thread safety within a single event loop. Each process maintains its own independent circuit breaker state.</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __init__(\n    self,\n    name: str,\n    window: IWindow | None = None,\n    tracker: ITracker | None = None,\n    tripper: ITripper | None = None,\n    retry: IRetry | None = None,\n    permit: IPermit | None = None,\n    slow_threshold: float = 60.0,\n    max_half_open_calls: int = 10,\n    listeners: Iterable[IListener | IAsyncListener] = (),\n) -&gt; None:\n    self._name = name\n    self._window = window or CountWindow(100)\n    self._tracker = tracker or All()\n    self._tripper = tripper or MinRequests(100) &amp; (FailureRate(0.5) | SlowRate(1.0))\n    self._retry = retry or Cooldown(60.0)\n    self._permit = permit or RampUp(0.0, 1.0, 60.0)\n    self._listeners = tuple(listeners)\n    self._slow_threshold = slow_threshold\n    self._changed_at = time.time()\n    self._reopens = 0\n    self._consecutive_failures = 0\n    self._state: AsyncCircuitBreaker._State = self._Closed(self)\n    self._state_lock = asyncio.Lock()\n    self._half_open_semaphore = asyncio.Semaphore(max_half_open_calls)\n    self._window_lock = asyncio.Lock()\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.__call__","title":"__call__","text":"<pre><code>__call__(\n    func: Callable[P, Awaitable[R]],\n) -&gt; Callable[P, Awaitable[R]]\n</code></pre><pre><code>__call__(\n    func: None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; Callable[\n    [Callable[P, Awaitable[R]]],\n    Callable[P, Awaitable[R]],\n]\n</code></pre> <pre><code>__call__(\n    func: Callable[P, Awaitable[R]] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, Awaitable[R]]\n    | Callable[\n        [Callable[P, Awaitable[R]]],\n        Callable[P, Awaitable[R]],\n    ]\n)\n</code></pre> <p>Decorate an awaitable function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @cb\n... async def api_call():\n...     async with httpx.AsyncClient() as client:\n...         return await client.get(\"https://api.example.com\")\n</code></pre> <pre><code>&gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n... async def api_call():\n...     return await fetch_data()\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]] | None</code> <p>Awaitable function to protect</p> <code>None</code> <code>fallback</code> <code>Callable[[Exception], R] | None</code> <p>Optional function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> <code>None</code> <p>Returns:</p> Type Description <code>Callable[P, Awaitable[R]] | Callable[[Callable[P, Awaitable[R]]], Callable[P, Awaitable[R]]]</code> <p>Wrapped awaitable function with circuit breaker behavior</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN (if no fallback)</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def __call__(\n    self,\n    func: Callable[P, Awaitable[R]] | None = None,\n    *,\n    fallback: Callable[[Exception], R] | None = None,\n) -&gt; (\n    Callable[P, Awaitable[R]]\n    | Callable[[Callable[P, Awaitable[R]]], Callable[P, Awaitable[R]]]\n):\n    \"\"\"Decorate an awaitable function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; @cb\n        ... async def api_call():\n        ...     async with httpx.AsyncClient() as client:\n        ...         return await client.get(\"https://api.example.com\")\n\n        &gt;&gt;&gt; @cb(fallback=lambda e: cached_value)\n        ... async def api_call():\n        ...     return await fetch_data()\n\n    Args:\n        func: Awaitable function to protect\n        fallback: Optional function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n\n    Returns:\n        Wrapped awaitable function with circuit breaker behavior\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN (if no fallback)\n    \"\"\"\n\n    def decorator(\n        f: Callable[P, Awaitable[R]],\n    ) -&gt; Callable[P, Awaitable[R]]:\n        @functools.wraps(f)\n        async def wrapper(*args: P.args, **kwargs: P.kwargs) -&gt; R:\n            try:\n                return await self._state.execute(f, *args, **kwargs)\n            except Exception as e:\n                if fallback is not None:\n                    return fallback(e)\n                raise\n\n        return wrapper\n\n    if func is not None:\n        return decorator(func)\n    return decorator\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.call","title":"call  <code>async</code>","text":"<pre><code>call(\n    func: Callable[P, Awaitable[R]],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute an awaitable function with circuit breaker protection.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; await cb.call(client.get, \"https://api.example.com\")\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]]</code> <p>Awaitable function to execute</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result</p> <p>Raises:</p> Type Description <code>CallNotPermittedError</code> <p>When circuit is OPEN or FORCED_OPEN</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def call(\n    self,\n    func: Callable[P, Awaitable[R]],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute an awaitable function with circuit breaker protection.\n\n    Examples:\n        &gt;&gt;&gt; await cb.call(client.get, \"https://api.example.com\")\n\n    Args:\n        func: Awaitable function to execute\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result\n\n    Raises:\n        CallNotPermittedError: When circuit is OPEN or FORCED_OPEN\n    \"\"\"\n    return await self._state.execute(func, *args, **kwargs)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.call_with_fallback","title":"call_with_fallback  <code>async</code>","text":"<pre><code>call_with_fallback(\n    func: Callable[P, Awaitable[R]],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: args,\n    **kwargs: kwargs,\n) -&gt; R\n</code></pre> <p>Execute an awaitable function with circuit breaker protection and fallback.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; await cb.call_with_fallback(fetch_data, lambda e: cached_data)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[P, Awaitable[R]]</code> <p>Awaitable function to execute</p> required <code>fallback</code> <code>Callable[[Exception], R]</code> <p>Function to call on exception. Receives the exception as argument and should return a fallback value or re-raise.</p> required <code>*args</code> <code>args</code> <p>Positional arguments for the function</p> <code>()</code> <code>**kwargs</code> <code>kwargs</code> <p>Keyword arguments for the function</p> <code>{}</code> <p>Returns:</p> Type Description <code>R</code> <p>Function result or fallback result</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def call_with_fallback(\n    self,\n    func: Callable[P, Awaitable[R]],\n    fallback: Callable[[Exception], R],\n    /,\n    *args: P.args,\n    **kwargs: P.kwargs,\n) -&gt; R:\n    \"\"\"Execute an awaitable function with circuit breaker protection and fallback.\n\n    Examples:\n        &gt;&gt;&gt; await cb.call_with_fallback(fetch_data, lambda e: cached_data)\n\n    Args:\n        func: Awaitable function to execute\n        fallback: Function to call on exception. Receives the exception\n            as argument and should return a fallback value or re-raise.\n        *args: Positional arguments for the function\n        **kwargs: Keyword arguments for the function\n\n    Returns:\n        Function result or fallback result\n    \"\"\"\n    try:\n        return await self._state.execute(func, *args, **kwargs)\n    except Exception as e:\n        return fallback(e)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.info","title":"info","text":"<pre><code>info() -&gt; CircuitBreakerInfo\n</code></pre> <p>Get current circuit breaker state and metrics.</p> <p>Returns:</p> Type Description <code>CircuitBreakerInfo</code> <p>Dictionary with circuit breaker state information</p> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>def info(self) -&gt; CircuitBreakerInfo:\n    \"\"\"Get current circuit breaker state and metrics.\n\n    Returns:\n        Dictionary with circuit breaker state information\n    \"\"\"\n    return CircuitBreakerInfo(\n        name=self._name,\n        state=self._state.get_state_enum().value,\n        changed_at=self._changed_at,\n        reopens=self._reopens,\n        metrics=self._window.get_metric(),\n    )\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.reset","title":"reset  <code>async</code>","text":"<pre><code>reset(notify: bool = True) -&gt; None\n</code></pre> <p>Reset circuit breaker to CLOSED state and clear metrics.</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def reset(self, notify: bool = True) -&gt; None:\n    \"\"\"Reset circuit breaker to CLOSED state and clear metrics.\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.CLOSED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.disable","title":"disable  <code>async</code>","text":"<pre><code>disable(notify: bool = True) -&gt; None\n</code></pre> <p>Disable circuit breaker (all calls pass through without tracking).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def disable(self, notify: bool = True) -&gt; None:\n    \"\"\"Disable circuit breaker (all calls pass through without tracking).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.DISABLED, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.metrics_only","title":"metrics_only  <code>async</code>","text":"<pre><code>metrics_only(notify: bool = True) -&gt; None\n</code></pre> <p>Enable metrics-only mode (track metrics but never open circuit).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def metrics_only(self, notify: bool = True) -&gt; None:\n    \"\"\"Enable metrics-only mode (track metrics but never open circuit).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.METRICS_ONLY, notify)\n</code></pre>"},{"location":"api/core/#fluxgate.circuitbreaker.AsyncCircuitBreaker.force_open","title":"force_open  <code>async</code>","text":"<pre><code>force_open(notify: bool = True) -&gt; None\n</code></pre> <p>Force circuit breaker to OPEN state (all calls blocked).</p> <p>Parameters:</p> Name Type Description Default <code>notify</code> <code>bool</code> <p>Whether to notify listeners of the state change</p> <code>True</code> Source code in <code>fluxgate/circuitbreaker.py</code> <pre><code>async def force_open(self, notify: bool = True) -&gt; None:\n    \"\"\"Force circuit breaker to OPEN state (all calls blocked).\n\n    Args:\n        notify: Whether to notify listeners of the state change\n    \"\"\"\n    async with self._state_lock:\n        await self._transition_to(StateEnum.FORCED_OPEN, notify)\n</code></pre>"},{"location":"api/core/#states-and-exceptions","title":"States and Exceptions","text":"<p>These are the enums and exceptions you will most commonly interact with.</p>"},{"location":"api/core/#fluxgate.state.StateEnum","title":"fluxgate.state.StateEnum","text":"<p>               Bases: <code>Enum</code></p>"},{"location":"api/core/#fluxgate.state.StateEnum.CLOSED","title":"CLOSED  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CLOSED = 'closed'\n</code></pre>"},{"location":"api/core/#fluxgate.state.StateEnum.OPEN","title":"OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>OPEN = 'open'\n</code></pre>"},{"location":"api/core/#fluxgate.state.StateEnum.HALF_OPEN","title":"HALF_OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>HALF_OPEN = 'half_open'\n</code></pre>"},{"location":"api/core/#fluxgate.state.StateEnum.METRICS_ONLY","title":"METRICS_ONLY  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>METRICS_ONLY = 'metrics_only'\n</code></pre>"},{"location":"api/core/#fluxgate.state.StateEnum.DISABLED","title":"DISABLED  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>DISABLED = 'disabled'\n</code></pre>"},{"location":"api/core/#fluxgate.state.StateEnum.FORCED_OPEN","title":"FORCED_OPEN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>FORCED_OPEN = 'forced_open'\n</code></pre>"},{"location":"api/core/#fluxgate.errors.CallNotPermittedError","title":"fluxgate.errors.CallNotPermittedError","text":"<pre><code>CallNotPermittedError(message: str)\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Raised when a call is not permitted due to circuit breaker state.</p> Source code in <code>fluxgate/errors.py</code> <pre><code>def __init__(self, message: str) -&gt; None:\n    super().__init__(message)\n    self.message = message\n</code></pre>"},{"location":"api/core/#fluxgate.errors.CallNotPermittedError.message","title":"message  <code>instance-attribute</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/interfaces/","title":"API: Interfaces","text":"<p>This page documents the core interfaces that define the behavior of Fluxgate's components. You can implement these interfaces to create your own custom components (windows, trackers, trippers, retries, permits, and listeners).</p>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow","title":"fluxgate.interfaces.IWindow","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def record(self, record: Record) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def get_metric(self) -&gt; Metric: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def reset(self) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker","title":"fluxgate.interfaces.ITracker","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__and__","title":"__and__","text":"<pre><code>__and__(other: Self) -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __and__(self, other: Self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__or__","title":"__or__","text":"<pre><code>__or__(other: Self) -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __or__(self, other: Self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITracker.__invert__","title":"__invert__","text":"<pre><code>__invert__() -&gt; ITracker\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __invert__(self) -&gt; ITracker: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper","title":"fluxgate.interfaces.ITripper","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__call__","title":"__call__","text":"<pre><code>__call__(\n    metric: Metric,\n    state: StateEnum,\n    consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(\n    self, metric: Metric, state: StateEnum, consecutive_failures: int\n) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__and__","title":"__and__","text":"<pre><code>__and__(other: Self) -&gt; ITripper\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __and__(self, other: Self) -&gt; ITripper: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.ITripper.__or__","title":"__or__","text":"<pre><code>__or__(other: Self) -&gt; ITripper\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __or__(self, other: Self) -&gt; ITripper: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IRetry","title":"fluxgate.interfaces.IRetry","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IRetry.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, changed_at: float, reopens: int) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IPermit","title":"fluxgate.interfaces.IPermit","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IPermit.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, changed_at: float) -&gt; bool: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IListener","title":"fluxgate.interfaces.IListener","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None: ...\n</code></pre>"},{"location":"api/interfaces/#fluxgate.interfaces.IAsyncListener","title":"fluxgate.interfaces.IAsyncListener","text":"<p>               Bases: <code>Protocol</code></p>"},{"location":"api/interfaces/#fluxgate.interfaces.IAsyncListener.__call__","title":"__call__  <code>async</code>","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/interfaces.py</code> <pre><code>async def __call__(self, signal: Signal) -&gt; None: ...\n</code></pre>"},{"location":"api/listeners/","title":"API: Listeners","text":"<p>This page documents the available listener implementations. Listeners allow you to react to circuit breaker state changes by integrating with logging, monitoring, and alerting systems.</p> <p>For a high-level guide on using and customizing listeners, see the Listeners Component Guide.</p>"},{"location":"api/listeners/#logging-listener","title":"Logging Listener","text":""},{"location":"api/listeners/#fluxgate.listeners.log.LogListener","title":"fluxgate.listeners.log.LogListener","text":"<pre><code>LogListener(\n    logger: Logger | None = None,\n    level_map: dict[StateEnum, int] | None = None,\n)\n</code></pre> <p>               Bases: <code>IListener</code></p> <p>Listener that logs circuit breaker state transitions.</p> <p>Logs state changes using Python's standard logging module. Works with both CircuitBreaker and AsyncCircuitBreaker.</p> <p>Parameters:</p> Name Type Description Default <code>logger</code> <code>Logger | None</code> <p>Custom logger instance. If None, uses the root logger.</p> <code>None</code> <code>level_map</code> <code>dict[StateEnum, int] | None</code> <p>Mapping from new_state to log level (logging.INFO, etc.). Default levels: OPEN/FORCED_OPEN -&gt; WARNING, others -&gt; INFO.</p> <code>None</code> Note <p>logging methods are thread-safe and can be safely used in async contexts.</p> <p>Examples:</p> <p>Basic usage with default logger:</p> <pre><code>&gt;&gt;&gt; import logging\n&gt;&gt;&gt; from fluxgate import CircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.log import LogListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; logging.basicConfig(level=logging.INFO)\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre> <p>With custom logger:</p> <pre><code>&gt;&gt;&gt; logger = logging.getLogger(\"my_app.circuit_breaker\")\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[LogListener(logger=logger)])\n</code></pre> <p>With custom level_map:</p> <pre><code>&gt;&gt;&gt; from fluxgate.state import StateEnum\n&gt;&gt;&gt; level_map = {\n...     StateEnum.OPEN: logging.ERROR,\n...     StateEnum.HALF_OPEN: logging.WARNING,\n...     StateEnum.CLOSED: logging.DEBUG,\n... }\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[LogListener(level_map=level_map)])\n</code></pre> Source code in <code>fluxgate/listeners/log.py</code> <pre><code>def __init__(\n    self,\n    logger: logging.Logger | None = None,\n    level_map: dict[StateEnum, int] | None = None,\n) -&gt; None:\n    self._logger = logger or logging.getLogger()\n    self._level_map = {**self.DEFAULT_LEVEL_MAP, **(level_map or {})}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.log.LogListener.DEFAULT_LEVEL_MAP","title":"DEFAULT_LEVEL_MAP  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>DEFAULT_LEVEL_MAP: dict[StateEnum, int] = {\n    CLOSED: INFO,\n    OPEN: WARNING,\n    HALF_OPEN: INFO,\n    METRICS_ONLY: INFO,\n    DISABLED: INFO,\n    FORCED_OPEN: WARNING,\n}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.log.LogListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/log.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    timestamp = time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(signal.timestamp))\n    level = self._level_map.get(signal.new_state, logging.INFO)\n    self._logger.log(\n        level,\n        \"[%s] Circuit Breaker '%s' transitioned from %s to %s\",\n        timestamp,\n        signal.circuit_name,\n        signal.old_state.value,\n        signal.new_state.value,\n    )\n</code></pre>"},{"location":"api/listeners/#prometheus-listeners","title":"Prometheus Listeners","text":""},{"location":"api/listeners/#fluxgate.listeners.prometheus.PrometheusListener","title":"fluxgate.listeners.prometheus.PrometheusListener","text":"<p>               Bases: <code>IListener</code></p> <p>Listener that exports circuit breaker metrics to Prometheus.</p> <p>Exports two metrics:</p> <ul> <li>circuit_breaker_state: Gauge showing current state (0 or 1 for each state)</li> <li>circuit_breaker_state_transition: Counter of state transitions</li> </ul> <p>Works with both CircuitBreaker and AsyncCircuitBreaker.</p> Note <p>prometheus_client is thread-safe and can be safely used in async contexts.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from prometheus_client import start_http_server\n&gt;&gt;&gt; from fluxgate import CircuitBreaker, AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.prometheus import PrometheusListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; start_http_server(8000)\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[PrometheusListener()])\n&gt;&gt;&gt; async_cb = AsyncCircuitBreaker(..., listeners=[PrometheusListener()])\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Metrics available at http://localhost:8000/metrics\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.prometheus.PrometheusListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/prometheus.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    for state in StateEnum:\n        _STATE_GAUGE.labels(\n            circuit_name=signal.circuit_name,\n            state=state.value,\n        ).set(1 if state == signal.new_state else 0)\n    _STATE_TRANSITION.labels(\n        circuit_name=signal.circuit_name,\n        old_state=signal.old_state.value,\n        new_state=signal.new_state.value,\n    ).inc()\n</code></pre>"},{"location":"api/listeners/#slack-listeners","title":"Slack Listeners","text":""},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener","title":"fluxgate.listeners.slack.SlackListener","text":"<pre><code>SlackListener(channel: str, token: str)\n</code></pre> <p>               Bases: <code>IListener</code></p> <p>Listener that sends circuit breaker state transitions to Slack.</p> <p>Posts formatted messages to a Slack channel when state transitions occur. Groups related transitions into threads based on failure cycles:</p> <ul> <li>Thread starts on \u2192 OPEN (new or continued failure cycle)</li> <li>Thread ends on \u2192 CLOSED, DISABLED, or METRICS_ONLY</li> </ul> <p>Parameters:</p> Name Type Description Default <code>channel</code> <code>str</code> <p>Slack channel ID (e.g., \"C1234567890\") or name (e.g., \"#alerts\")</p> required <code>token</code> <code>str</code> <p>Slack bot token with chat:write permissions</p> required Class Attributes <p>TRANSITION_TEMPLATES: Override to customize messages for specific transitions. FALLBACK_TEMPLATE: Override to customize the default message for other transitions.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from fluxgate import CircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.slack import SlackListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; listener = SlackListener(\n...     channel=\"C1234567890\",\n...     token=\"xoxb-your-slack-bot-token\"\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = CircuitBreaker(..., listeners=[listener])\n</code></pre> <p>To customize messages (e.g., for Korean):</p> <pre><code>&gt;&gt;&gt; class KoreanSlackListener(SlackListener):\n...     TRANSITION_TEMPLATES = {\n...         (StateEnum.CLOSED, StateEnum.OPEN): {\n...             \"title\": \"\ud83d\udea8 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc791\ub3d9\",\n...             \"color\": \"#FF4C4C\",\n...             \"description\": \"\uc694\uccad \uc2e4\ud328\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4.\",\n...         },\n...         # ... other transitions\n...     }\n...     FALLBACK_TEMPLATE = {\n...         \"title\": \"\u2139\ufe0f \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc \ubcc0\uacbd\",\n...         \"color\": \"#808080\",\n...         \"description\": \"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\",\n...     }\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __init__(self, channel: str, token: str) -&gt; None:\n    self._channel = channel\n    self._token = token\n    self._client = httpx.Client(\n        headers={\"Authorization\": f\"Bearer {token}\"},\n        timeout=5.0,\n    )\n    self._open_threads: dict[str, str] = {}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener.TRANSITION_TEMPLATES","title":"TRANSITION_TEMPLATES  <code>class-attribute</code>","text":"<pre><code>TRANSITION_TEMPLATES: dict[\n    tuple[StateEnum, StateEnum], Template\n] = _DEFAULT_TRANSITION_TEMPLATES\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener.FALLBACK_TEMPLATE","title":"FALLBACK_TEMPLATE  <code>class-attribute</code>","text":"<pre><code>FALLBACK_TEMPLATE: Template = _DEFAULT_FALLBACK_TEMPLATE\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.SlackListener.__call__","title":"__call__","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __call__(self, signal: Signal) -&gt; None:\n    template = self._get_template(signal.old_state, signal.new_state)\n    message = _build_message(\n        channel=self._channel,\n        signal=signal,\n        template=template,\n        thread=self._open_threads.get(signal.circuit_name),\n    )\n    response = self._client.post(\n        \"https://slack.com/api/chat.postMessage\", json=message\n    )\n    response.raise_for_status()\n    data = response.json()\n    ts = data.get(\"ts\")\n    if not data.get(\"ok\") or not ts:\n        raise RuntimeError(f\"Failed to send message: {data.get('error')}\")\n    if signal.new_state == StateEnum.OPEN:\n        self._open_threads.setdefault(signal.circuit_name, ts)\n    elif signal.new_state in (\n        StateEnum.CLOSED,\n        StateEnum.DISABLED,\n        StateEnum.METRICS_ONLY,\n    ):\n        self._open_threads.pop(signal.circuit_name, None)\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener","title":"fluxgate.listeners.slack.AsyncSlackListener","text":"<pre><code>AsyncSlackListener(channel: str, token: str)\n</code></pre> <p>               Bases: <code>IAsyncListener</code></p> <p>Async listener that sends circuit breaker state transitions to Slack.</p> <p>Posts formatted messages to a Slack channel when state transitions occur. Groups related transitions into threads based on failure cycles:</p> <ul> <li>Thread starts on \u2192 OPEN (new or continued failure cycle)</li> <li>Thread ends on \u2192 CLOSED, DISABLED, or METRICS_ONLY</li> </ul> <p>Parameters:</p> Name Type Description Default <code>channel</code> <code>str</code> <p>Slack channel ID (e.g., \"C1234567890\") or name (e.g., \"#alerts\")</p> required <code>token</code> <code>str</code> <p>Slack bot token with chat:write permissions</p> required Class Attributes <p>TRANSITION_TEMPLATES: Override to customize messages for specific transitions. FALLBACK_TEMPLATE: Override to customize the default message for other transitions.</p> Note <p>Uses httpx for async HTTP requests.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from fluxgate import AsyncCircuitBreaker\n&gt;&gt;&gt; from fluxgate.listeners.slack import AsyncSlackListener\n&gt;&gt;&gt;\n&gt;&gt;&gt; listener = AsyncSlackListener(\n...     channel=\"C1234567890\",\n...     token=\"xoxb-your-slack-bot-token\"\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; cb = AsyncCircuitBreaker(..., listeners=[listener])\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>def __init__(self, channel: str, token: str) -&gt; None:\n    self._channel = channel\n    self._token = token\n    self._client = httpx.AsyncClient(\n        headers={\"Authorization\": f\"Bearer {token}\"},\n        timeout=5.0,\n    )\n    self._open_threads: dict[str, str] = {}\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener.TRANSITION_TEMPLATES","title":"TRANSITION_TEMPLATES  <code>class-attribute</code>","text":"<pre><code>TRANSITION_TEMPLATES: dict[\n    tuple[StateEnum, StateEnum], Template\n] = TRANSITION_TEMPLATES\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener.FALLBACK_TEMPLATE","title":"FALLBACK_TEMPLATE  <code>class-attribute</code>","text":"<pre><code>FALLBACK_TEMPLATE: Template = FALLBACK_TEMPLATE\n</code></pre>"},{"location":"api/listeners/#fluxgate.listeners.slack.AsyncSlackListener.__call__","title":"__call__  <code>async</code>","text":"<pre><code>__call__(signal: Signal) -&gt; None\n</code></pre> Source code in <code>fluxgate/listeners/slack.py</code> <pre><code>async def __call__(self, signal: Signal) -&gt; None:\n    template = self._get_template(signal.old_state, signal.new_state)\n    message = _build_message(\n        channel=self._channel,\n        signal=signal,\n        template=template,\n        thread=self._open_threads.get(signal.circuit_name),\n    )\n    response = await self._client.post(\n        \"https://slack.com/api/chat.postMessage\", json=message\n    )\n    response.raise_for_status()\n    data = response.json()\n    ts = data.get(\"ts\")\n    if not data.get(\"ok\") or not ts:\n        raise RuntimeError(f\"Failed to send message: {data.get('error')}\")\n    if signal.new_state == StateEnum.OPEN:\n        self._open_threads.setdefault(signal.circuit_name, ts)\n    elif signal.new_state in (\n        StateEnum.CLOSED,\n        StateEnum.DISABLED,\n        StateEnum.METRICS_ONLY,\n    ):\n        self._open_threads.pop(signal.circuit_name, None)\n</code></pre>"},{"location":"api/permits/","title":"API: Permits","text":"<p>This page documents the available recovery permit strategies. Permit strategies control how many \"probe\" calls are allowed to pass through during the <code>HALF_OPEN</code> state to test for service recovery.</p> <p>For a high-level guide on choosing a permit strategy, see the Permits Component Guide.</p>"},{"location":"api/permits/#fluxgate.permits.All","title":"fluxgate.permits.All","text":"<p>               Bases: <code>IPermit</code></p> <p>Permit strategy that always allows calls.</p> <p>Useful for testing or when you want all calls to pass through in HALF_OPEN state.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; permit = All()\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.All.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/permits.py</code> <pre><code>def __call__(self, _changed_at: float) -&gt; bool:\n    return True\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.Random","title":"fluxgate.permits.Random","text":"<pre><code>Random(ratio: float)\n</code></pre> <p>               Bases: <code>IPermit</code></p> <p>Permit strategy with random sampling in HALF_OPEN state.</p> <p>Allows calls randomly based on a fixed probability ratio. Simple and effective for limiting concurrent calls during recovery.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Allow 50% of calls in HALF_OPEN state\n&gt;&gt;&gt; permit = Random(ratio=0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Probability of allowing a call (0.0 to 1.0)</p> required Source code in <code>fluxgate/permits.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if not (0.0 &lt;= ratio &lt;= 1.0):\n        raise ValueError(\"Ratio must be between 0.0 and 1.0\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.Random.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/permits.py</code> <pre><code>def __call__(self, _changed_at: float) -&gt; bool:\n    return random() &lt; self._ratio\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.RampUp","title":"fluxgate.permits.RampUp","text":"<pre><code>RampUp(initial: float, final: float, duration: float)\n</code></pre> <p>               Bases: <code>IPermit</code></p> <p>Permit strategy that gradually increases allowed traffic over time.</p> <p>Starts with a low permit ratio and gradually increases to the final ratio over the specified duration. Useful for smooth recovery without sudden load spikes.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Start at 10%, ramp up to 80% over 60 seconds\n&gt;&gt;&gt; permit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>initial</code> <code>float</code> <p>Initial permit ratio (0.0 to 1.0)</p> required <code>final</code> <code>float</code> <p>Final permit ratio (0.0 to 1.0, must be &gt;= initial)</p> required <code>duration</code> <code>float</code> <p>Ramp-up duration in seconds</p> required Source code in <code>fluxgate/permits.py</code> <pre><code>def __init__(self, initial: float, final: float, duration: float) -&gt; None:\n    if not (0.0 &lt;= initial &lt;= final &lt;= 1.0):\n        raise ValueError(\"Initial and final must be between 0.0 and 1.0\")\n    if duration &lt;= 0:\n        raise ValueError(\"Duration must be greater than zero\")\n    self._initial = initial\n    self._final = final\n    self._duration = duration\n</code></pre>"},{"location":"api/permits/#fluxgate.permits.RampUp.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float) -&gt; bool\n</code></pre> Source code in <code>fluxgate/permits.py</code> <pre><code>def __call__(self, changed_at: float) -&gt; bool:\n    elapsed = time() - changed_at\n    if elapsed &gt;= self._duration:\n        return random() &lt; self._final\n    ratio = self._initial + (self._final - self._initial) * (\n        elapsed / self._duration\n    )\n    return random() &lt; ratio\n</code></pre>"},{"location":"api/retries/","title":"API: Retries","text":"<p>This page documents the available recovery retry strategies. Retry strategies determine when the circuit breaker should attempt to recover by moving from the <code>OPEN</code> state to the <code>HALF_OPEN</code> state.</p> <p>For a high-level guide on choosing a retry strategy, see the Retries Component Guide.</p>"},{"location":"api/retries/#fluxgate.retries.Always","title":"fluxgate.retries.Always","text":"<p>               Bases: <code>RetryBase</code></p> <p>Retry strategy that always allows transition to HALF_OPEN.</p> <p>Circuit immediately attempts to recover on every call.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; retry = Always()  # Always try to recover\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Always.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, _changed_at: float, _reopens: int) -&gt; bool:\n    return True\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Never","title":"fluxgate.retries.Never","text":"<p>               Bases: <code>RetryBase</code></p> <p>Retry strategy that never allows transition to HALF_OPEN.</p> <p>Circuit stays OPEN indefinitely until manually reset.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; retry = Never()  # Require manual intervention\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Never.__call__","title":"__call__","text":"<pre><code>__call__(_changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, _changed_at: float, _reopens: int) -&gt; bool:\n    return False\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Cooldown","title":"fluxgate.retries.Cooldown","text":"<pre><code>Cooldown(duration: float, jitter_ratio: float = 0.0)\n</code></pre> <p>               Bases: <code>RetryBase</code></p> <p>Retry strategy with fixed cooldown period.</p> <p>Allows transition to HALF_OPEN after a fixed duration has elapsed. Optional jitter can be added to avoid thundering herd.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Wait 60 seconds before retry\n&gt;&gt;&gt; retry = Cooldown(duration=60.0)\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Wait 60 seconds with \u00b110% jitter\n&gt;&gt;&gt; retry = Cooldown(duration=60.0, jitter_ratio=0.1)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>duration</code> <code>float</code> <p>Cooldown duration in seconds</p> required <code>jitter_ratio</code> <code>float</code> <p>Random jitter ratio (0.0 to 1.0, default 0.0)</p> <code>0.0</code> Source code in <code>fluxgate/retries.py</code> <pre><code>def __init__(self, duration: float, jitter_ratio: float = 0.0) -&gt; None:\n    if duration &lt;= 0:\n        raise ValueError(\"Duration must be greater than zero\")\n    if not (0.0 &lt;= jitter_ratio &lt; 1.0):\n        raise ValueError(\"Jitter ratio must be between 0.0 and 1.0\")\n    self._duration = duration\n    self._jitter_ratio = jitter_ratio\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Cooldown.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, _reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, changed_at: float, _reopens: int) -&gt; bool:\n    if self._jitter_ratio &gt; 0:\n        jitter = uniform(-self._jitter_ratio, self._jitter_ratio)\n        actual_duration = self._duration * (1 + jitter)\n    else:\n        actual_duration = self._duration\n    elapsed = time.time() - changed_at\n    return elapsed &gt;= actual_duration\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Backoff","title":"fluxgate.retries.Backoff","text":"<pre><code>Backoff(\n    initial: float,\n    multiplier: float = 2.0,\n    max_duration: float = 300.0,\n    jitter_ratio: float = 0.0,\n)\n</code></pre> <p>               Bases: <code>RetryBase</code></p> <p>Retry strategy with exponential backoff.</p> <p>Wait time increases exponentially with each reopen: initial * (multiplier ^ reopens). Useful for giving the service more time to recover after repeated failures.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Start with 10s, double each time, max 300s\n&gt;&gt;&gt; retry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n&gt;&gt;&gt; # Reopens: 0-&gt;10s, 1-&gt;20s, 2-&gt;40s, 3-&gt;80s, 4-&gt;160s, 5+-&gt;300s\n&gt;&gt;&gt;\n&gt;&gt;&gt; # With jitter to avoid thundering herd\n&gt;&gt;&gt; retry = Backoff(initial=10.0, multiplier=2.0, jitter_ratio=0.1)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>initial</code> <code>float</code> <p>Initial wait duration in seconds</p> required <code>multiplier</code> <code>float</code> <p>Backoff multiplier (must be &gt; 1.0)</p> <code>2.0</code> <code>max_duration</code> <code>float</code> <p>Maximum wait duration in seconds</p> <code>300.0</code> <code>jitter_ratio</code> <code>float</code> <p>Random jitter ratio (0.0 to 1.0, default 0.0)</p> <code>0.0</code> Source code in <code>fluxgate/retries.py</code> <pre><code>def __init__(\n    self,\n    initial: float,\n    multiplier: float = 2.0,\n    max_duration: float = 300.0,\n    jitter_ratio: float = 0.0,\n) -&gt; None:\n    if initial &lt;= 0:\n        raise ValueError(\"Initial duration must be greater than zero\")\n    if multiplier &lt;= 1.0:\n        raise ValueError(\"Multiplier must be greater than 1.0\")\n    if max_duration &lt; initial:\n        raise ValueError(\"Max duration must be &gt;= initial duration\")\n    if not (0.0 &lt;= jitter_ratio &lt; 1.0):\n        raise ValueError(\"Jitter ratio must be between 0.0 and 1.0\")\n\n    self._initial = initial\n    self._multiplier = multiplier\n    self._max = max_duration\n    self._jitter_ratio = jitter_ratio\n</code></pre>"},{"location":"api/retries/#fluxgate.retries.Backoff.__call__","title":"__call__","text":"<pre><code>__call__(changed_at: float, reopens: int) -&gt; bool\n</code></pre> Source code in <code>fluxgate/retries.py</code> <pre><code>def __call__(self, changed_at: float, reopens: int) -&gt; bool:\n    # Calculate wait duration based on reopens count\n    duration = min(self._initial * (self._multiplier**reopens), self._max)\n\n    if self._jitter_ratio &gt; 0:\n        jitter = uniform(-self._jitter_ratio, self._jitter_ratio)\n        actual_duration = duration * (1 + jitter)\n    else:\n        actual_duration = duration\n\n    elapsed = time.time() - changed_at\n    return elapsed &gt;= actual_duration\n</code></pre>"},{"location":"api/trackers/","title":"API: Trackers","text":"<p>This page documents the available failure tracking strategies. Trackers are responsible for inspecting exceptions to determine if they should be counted as a failure.</p> <p>For a high-level guide on choosing a tracker, see the Trackers Component Guide.</p>"},{"location":"api/trackers/#fluxgate.trackers.All","title":"fluxgate.trackers.All","text":"<p>               Bases: <code>TrackerBase</code></p> <p>Tracker that matches all exceptions.</p> <p>Always returns true for any exception, tracking all failures.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track all exceptions\n&gt;&gt;&gt; tracker = All()\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Track all except ValueError\n&gt;&gt;&gt; tracker = All() &amp; ~TypeOf(ValueError)\n</code></pre> Note <p>This is the default behavior when you want to track all exceptions.</p>"},{"location":"api/trackers/#fluxgate.trackers.All.__call__","title":"__call__","text":"<pre><code>__call__(_exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, _exception: Exception) -&gt; bool:\n    return True\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.TypeOf","title":"fluxgate.trackers.TypeOf","text":"<pre><code>TypeOf(*types: type[Exception])\n</code></pre> <p>               Bases: <code>TrackerBase</code></p> <p>Tracker that matches exceptions by type.</p> <p>Returns true if the exception is an instance of any of the specified types.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track connection and timeout errors\n&gt;&gt;&gt; tracker = TypeOf(ConnectionError, TimeoutError)\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Combine with OR\n&gt;&gt;&gt; tracker = TypeOf(ValueError) | TypeOf(TypeError)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>*types</code> <code>type[Exception]</code> <p>Exception types to track as failures</p> <code>()</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no exception types are provided</p> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __init__(self, *types: type[Exception]) -&gt; None:\n    if not types:\n        raise ValueError(\"At least one exception type is required\")\n    self._types = types\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.TypeOf.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool:\n    return isinstance(exception, self._types)\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.Custom","title":"fluxgate.trackers.Custom","text":"<pre><code>Custom(func: Callable[[Exception], bool])\n</code></pre> <p>               Bases: <code>TrackerBase</code></p> <p>Tracker with custom exception matching logic.</p> <p>Allows arbitrary logic to determine if an exception should be tracked.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Track only 503 errors from httpx\n&gt;&gt;&gt; def is_503(e):\n...     return isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 503\n&gt;&gt;&gt;\n&gt;&gt;&gt; tracker = Custom(is_503)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>func</code> <code>Callable[[Exception], bool]</code> <p>Function that takes an exception and returns bool</p> required Source code in <code>fluxgate/trackers.py</code> <pre><code>def __init__(self, func: Callable[[Exception], bool]) -&gt; None:\n    self._func = func\n</code></pre>"},{"location":"api/trackers/#fluxgate.trackers.Custom.__call__","title":"__call__","text":"<pre><code>__call__(exception: Exception) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trackers.py</code> <pre><code>def __call__(self, exception: Exception) -&gt; bool:\n    return self._func(exception)\n</code></pre>"},{"location":"api/trippers/","title":"API: Trippers","text":"<p>This page documents the available tripping strategies. Trippers are responsible for evaluating metrics from a <code>window</code> to decide if the circuit should change state.</p> <p>For a high-level guide on choosing and combining trippers, see the Trippers Component Guide.</p>"},{"location":"api/trippers/#fluxgate.trippers.Closed","title":"fluxgate.trippers.Closed","text":"<p>               Bases: <code>TripperBase</code></p> <p>Tripper that returns true only when circuit is in CLOSED state.</p> <p>Used to compose conditions that should only apply when circuit is closed.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only check failure rate when circuit is closed\n&gt;&gt;&gt; tripper = Closed() &amp; FailureRate(0.5)\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.Closed.__call__","title":"__call__","text":"<pre><code>__call__(\n    _metric: Metric,\n    state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, _metric: Metric, state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    return state == StateEnum.CLOSED\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.HalfOpened","title":"fluxgate.trippers.HalfOpened","text":"<p>               Bases: <code>TripperBase</code></p> <p>Tripper that returns true only when circuit is in HALF_OPEN state.</p> <p>Used to compose conditions that should only apply when circuit is half-open.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only check failure rate when circuit is half-open\n&gt;&gt;&gt; tripper = HalfOpened() &amp; FailureRate(0.3)\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.HalfOpened.__call__","title":"__call__","text":"<pre><code>__call__(\n    _metric: Metric,\n    state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, _metric: Metric, state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    return state == StateEnum.HALF_OPEN\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.MinRequests","title":"fluxgate.trippers.MinRequests","text":"<pre><code>MinRequests(count: int)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper that requires minimum number of calls before evaluating.</p> <p>Prevents premature circuit opening when sample size is too small.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Only trip after at least 10 calls\n&gt;&gt;&gt; tripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>count</code> <code>int</code> <p>Minimum number of calls required</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, count: int) -&gt; None:\n    if count &lt;= 0:\n        raise ValueError(\"Count must be greater than zero\")\n    self._count = count\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.MinRequests.__call__","title":"__call__","text":"<pre><code>__call__(\n    metric: Metric,\n    _state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, metric: Metric, _state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    return metric.total_count &gt;= self._count\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.FailureRate","title":"fluxgate.trippers.FailureRate","text":"<pre><code>FailureRate(ratio: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on failure rate threshold.</p> <p>Returns true when the ratio of failed calls exceeds the threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when 50% or more calls fail\n&gt;&gt;&gt; tripper = FailureRate(0.5)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Failure rate threshold (0.0 to 1.0)</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if ratio &lt;= 0 or ratio &gt; 1:\n        raise ValueError(\"Ratio must be between 0 and 1\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.FailureRate.__call__","title":"__call__","text":"<pre><code>__call__(\n    metric: Metric,\n    _state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, metric: Metric, _state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    failure_rate = metric.failure_count / metric.total_count\n    return failure_rate &gt;= self._ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.AvgLatency","title":"fluxgate.trippers.AvgLatency","text":"<pre><code>AvgLatency(threshold: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on average latency threshold.</p> <p>Returns true when average call duration reaches or exceeds the threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when average latency reaches 2 seconds\n&gt;&gt;&gt; tripper = AvgLatency(2.0)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>threshold</code> <code>float</code> <p>Latency threshold in seconds</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, threshold: float) -&gt; None:\n    if threshold &lt;= 0:\n        raise ValueError(\"Threshold must be greater than 0\")\n    self._threshold = threshold\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.AvgLatency.__call__","title":"__call__","text":"<pre><code>__call__(\n    metric: Metric,\n    _state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, metric: Metric, _state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    avg_duration = metric.total_duration / metric.total_count\n    return avg_duration &gt;= self._threshold\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.SlowRate","title":"fluxgate.trippers.SlowRate","text":"<pre><code>SlowRate(ratio: float)\n</code></pre> <p>               Bases: <code>TripperBase</code></p> <p>Tripper based on slow call rate threshold.</p> <p>Returns true when the ratio of slow calls exceeds the threshold. Slow calls are determined by the circuit breaker's slow_threshold.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Trip when 30% or more calls are slow\n&gt;&gt;&gt; tripper = SlowRate(0.3)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>ratio</code> <code>float</code> <p>Slow call rate threshold (0.0 to 1.0)</p> required Source code in <code>fluxgate/trippers.py</code> <pre><code>def __init__(self, ratio: float) -&gt; None:\n    if ratio &lt;= 0 or ratio &gt; 1:\n        raise ValueError(\"Ratio must be between 0 and 1\")\n    self._ratio = ratio\n</code></pre>"},{"location":"api/trippers/#fluxgate.trippers.SlowRate.__call__","title":"__call__","text":"<pre><code>__call__(\n    metric: Metric,\n    _state: StateEnum,\n    _consecutive_failures: int,\n) -&gt; bool\n</code></pre> Source code in <code>fluxgate/trippers.py</code> <pre><code>def __call__(\n    self, metric: Metric, _state: StateEnum, _consecutive_failures: int\n) -&gt; bool:\n    if metric.total_count == 0:\n        return False\n    slow_rate = metric.slow_count / metric.total_count\n    return slow_rate &gt;= self._ratio\n</code></pre>"},{"location":"api/windows/","title":"API: Windows","text":"<p>This page documents the available windowing strategies. Windows are responsible for storing and providing metrics about recent calls.</p> <p>For a high-level guide on choosing a window, see the Windows Component Guide.</p>"},{"location":"api/windows/#fluxgate.windows.CountWindow","title":"fluxgate.windows.CountWindow","text":"<pre><code>CountWindow(size: int)\n</code></pre> <p>               Bases: <code>IWindow</code></p> <p>Count-based sliding window for tracking recent call metrics.</p> <p>Maintains a fixed-size sliding window that keeps the most recent N calls. When the window is full, the oldest record is evicted when a new one arrives.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; window = CountWindow(size=100)  # Track last 100 calls\n&gt;&gt;&gt;\n&gt;&gt;&gt; window.record(Record(success=True, duration=0.5))\n&gt;&gt;&gt;\n&gt;&gt;&gt; metric = window.get_metric()\n&gt;&gt;&gt; print(metric.total_count)\n1\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>size</code> <code>int</code> <p>Maximum number of calls to track in the window</p> required Source code in <code>fluxgate/windows.py</code> <pre><code>def __init__(self, size: int) -&gt; None:\n    self._max_size = size\n    self._records: deque[Record] = deque(maxlen=size)\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> <p>Add a call record to the window.</p> <p>If window is full, evicts the oldest record before adding the new one.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>Record</code> <p>Call result to record</p> required Source code in <code>fluxgate/windows.py</code> <pre><code>def record(self, record: Record) -&gt; None:\n    \"\"\"Add a call record to the window.\n\n    If window is full, evicts the oldest record before adding the new one.\n\n    Args:\n        record: Call result to record\n    \"\"\"\n    if len(self._records) == self._max_size:\n        evicted = self._records.popleft()\n        self._evict(evicted)\n    self._admit(record)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> <p>Get aggregated metrics for all records in the window.</p> <p>Returns:</p> Type Description <code>Metric</code> <p>Aggregated metrics (counts, durations)</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def get_metric(self) -&gt; Metric:\n    \"\"\"Get aggregated metrics for all records in the window.\n\n    Returns:\n        Aggregated metrics (counts, durations)\n    \"\"\"\n    return Metric(\n        total_count=self._total_count,\n        failure_count=self._total_failure_count,\n        total_duration=self._total_duration,\n        slow_count=self._slow_call_count,\n    )\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.CountWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> <p>Clear all records and reset metrics to zero.</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    \"\"\"Clear all records and reset metrics to zero.\"\"\"\n    self._records.clear()\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow","title":"fluxgate.windows.TimeWindow","text":"<pre><code>TimeWindow(size: int)\n</code></pre> <p>               Bases: <code>IWindow</code></p> <p>Time-based sliding window for tracking metrics over a time period.</p> <p>Divides time into fixed buckets (1 second each) and tracks metrics per bucket. When a bucket's time period expires, it is reset and reused for the new time.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; window = TimeWindow(size=60)  # Track last 60 seconds\n&gt;&gt;&gt;\n&gt;&gt;&gt; window.record(Record(success=True, duration=0.5))\n&gt;&gt;&gt;\n&gt;&gt;&gt; metric = window.get_metric()\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>size</code> <code>int</code> <p>Number of seconds to track (window size in seconds)</p> required Note <p>Time precision is 1 second. All calls within the same second are grouped into the same bucket.</p> Source code in <code>fluxgate/windows.py</code> <pre><code>def __init__(self, size: int) -&gt; None:\n    self._size = size\n    self._buckets = [self.Bucket() for _ in range(size)]\n    self._timestamps = [0 for _ in range(size)]\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket","title":"Bucket  <code>dataclass</code>","text":"<pre><code>Bucket(\n    sec_count: int = 0,\n    sec_failure_count: int = 0,\n    sec_total_duration: float = 0.0,\n    sec_slow_call_count: int = 0,\n)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_count","title":"sec_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_failure_count","title":"sec_failure_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_failure_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_total_duration","title":"sec_total_duration  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_total_duration: float = field(default=0.0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.sec_slow_call_count","title":"sec_slow_call_count  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>sec_slow_call_count: int = field(default=0)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.admit","title":"admit","text":"<pre><code>admit(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def admit(self, record: Record) -&gt; None:\n    self.sec_count += 1\n    self.sec_failure_count += 1 if not record.success else 0\n    self.sec_total_duration += record.duration\n    self.sec_slow_call_count += 1 if record.is_slow else 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.Bucket.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    self.sec_count = 0\n    self.sec_failure_count = 0\n    self.sec_total_duration = 0.0\n    self.sec_slow_call_count = 0\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.record","title":"record","text":"<pre><code>record(record: Record) -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def record(self, record: Record) -&gt; None:\n    now = int(record.timestamp)\n    index = now % self._size\n    bucket = self._buckets[index]\n\n    if self._timestamps[index] != now:\n        evicted = self._buckets[index]\n        self._evict(evicted)\n        self._timestamps[index] = now\n\n    self._admit(record, bucket)\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.get_metric","title":"get_metric","text":"<pre><code>get_metric() -&gt; Metric\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def get_metric(self) -&gt; Metric:\n    return Metric(\n        total_count=self._total_count,\n        failure_count=self._total_failure_count,\n        total_duration=self._total_duration,\n        slow_count=self._slow_call_count,\n    )\n</code></pre>"},{"location":"api/windows/#fluxgate.windows.TimeWindow.reset","title":"reset","text":"<pre><code>reset() -&gt; None\n</code></pre> Source code in <code>fluxgate/windows.py</code> <pre><code>def reset(self) -&gt; None:\n    for bucket in self._buckets:\n        bucket.reset()\n    self._timestamps = [0 for _ in range(self._size)]\n    self._total_count = 0\n    self._total_failure_count = 0\n    self._total_duration = 0.0\n    self._slow_call_count = 0\n</code></pre>"},{"location":"components/","title":"Components Overview","text":"<p>Fluxgate uses composable components to build flexible circuit breaker configurations. Each component handles a specific aspect of circuit breaker behavior.</p>"},{"location":"components/#architecture","title":"Architecture","text":"Component Role Operators Window Track call history (count or time-based) - Tracker Define which exceptions to track &amp;, |, ~ Tripper Decide when to open/close the circuit &amp;, | Retry Control OPEN \u2192 HALF_OPEN transition - Permit Control call admission in HALF_OPEN - Listener Detect state transitions and notify external systems -"},{"location":"components/#component-types","title":"Component Types","text":""},{"location":"components/#windows","title":"Windows","text":"<p>Track call history over a sliding window.</p> <ul> <li>CountWindow - Last N calls</li> <li>TimeWindow - Last N seconds</li> </ul> <pre><code>from fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # Track last 100 calls\nwindow = TimeWindow(size=60)    # Track last 60 seconds\n</code></pre>"},{"location":"components/#trackers","title":"Trackers","text":"<p>Define which exceptions count as failures.</p> <ul> <li>All - Track all exceptions</li> <li>TypeOf - Track specific exception types</li> <li>Custom - Custom tracking logic</li> </ul> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\ntracker = TypeOf(ConnectionError, TimeoutError)\ntracker = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\n</code></pre> <p>Composable: Use <code>&amp;</code>, <code>|</code>, <code>~</code> operators to combine trackers.</p>"},{"location":"components/#trippers","title":"Trippers","text":"<p>Determine when to open or close the circuit based on metrics.</p> <ul> <li>Closed/HalfOpened - State-based conditions</li> <li>MinRequests - Minimum call count</li> <li>FailureRate - Failure percentage</li> <li>AvgLatency - Average response time</li> <li>SlowRate - Slow call percentage</li> </ul> <pre><code>from fluxgate.trippers import Closed, MinRequests, FailureRate\n\ntripper = Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>Composable: Use <code>&amp;</code>, <code>|</code> operators to combine conditions.</p>"},{"location":"components/#retries","title":"Retries","text":"<p>Control when to transition from OPEN to HALF_OPEN state.</p> <ul> <li>Never - Require manual reset</li> <li>Always - Immediate retry</li> <li>Cooldown - Fixed wait period</li> <li>Backoff - Exponential backoff</li> </ul> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\nretry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n</code></pre>"},{"location":"components/#permits","title":"Permits","text":"<p>Control which calls are allowed in HALF_OPEN state.</p> <ul> <li>All - Always allow (for testing)</li> <li>Random - Probabilistic admission</li> <li>RampUp - Gradual traffic increase</li> </ul> <pre><code>from fluxgate.permits import All, Random, RampUp\n\npermit = All()\npermit = Random(ratio=0.5)\npermit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre>"},{"location":"components/#listeners","title":"Listeners","text":"<p>Detect state transitions and notify external systems.</p> <ul> <li>LogListener - Standard logging</li> <li>PrometheusListener - Prometheus metrics (opt)</li> <li>SlackListener - Slack notifications (opt)</li> </ul> <pre><code>from fluxgate.listeners.log import LogListener\n\nlisteners = [LogListener()]\ncb = CircuitBreaker(..., listeners=listeners)\n</code></pre>"},{"location":"components/#full-example","title":"Full Example","text":"<p>Putting it all together:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=TimeWindow(size=60),  # Track calls from last 60 seconds\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    tripper=MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.8)),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    slow_threshold=2.0,  # Calls over 2 seconds are considered slow\n)\n</code></pre>"},{"location":"components/#next-steps","title":"Next Steps","text":"<p>Explore each component in detail:</p> <ul> <li>Windows - Choose the right window type</li> <li>Trackers - Define failure criteria</li> <li>Trippers - Configure circuit behavior</li> <li>Retries - Plan recovery strategy</li> <li>Permits - Control traffic during recovery</li> <li>Listeners - Monitor state transitions</li> </ul>"},{"location":"components/permits/","title":"Permits","text":"<p>Permit strategies are the gatekeepers of the <code>HALF_OPEN</code> state. After a <code>retry</code> strategy decides it's time to test for recovery, the <code>permit</code> strategy decides how to test. It controls how many \"probe\" calls are allowed to pass through to the recovering service, preventing it from being overwhelmed by a sudden flood of traffic.</p> Permit Type Behavior Best For... All Always allows all calls. Testing or when no rate limiting is needed. Random Allows a random, fixed percentage of calls. A simple, probabilistic approach to limiting traffic. RampUp Gradually increases the percentage of allowed calls. A sophisticated approach that gently re-introduces traffic."},{"location":"components/permits/#all","title":"All","text":"<p>This strategy unconditionally allows all calls to pass through.</p>"},{"location":"components/permits/#all-how-it-works","title":"How It Works","text":"<p><code>All</code> simply returns <code>True</code> for every call, allowing 100% of traffic in the <code>HALF_OPEN</code> state. This is primarily useful for testing scenarios or when you want to rely solely on the <code>tripper</code> to control state transitions.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import All\n\n# Allow all calls to pass through in the HALF_OPEN state.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=All(),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#random","title":"Random","text":"<p>This strategy allows calls to pass through with a simple, fixed probability.</p>"},{"location":"components/permits/#random-how-it-works","title":"How It Works","text":"<p>For every call that arrives in the <code>HALF_OPEN</code> state, <code>Random</code> generates a random number and allows the call if it's within the configured <code>ratio</code>. This decision is stateless and independent for each call.</p> <ul> <li><code>Random(ratio=0.1)</code> allows roughly 10% of calls.</li> <li><code>Random(ratio=0.8)</code> allows roughly 80% of calls.</li> </ul> <p>This is a good choice for simple traffic limiting, especially when you want to start testing recovery at a constant rate immediately.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# Allow approximately 50% of calls to pass through in the HALF_OPEN state.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=Random(ratio=0.5),\n    ...\n)\n</code></pre>"},{"location":"components/permits/#rampup","title":"RampUp","text":"<p>This strategy provides a smoother, more gentle recovery by gradually increasing the admission rate over time. It's the recommended choice for most use cases.</p>"},{"location":"components/permits/#rampup-how-it-works","title":"How It Works","text":"<p><code>RampUp</code> linearly increases the allowed traffic ratio from an <code>initial</code> value to a <code>final</code> value over a set <code>duration</code>. The calculation is based on the time elapsed since the breaker entered the <code>HALF_OPEN</code> state.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# Start by allowing 10% of traffic, then ramp up to 80% over 60 seconds.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>Example Progression: For <code>RampUp(initial=0.1, final=0.8, duration=60.0)</code>:</p> <ul> <li>At 0s: 10% of calls are allowed.</li> <li>At 15s: 27.5% of calls are allowed.</li> <li>At 30s: 45% of calls are allowed.</li> <li>At 60s (and beyond): The rate is capped at the <code>final</code> value of 80%.</li> </ul> <p>This strategy is excellent for protecting load-sensitive services like databases or external APIs.</p>"},{"location":"components/permits/#choosing-the-right-permit-strategy","title":"Choosing the Right Permit Strategy","text":""},{"location":"components/permits/#comparison","title":"Comparison","text":"Feature All Random RampUp Complexity Trivial Simple Medium Admission Rate 100% Constant Increases over time Recovery Style No limiting Immediate fixed rate Gradual ramp-up Load Spike Risk Highest Higher (with a high ratio) Very low Recommended? For testing only For simple cases Recommended"},{"location":"components/permits/#choose-random","title":"When should I use <code>Random</code>?","text":"<p><code>Random</code> is best for simple use cases where you need to quickly start testing recovery at a constant rate and aren't worried about overwhelming the downstream service.</p> <p>Recommended Settings:</p> <pre><code>from fluxgate.permits import Random\n\n# Conservative (prioritizes stability)\npermit = Random(ratio=0.3)\n\n# Balanced\npermit = Random(ratio=0.5)\n\n# Aggressive (prioritizes fast recovery)\npermit = Random(ratio=0.8)\n</code></pre>"},{"location":"components/permits/#choose-rampup","title":"When should I use <code>RampUp</code>?","text":"<p><code>RampUp</code> is the recommended strategy for most use cases. It provides the safest recovery path by slowly re-introducing traffic, giving the service time to warm up caches, re-establish connections, and scale up.</p> <p>Recommended Settings:</p> <pre><code>from fluxgate.permits import RampUp\n\n# Conservative recovery\npermit = RampUp(initial=0.1, final=0.5, duration=120.0)\n\n# Balanced recovery\npermit = RampUp(initial=0.2, final=0.8, duration=60.0)\n\n# Aggressive recovery\npermit = RampUp(initial=0.5, final=1.0, duration=30.0)\n</code></pre>"},{"location":"components/permits/#relationship-with-retry","title":"Relationship with Retry","text":"<p>The <code>retry</code> and <code>permit</code> strategies work together to define your complete recovery process.</p> <ul> <li>Retry: Decides when to attempt recovery (the cooling-off period).</li> <li>Permit: Decides how to attempt recovery (the traffic allowance).</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\n# A robust setup using Backoff and RampUp.\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(initial=10.0, multiplier=2.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>The recovery flow works like this:</p> <ol> <li>The <code>tripper</code> condition is met, and the circuit transitions to the <code>OPEN</code> state.</li> <li>The <code>retry</code> strategy starts its timer. With <code>Backoff(initial=10.0)</code>, it waits for 10 seconds.</li> <li>After 10 seconds, the circuit transitions to <code>HALF_OPEN</code>.</li> <li>Now, the <code>permit</code> strategy takes over. For the next 60 seconds, it will gradually increase the percentage of allowed calls from 10% up to 80%.</li> <li>If a probe call fails during this time, the circuit immediately trips back to <code>OPEN</code>, and the <code>retry</code> counter is incremented (the next wait time will be 20 seconds).</li> <li>If all probe calls succeed, the circuit transitions back to <code>CLOSED</code>, and normal operation resumes.</li> </ol>"},{"location":"components/permits/#next-steps","title":"Next Steps","text":"<ul> <li>Listeners: Monitor these state changes and get notified.</li> <li>Circuit Breaker Overview: See how all the components fit together.</li> </ul>"},{"location":"components/retries/","title":"Retries","text":"<p>A Retry strategy defines the \"cooling-off\" period for a circuit breaker. It controls when the breaker should attempt to recover by transitioning from the <code>OPEN</code> state to the <code>HALF_OPEN</code> state. Choosing the right strategy is key to balancing fast recovery with giving a struggling service enough time to heal.</p> Retry Type Transition Timing Best For... Always Immediately Non-critical services where immediate retries are acceptable. Never Manual only When recovery requires manual intervention by an operator. Cooldown After a fixed delay A simple, predictable wait time before attempting recovery. Backoff After an exponentially increasing delay An adaptive approach that waits longer after repeated failures."},{"location":"components/retries/#always","title":"Always","text":"<p>This strategy moves the circuit to <code>HALF_OPEN</code> immediately after it opens. On any subsequent call, it will attempt a recovery.</p> <p>Use with Caution</p> <p><code>Always</code> can be dangerous, as it encourages a \"thundering herd\" problem where many clients retry simultaneously, overwhelming a service that is trying to recover. It's best used for non-critical services where failures are known to be very brief.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Always\n\n# Not generally recommended.\ncb = CircuitBreaker(name=\"api\", retry=Always(), ...)\n</code></pre>"},{"location":"components/retries/#never","title":"Never","text":"<p>This strategy keeps the circuit in the <code>OPEN</code> state indefinitely until it is manually reset. This is useful when a service requires human intervention to be fixed.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Never\n\ncb = CircuitBreaker(name=\"api\", retry=Never(), ...)\n\n# An operator must manually reset the breaker after fixing the service.\ncb.reset()\n</code></pre>"},{"location":"components/retries/#cooldown","title":"Cooldown","text":"<p>This is a simple and common strategy that waits for a fixed <code>duration</code> (in seconds) before moving to <code>HALF_OPEN</code>.</p> <p>It's a good default choice for services that tend to recover in a predictable amount of time.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\n\n# Wait for 60 seconds before the first recovery attempt.\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"components/retries/#backoff","title":"Backoff","text":"<p>This is the most robust and recommended strategy. It increases the wait time exponentially after each consecutive failure, giving a struggling service more and more time to recover.</p> <p>The wait time is calculated as <code>initial * (multiplier ** consecutive_failures)</code>.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\n\n# The wait time starts at 10s, doubles after each failed recovery attempt,\n# and is capped at a maximum of 300s.\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0\n    ),\n    ...\n)\n# Sequence of wait times:\n# 1st attempt -&gt; 10s\n# 2nd attempt -&gt; 20s\n# 3rd attempt -&gt; 40s\n# 4th attempt -&gt; 80s\n# 5th attempt -&gt; 160s\n# 6th+ attempt -&gt; 300s (capped by max_duration)\n</code></pre>"},{"location":"components/retries/#choosing-the-right-retry-strategy","title":"Choosing the Right Retry Strategy","text":""},{"location":"components/retries/#comparison","title":"Comparison","text":"Feature Always Never Cooldown Backoff Recovery Immediate Manual Fixed Delay Exponential Delay Service Load High None Medium Low Handles Repeated Failures? No N/A No Yes Complexity Very Simple Very Simple Simple Medium Recommended? No For special cases Good default Recommended"},{"location":"components/retries/#choose-always","title":"When should I use <code>Always</code>?","text":"<p>Only for non-critical services where failures are known to be extremely brief and the service can handle a high volume of retries.</p>"},{"location":"components/retries/#choose-never","title":"When should I use <code>Never</code>?","text":"<p>When a service requires manual intervention to fix. The circuit breaker will not attempt to recover on its own.</p> <ul> <li>Use case: During a planned deployment or when a service is taken down for maintenance.</li> </ul>"},{"location":"components/retries/#choose-cooldown","title":"When should I use <code>Cooldown</code>?","text":"<p>This is a great, simple default. It's best when you have a general idea of how long the service takes to recover.</p> <ul> <li>Use case: Protecting a service that has a predictable recovery time, like an external API with a fixed rate-limiting window.</li> </ul>"},{"location":"components/retries/#choose-backoff","title":"When should I use <code>Backoff</code>?","text":"<p>This is the recommended strategy for most use cases. It gracefully backs off from a struggling service, giving it more time to recover after repeated failures.</p> <ul> <li>Use case: Protecting a critical downstream service that may be slow to restart or recover from an outage.</li> </ul>"},{"location":"components/retries/#using-jitter","title":"A Note on Jitter","text":"<p>Always Add Jitter</p> <p>For both <code>Cooldown</code> and <code>Backoff</code>, it is highly recommended to add jitter. Jitter adds a small amount of randomness to the wait time, which helps prevent a \"thundering herd\" scenario where multiple instances of your service all try to recover at the exact same time.</p> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\n# For a 60s cooldown, jitter adds a +/- 6s random variation (54s to 66s).\nretry_cooldown = Cooldown(duration=60.0, jitter_ratio=0.1)\n\n# The same applies to each step of the backoff.\nretry_backoff = Backoff(initial=10.0, jitter_ratio=0.1)\n</code></pre>"},{"location":"components/retries/#next-steps","title":"Next Steps","text":"<ul> <li>Permits: Configure how many \"probe\" calls are allowed during the <code>HALF_OPEN</code> recovery state.</li> <li>Trippers: Define the conditions that cause the circuit to trip in the first place.</li> </ul>"},{"location":"components/trackers/","title":"Trackers","text":"<p>Trackers are crucial for defining what a \"failure\" means for your service. While all exceptions are propagated to the caller, a tracker decides which ones should actually count against your error budget and contribute to tripping the circuit breaker. This allows you to distinguish between expected errors (like a 404 Not Found) and actual failures (like a 500 Internal Server Error).</p> Tracker Type Matches Based On... Best For... All Any exception Simple cases where any exception is a failure. TypeOf The exception's type When failures can be identified by their type (e.g., <code>ConnectionError</code>). Custom A user-defined function When you need to inspect an exception's content (e.g., an HTTP status code)."},{"location":"components/trackers/#all","title":"All","text":"<p>This is the simplest tracker. It counts every exception as a failure.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import All\n\n# Any exception raised by the decorated function will be tracked as a failure.\ncb = CircuitBreaker(\n    name=\"api\",\n    tracker=All(),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#typeof","title":"TypeOf","text":"<p>This tracker checks if an exception is an instance of one or more specified types. It's perfect for tracking known, common failure classes.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\n# Track only network-related exceptions as failures.\n# Other exceptions (e.g., ValueError) will be ignored by the breaker.\ncb = CircuitBreaker(\n    name=\"external_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#custom","title":"Custom","text":"<p>For maximum flexibility, <code>Custom</code> lets you provide your own function to inspect the exception and decide if it's a failure. This is essential for cases where you need to check an exception's attributes, such as an HTTP status code.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nimport httpx\n\n# Only count 5xx server errors as failures. Client errors (4xx) will be ignored.\ndef is_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return False\n\ncb = CircuitBreaker(\n    name=\"http_api\",\n    tracker=Custom(is_server_error),\n    ...\n)\n</code></pre>"},{"location":"components/trackers/#operators","title":"Combining Trackers with Logical Operators","text":"<p>The real power of trackers comes from combining them with logical operators (<code>&amp;</code>, <code>|</code>, <code>~</code>) to create precise failure-detection rules.</p>"},{"location":"components/trackers/#and","title":"AND (<code>&amp;</code>)","text":"<p>Use the <code>&amp;</code> operator to create a tracker that matches only if both conditions are true.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\n# Track ConnectionError exceptions that also contain the word \"timeout\".\ntracker = (\n    TypeOf(ConnectionError) &amp;\n    Custom(lambda e: \"timeout\" in str(e).lower())\n)\n</code></pre>"},{"location":"components/trackers/#or","title":"OR (<code>|</code>)","text":"<p>Use the <code>|</code> operator to create a tracker that matches if either condition is true.</p> <pre><code>from fluxgate.trackers import TypeOf\n\n# Track either a ConnectionError OR a TimeoutError.\ntracker = TypeOf(ConnectionError) | TypeOf(TimeoutError)\n\n# This is equivalent to passing multiple types to TypeOf directly.\ntracker = TypeOf(ConnectionError, TimeoutError)\n</code></pre>"},{"location":"components/trackers/#not","title":"NOT (<code>~</code>)","text":"<p>Use the <code>~</code> operator to invert a condition, excluding certain errors.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# Ignore 4xx client errors, but track all other HTTPStatusError exceptions (e.g., 5xx).\nis_4xx_error = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and 400 &lt;= e.response.status_code &lt; 500)\ntracker = TypeOf(httpx.HTTPStatusError) &amp; ~is_4xx_error\n</code></pre>"},{"location":"components/trackers/#complex-example","title":"Complex Example","text":"<p>You can combine these operators to build sophisticated rules.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# This tracker counts an exception as a failure if:\n# 1. It is a network error (ConnectionError or TimeoutError), OR\n# 2. It is a 5xx server error, AND\n# 3. It is NOT a 401 Unauthorized error (which we might handle differently).\n\nnetwork_errors = TypeOf(ConnectionError, TimeoutError)\nserver_errors = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\nis_auth_error = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 401)\n\ntracker = (network_errors | server_errors) &amp; ~is_auth_error\n</code></pre>"},{"location":"components/trackers/#choosing-the-right-tracker","title":"Choosing the Right Tracker","text":""},{"location":"components/trackers/#comparison","title":"Comparison","text":"Feature All TypeOf Custom Simplicity Dead simple Simple Requires a custom function Flexibility Low Medium High Performance Excellent (O(1)) Excellent (O(1)) Depends on your function Primary Use Track everything Track specific types Inspect exception contents"},{"location":"components/trackers/#choose-all","title":"When should I use <code>All</code>?","text":"<p><code>All</code> is best when any exception indicates a genuine failure. It's often combined with <code>~</code> to exclude a few specific, expected exceptions.</p> <ul> <li>Use case: Protecting an internal service where any error is considered critical.</li> </ul>"},{"location":"components/trackers/#choose-typeof","title":"When should I use <code>TypeOf</code>?","text":"<p><code>TypeOf</code> is the most common choice for tracking failures from external services where you can anticipate the kinds of errors that occur.</p> <ul> <li>Use case: Calling an external API where you expect <code>TimeoutError</code> or <code>ConnectionError</code>.</li> </ul>"},{"location":"components/trackers/#choose-custom","title":"When should I use <code>Custom</code>?","text":"<p><code>Custom</code> is necessary when you need to look inside an exception to decide if it's a failure.</p> <ul> <li>Use case: Checking the status code of an <code>httpx.HTTPStatusError</code> to distinguish between client errors (4xx) and server errors (5xx).</li> </ul>"},{"location":"components/trackers/#next-steps","title":"Next Steps","text":"<ul> <li>Windows: Learn how call history is stored.</li> <li>Trippers: Use the metrics gathered by trackers to build tripping logic.</li> </ul>"},{"location":"components/trippers/","title":"Trippers","text":"<p>Trippers are the brain of the circuit breaker. They analyze the metrics provided by a <code>window</code> to decide if the circuit should change state (e.g., from <code>CLOSED</code> to <code>OPEN</code>). By combining simple tripper components with logical operators (<code>&amp;</code>, <code>|</code>), you can define sophisticated and precise rules for when your breaker should trip.</p> Tripper Type Condition Use Case Closed / HalfOpened Checks if the circuit is in a specific state. Create rules that only apply in a certain state. MinRequests Checks if the number of calls exceeds a minimum. Prevent tripping on a small, statistically insignificant sample size. FailureRate Checks if the failure percentage is too high. Trip when the error rate becomes unacceptable. AvgLatency Checks if the average response time is too slow. Trip when overall performance degrades. SlowRate Checks if the percentage of slow calls is too high. Trip based on the rate of outlier slow requests. FailureStreak Checks for consecutive failures. Fast trip on cold start or complete service outage."},{"location":"components/trippers/#state-based-trippers","title":"State-Based Trippers","text":"<p>These trippers check the current state of the circuit breaker, allowing you to create rules that apply only in <code>CLOSED</code> or <code>HALF_OPEN</code> states.</p> <ul> <li><code>Closed()</code>: Returns <code>True</code> only when the circuit is in the <code>CLOSED</code> state.</li> <li><code>HalfOpened()</code>: Returns <code>True</code> only when the circuit is in the <code>HALF_OPEN</code> state.</li> </ul> <p>They are almost always used with the <code>&amp;</code> operator to scope other conditions.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import Closed, HalfOpened, FailureRate\n\n# Use different failure rate thresholds for CLOSED and HALF_OPEN states.\ntripper = (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"components/trippers/#metric-based-trippers","title":"Metric-Based Trippers","text":"<p>These trippers evaluate the metrics gathered by the <code>window</code>.</p>"},{"location":"components/trippers/#minrequests","title":"MinRequests","text":"<p><code>MinRequests(count)</code> returns <code>True</code> only after the window has recorded at least <code>count</code> calls. This is crucial for preventing the breaker from tripping on a small, statistically insignificant number of failures (e.g., 1 failure out of 2 calls is a 50% failure rate, but it's not enough data to act on).</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# The breaker won't trip until at least 10 calls have been recorded.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#failurerate","title":"FailureRate","text":"<p><code>FailureRate(rate)</code> returns <code>True</code> if the ratio of failed calls to total calls exceeds the <code>rate</code> (e.g., <code>0.5</code> for 50%).</p> <pre><code>from fluxgate.trippers import FailureRate\n\n# Trip if more than 50% of calls are failing.\ntripper = FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#avglatency","title":"AvgLatency","text":"<p><code>AvgLatency(seconds)</code> returns <code>True</code> if the average response time of all calls in the window exceeds <code>seconds</code>.</p> <pre><code>from fluxgate.trippers import AvgLatency\n\n# Trip if the average response time is greater than 2 seconds.\ntripper = AvgLatency(2.0)\n</code></pre>"},{"location":"components/trippers/#slowrate","title":"SlowRate","text":"<p><code>SlowRate(rate)</code> returns <code>True</code> if the ratio of \"slow\" calls exceeds the <code>rate</code>. A call is considered \"slow\" if its duration exceeds the <code>slow_threshold</code> parameter (in seconds) on the <code>CircuitBreaker</code>.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import SlowRate\n\n# Trip if more than 30% of calls are \"slow\".\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=SlowRate(0.3),\n    slow_threshold=1.0,  # A call is slow if it takes longer than 1 second.\n    ...\n)\n</code></pre>"},{"location":"components/trippers/#failurestreak","title":"FailureStreak","text":"<p><code>FailureStreak(count)</code> returns <code>True</code> when the number of consecutive failures reaches <code>count</code>. This is useful for fast failure detection during cold start or when an external service is completely down.</p> <pre><code>from fluxgate.trippers import FailureStreak, MinRequests, FailureRate\n\n# Trip after 5 consecutive failures\ntripper = FailureStreak(5)\n\n# Combine with FailureRate for comprehensive protection:\n# - Fast trip on 5 consecutive failures (cold start protection)\n# - OR statistical trip after 20 requests with 50% failure rate\ntripper = FailureStreak(5) | (MinRequests(20) &amp; FailureRate(0.5))\n</code></pre>"},{"location":"components/trippers/#operators","title":"Combining Trippers with Logical Operators","text":"<p>You can create powerful and precise rules by combining trippers with logical operators.</p>"},{"location":"components/trippers/#and","title":"AND (<code>&amp;</code>)","text":"<p>The <code>&amp;</code> operator requires all conditions to be true. It's the most common way to combine trippers.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# Trip only if the window has at least 10 requests AND the failure rate is over 50%.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#or","title":"OR (<code>|</code>)","text":"<p>The <code>|</code> operator requires any condition to be true.</p> <pre><code>from fluxgate.trippers import FailureRate, SlowRate\n\n# Trip if the failure rate is over 50% OR the slow call rate is over 30%.\ntripper = FailureRate(0.5) | SlowRate(0.3)\n</code></pre>"},{"location":"components/trippers/#complex-example","title":"Complex Example","text":"<p>Here's how to create different rules for the <code>CLOSED</code> and <code>HALF_OPEN</code> states.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# This rule translates to:\n# - IF the state is CLOSED, trip if there are at least 10 requests and the failure rate is &gt; 50%.\n# - OR IF the state is HALF_OPEN, trip if there are at least 5 requests and the failure rate is &gt; 30%.\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"components/trippers/#choosing-the-right-tripper","title":"Choosing the Right Tripper","text":""},{"location":"components/trippers/#comparison","title":"Comparison","text":"Feature <code>Closed</code>/<code>HalfOpened</code> <code>MinRequests</code> <code>FailureRate</code> <code>AvgLatency</code> <code>SlowRate</code> <code>FailureStreak</code> Purpose Apply rules to a specific state. Ensure a meaningful sample size. Check the ratio of failed calls. Check the average performance. Check the ratio of slow calls. Fast trip on consecutive failures. Standalone? No Almost never Yes Yes Yes Yes Commonly Combined With <code>&amp;</code> with metric-based trippers <code>&amp;</code> with other metric-based trippers <code>&amp;</code> with <code>MinRequests</code> <code>&amp;</code> with <code>MinRequests</code> <code>&amp;</code> with <code>MinRequests</code> <code>\\|</code> with <code>MinRequests &amp; FailureRate</code>"},{"location":"components/trippers/#use-minrequests","title":"Always Use <code>MinRequests</code>","text":"<p>Strong Recommendation</p> <p>You should include <code>MinRequests</code> in almost every tripper combination. It prevents the circuit from making hasty decisions based on a small, statistically insignificant sample of calls. A good starting point is a value that is 10-20% of your window's size.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# For a CountWindow(size=100), a MinRequests of 10-20 is a sensible choice.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"components/trippers/#rate-vs-latency","title":"<code>FailureRate</code> vs. <code>AvgLatency</code> vs. <code>SlowRate</code>","text":"<ul> <li> <p>Choose <code>FailureRate</code> when you care most about explicit errors (exceptions). This is the most common and intuitive choice.</p> </li> <li> <p>Choose <code>AvgLatency</code> when you want to protect against a general slowdown or \"brownout\" where the service is responding, but too slowly. Be careful: a few very slow calls can skew the average.</p> </li> <li> <p>Choose <code>SlowRate</code> when you want to protect against outliers. It's often more robust than <code>AvgLatency</code> because it's less sensitive to a single, extremely slow call. It measures the percentage of calls that are slow, not the average slowness.</p> </li> </ul>"},{"location":"components/trippers/#combining-conditions","title":"Putting It All Together","text":"<p>A robust configuration often combines multiple conditions.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate, SlowRate\n\n# Trip if, after at least 10 calls, the failure rate exceeds 50% OR the slow rate exceeds 30%.\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"components/trippers/#next-steps","title":"Next Steps","text":"<ul> <li>Retries: Define the policy for recovering from an <code>OPEN</code> state.</li> <li>Permits: Configure how to test for recovery in the <code>HALF_OPEN</code> state.</li> </ul>"},{"location":"components/windows/","title":"Windows","text":"<p>Windows are the memory of the circuit breaker. They store recent call outcomes (like successes, failures, and response times) and provide the metrics that <code>trippers</code> use to decide whether to open the circuit.</p> <p>Fluxgate provides two types of windows:</p> Window Type Tracking Method Best For... CountWindow Last N calls Services with stable traffic, where you want to evaluate a fixed number of recent operations. TimeWindow Last N seconds Services with variable or bursty traffic, where time-based evaluation is more meaningful."},{"location":"components/windows/#countwindow","title":"CountWindow","text":"<p><code>CountWindow</code> tracks a fixed number of the most recent calls. It's a great choice for services with stable and predictable traffic patterns.</p>"},{"location":"components/windows/#countwindow-how-it-works","title":"How It Works","text":"<p>It maintains a fixed-size circular buffer in memory. When a new call is recorded, it overwrites the oldest one if the window is full. This guarantees that the window always contains exactly the last N calls, providing a consistent volume for evaluation.</p>"},{"location":"components/windows/#countwindow-basic","title":"Basic Usage","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\n\n# This breaker will base its decisions on the last 100 calls.\ncb = CircuitBreaker(\n    name=\"stable_api\",\n    window=CountWindow(size=100),\n    ...\n)\n</code></pre>"},{"location":"components/windows/#timewindow","title":"TimeWindow","text":"<p><code>TimeWindow</code> tracks calls that have occurred over the last N seconds. It's ideal for services with irregular or bursty traffic where a time-based perspective is more important than a call count.</p>"},{"location":"components/windows/#timewindow-how-it-works","title":"How It Works","text":"<p>It uses a series of time-based buckets (one for each second in the window). When a call is recorded, its outcome is aggregated into the bucket corresponding to the current timestamp. Old buckets that fall outside the time window expire automatically and are reused.</p> <p>This approach ensures that a sudden burst of failures doesn't dominate the metrics for too long.</p>"},{"location":"components/windows/#timewindow-basic","title":"Basic Usage","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\n\n# This breaker will base its decisions on calls made in the last 60 seconds.\ncb = CircuitBreaker(\n    name=\"variable_traffic_api\",\n    window=TimeWindow(size=60),\n    ...\n)\n</code></pre>"},{"location":"components/windows/#choosing-a-window","title":"Choosing a Window","text":""},{"location":"components/windows/#comparison","title":"Comparison","text":"Feature CountWindow TimeWindow Memory Usage Proportional to the number of calls (<code>size</code>). Proportional to the duration in seconds (<code>size</code>). Traffic Spikes A burst of calls can quickly flush out old data. Retains data for the full duration, smoothing out bursts. Low Traffic Gathers a full set of metrics faster. May take longer to collect enough data to be meaningful. Evaluation Basis A fixed number of calls. A fixed duration of time. Granularity Per-call. Per-second."},{"location":"components/windows/#choose-countwindow","title":"When should I use <code>CountWindow</code>?","text":"<p><code>CountWindow</code> is an excellent choice when you have:</p> <ul> <li>Stable and predictable traffic: The rate of calls doesn't fluctuate dramatically.</li> <li>A need for memory efficiency: It often consumes less memory than <code>TimeWindow</code> for equivalent coverage.</li> <li>A desire for fast evaluation: It can fill up and provide meaningful metrics quickly.</li> </ul> <p>Common use cases: Internal microservice-to-microservice communication, background processing, or batch jobs.</p>"},{"location":"components/windows/#choose-timewindow","title":"When should I use <code>TimeWindow</code>?","text":"<p><code>TimeWindow</code> is generally recommended and is a safer default choice, especially when you have:</p> <ul> <li>Irregular or bursty traffic: It handles sudden spikes in traffic gracefully.</li> <li>A need for time-based policies: Your SLOs are likely defined in terms of time (e.g., \"99.9% uptime over any 5-minute window\").</li> <li>A focus on real-time responsiveness: It ensures that decisions are always based on a recent time period, regardless of call volume.</li> </ul> <p>Common use cases: Public-facing APIs, user-facing services, or calls to volatile external services.</p>"},{"location":"components/windows/#metrics","title":"Metrics","text":"<p>Both window types provide the same rich set of metrics for <code>trippers</code>.</p> <pre><code>from fluxgate.windows import CountWindow\nfrom fluxgate.metric import Record\n\nwindow = CountWindow(size=100)\n\n# Record calls manually\nwindow.record(Record(success=True, duration=0.5))\nwindow.record(Record(success=False, duration=1.2))\n\n# Get the aggregated metric object\nmetric = window.get_metric()\nprint(f\"Total calls: {metric.total_count}\")\nprint(f\"Failed calls: {metric.failure_count}\")\nprint(f\"Average duration: {metric.avg_duration}\")\n</code></pre> <p>Available Metrics:</p> <ul> <li><code>total_count</code>: Total number of calls recorded in the window.</li> <li><code>failure_count</code>: Number of calls tracked as failures.</li> <li><code>total_duration</code>: Sum of the durations of all calls.</li> <li><code>slow_count</code>: Number of calls that exceeded the <code>slow_threshold</code>.</li> <li><code>avg_duration</code>: The average response time (<code>total_duration / total_count</code>).</li> <li><code>failure_rate</code>: The ratio of failed calls (<code>failure_count / total_count</code>).</li> <li><code>slow_rate</code>: The ratio of slow calls (<code>slow_count / total_count</code>).</li> </ul>"},{"location":"components/windows/#auto-reset","title":"Automatic Reset","text":"<p>Windows automatically clear their metrics when the circuit breaker transitions between states (e.g., <code>OPEN</code> \u2192 <code>HALF_OPEN</code> or <code>HALF_OPEN</code> \u2192 <code>CLOSED</code>). This ensures that each recovery attempt and each new <code>CLOSED</code> period begins with a clean slate.</p>"},{"location":"components/windows/#performance","title":"Performance Considerations","text":"Operation CountWindow TimeWindow Memory O(N), where N is <code>size</code> O(N), where N is <code>size</code> <code>record()</code> O(1) O(1) <code>get_metric()</code> O(1) O(1) <p>Both implementations are highly optimized and designed for negligible overhead.</p>"},{"location":"components/windows/#next-steps","title":"Next Steps","text":"<ul> <li>Trackers: Define what counts as a failure.</li> <li>Trippers: Use these metrics to build tripping logic.</li> </ul>"},{"location":"components/listeners/","title":"Listeners","text":"<p>Listeners detect circuit breaker state transitions and send notifications to external systems.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(\n    name=\"api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n    ],\n)\n</code></pre>"},{"location":"components/listeners/#signal","title":"Signal","text":"<p>Listeners receive a <code>Signal</code> object on state transitions:</p> <pre><code>from dataclasses import dataclass\nfrom fluxgate.state import StateEnum\n\n@dataclass(frozen=True)\nclass Signal:\n    circuit_name: str     # Circuit breaker name\n    old_state: StateEnum  # Previous state\n    new_state: StateEnum  # New state\n    timestamp: float      # Transition time (Unix timestamp)\n</code></pre>"},{"location":"components/listeners/#sync-vs-async","title":"Sync vs Async","text":""},{"location":"components/listeners/#synchronous-listeners-ilistener","title":"Synchronous Listeners (IListener)","text":"<p>Can be used with both <code>CircuitBreaker</code> and <code>AsyncCircuitBreaker</code>:</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        print(f\"{signal.circuit_name}: {signal.old_state} \u2192 {signal.new_state}\")\n</code></pre> <p>Warning: When using synchronous listeners with <code>AsyncCircuitBreaker</code>, avoid blocking I/O operations (network calls, file writes, etc.) as they will block the event loop. Use <code>IAsyncListener</code> for operations requiring I/O.</p>"},{"location":"components/listeners/#asynchronous-listeners-iasynclistener","title":"Asynchronous Listeners (IAsyncListener)","text":"<p>Only available for <code>AsyncCircuitBreaker</code>:</p> <pre><code>from fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass CustomAsyncListener(IAsyncListener):\n    async def __call__(self, signal: Signal) -&gt; None:\n        await send_notification(signal)\n</code></pre>"},{"location":"components/listeners/#available-listeners","title":"Available Listeners","text":""},{"location":"components/listeners/#loglistener","title":"LogListener","text":"<p>Logs state transitions using Python's standard <code>logging</code> module.</p> <pre><code>from fluxgate.listeners.log import LogListener\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"components/listeners/#prometheuslistener","title":"PrometheusListener","text":"<p>Collects Prometheus metrics for integration with monitoring systems.</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre> <pre><code>from fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(..., listeners=[PrometheusListener()])\n</code></pre>"},{"location":"components/listeners/#slacklistener-asyncslacklistener","title":"SlackListener / AsyncSlackListener","text":"<p>Sends state transition notifications to Slack channels.</p> <pre><code>pip install fluxgate[slack]\n</code></pre> <pre><code>from fluxgate.listeners.slack import SlackListener, AsyncSlackListener\n\n# Sync\nsync_cb = CircuitBreaker(..., listeners=[\n    SlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n\n# Async\nasync_cb = AsyncCircuitBreaker(..., listeners=[\n    AsyncSlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n</code></pre>"},{"location":"components/listeners/#custom-listeners","title":"Custom Listeners","text":""},{"location":"components/listeners/#synchronous-listener","title":"Synchronous Listener","text":"<pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass DatabaseListener(IListener):\n    def __init__(self, db_connection):\n        self.db = db_connection\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self.db.execute(\n                \"INSERT INTO circuit_events (name, timestamp) VALUES (?, ?)\",\n                (signal.circuit_name, signal.timestamp)\n            )\n</code></pre>"},{"location":"components/listeners/#asynchronous-listener","title":"Asynchronous Listener","text":"<pre><code>import httpx\nfrom fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass WebhookListener(IAsyncListener):\n    def __init__(self, webhook_url: str):\n        self.url = webhook_url\n        self.client = httpx.AsyncClient()\n\n    async def __call__(self, signal: Signal) -&gt; None:\n        payload = {\n            \"circuit\": signal.circuit_name,\n            \"transition\": f\"{signal.old_state.value} -&gt; {signal.new_state.value}\",\n            \"timestamp\": signal.timestamp,\n        }\n        await self.client.post(self.url, json=payload)\n</code></pre>"},{"location":"components/listeners/#error-handling","title":"Error Handling","text":"<p>Listener exceptions don't affect circuit breaker operation. Exceptions are automatically logged, and the circuit breaker continues normally.</p>"},{"location":"components/listeners/#combining-listeners","title":"Combining Multiple Listeners","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\nfrom fluxgate.listeners.slack import SlackListener\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n        SlackListener(channel=\"C1234567890\", token=\"xoxb-...\"),\n    ],\n)\n</code></pre>"},{"location":"components/listeners/#next-steps","title":"Next Steps","text":"<ul> <li>LogListener - Logging configuration</li> <li>PrometheusListener - Prometheus integration</li> <li>SlackListener - Slack notification setup</li> </ul>"},{"location":"components/listeners/logging/","title":"LogListener","text":"<p>The <code>LogListener</code> provides the simplest way to observe your circuit breaker's behavior. It hooks into Python's standard <code>logging</code> module to record state transitions, giving you a clear, chronological view of how the breaker is operating.</p> <p>It works identically for both <code>CircuitBreaker</code> and <code>AsyncCircuitBreaker</code>.</p>"},{"location":"components/listeners/logging/#usage","title":"Basic Usage","text":"<p>Simply add <code>LogListener</code> to the <code>listeners</code> list of your circuit breaker.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# Basic configuration for console logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre> <p>When the circuit breaker changes state, it will produce a log record like this:</p> <pre><code>[2025-01-15 10:30:45] Circuit Breaker 'payment_api' transitioned from CLOSED to OPEN\n[2025-01-15 10:31:45] Circuit Breaker 'payment_api' transitioned from OPEN to HALF_OPEN\n[2025-01-15 10:31:50] Circuit Breaker 'payment_api' transitioned from HALF_OPEN to CLOSED\n</code></pre>"},{"location":"components/listeners/logging/#custom-logger","title":"Custom Logger","text":"<p>By default, <code>LogListener</code> uses the root logger. You can inject your own logger for better control over log routing and formatting.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# Create a dedicated logger for circuit breaker events\ncb_logger = logging.getLogger(\"myapp.circuit_breaker\")\ncb_logger.setLevel(logging.INFO)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener(logger=cb_logger)],\n)\n</code></pre>"},{"location":"components/listeners/logging/#custom-log-levels","title":"Custom Log Levels","text":"<p>Use <code>level_map</code> to customize the log level for each state transition. By default, transitions to <code>OPEN</code> and <code>FORCED_OPEN</code> are logged at <code>WARNING</code> level, while others are logged at <code>INFO</code>.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.state import StateEnum\n\n# Log OPEN transitions as ERROR for alerting\nlevel_map = {\n    StateEnum.OPEN: logging.ERROR,\n    StateEnum.HALF_OPEN: logging.WARNING,\n    StateEnum.CLOSED: logging.DEBUG,\n}\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener(level_map=level_map)],\n)\n</code></pre> <p>You can also combine both options:</p> <pre><code>cb_logger = logging.getLogger(\"myapp.circuit_breaker\")\nlistener = LogListener(logger=cb_logger, level_map=level_map)\n</code></pre>"},{"location":"components/listeners/logging/#structured-logging","title":"Implementing Structured (JSON) Logging","text":"<p>For better observability in modern platforms, you can create a custom listener to output logs in a structured format like JSON.</p> <pre><code>import json\nimport logging\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass JsonLogListener(IListener):\n    def __init__(self, logger):\n        self.logger = logger\n\n    def __call__(self, signal: Signal) -&gt; None:\n        log_data = {\n            \"message\": \"Circuit breaker transition\",\n            \"circuit_name\": signal.circuit_name,\n            \"previous_state\": signal.old_state.value,\n            \"current_state\": signal.new_state.value,\n            \"timestamp_utc\": signal.timestamp,\n        }\n        self.logger.info(json.dumps(log_data))\n\n# Usage\njson_logger = logging.getLogger(\"json_logger\")\ncb_listener = JsonLogListener(json_logger)\n</code></pre>"},{"location":"components/listeners/logging/#file-logging","title":"Configuring File Logging","text":"<p>To send circuit breaker logs to a file, configure a suitable handler in your application's logging setup. <code>LogListener</code> will automatically use this configuration.</p> <pre><code>import logging\nfrom logging.handlers import RotatingFileHandler\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# Configure a rotating file handler\nhandler = RotatingFileHandler(\n    filename='circuit_breaker.log',\n    maxBytes=10*1024*1024,  # 10MB\n    backupCount=5,\n)\nhandler.setFormatter(logging.Formatter(\n    '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n))\n\n# Add the handler to the root logger\nroot_logger = logging.getLogger()\nroot_logger.addHandler(handler)\nroot_logger.setLevel(logging.INFO)\n\n# LogListener will now write to the file via the root logger.\nlog_listener = LogListener()\n</code></pre>"},{"location":"components/listeners/logging/#next-steps","title":"Next Steps","text":"<ul> <li>PrometheusListener: Expose metrics for time-series monitoring.</li> <li>SlackListener: Send real-time notifications on state changes.</li> <li>Listeners Overview: Return to the main listeners page.</li> </ul>"},{"location":"components/listeners/prometheus/","title":"PrometheusListener","text":"<p>The <code>PrometheusListener</code> exports the state and transitions of your circuit breakers as metrics that can be scraped by a Prometheus server. This allows you to build dashboards, create alerts, and gain deep insights into the stability of your services over time.</p>"},{"location":"components/listeners/prometheus/#installation","title":"Installation","text":"<p>This listener requires the <code>prometheus-client</code> library. You can install it as an extra:</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre>"},{"location":"components/listeners/prometheus/#metrics","title":"Exposed Metrics","text":"<p>The listener exports two core metrics.</p>"},{"location":"components/listeners/prometheus/#circuit_breaker_state-gauge","title":"<code>circuit_breaker_state</code> (Gauge)","text":"<p>This metric indicates the current state of a circuit breaker. Since it's a gauge, it can go up or down.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: The name of the circuit breaker.</li> <li><code>state</code>: The name of the state (<code>closed</code>, <code>open</code>, <code>half_open</code>, etc.).</li> </ul> <p>Values:</p> <ul> <li><code>1</code>: The circuit is currently in this state.</li> <li><code>0</code>: The circuit is not in this state.</li> </ul> <p>Example PromQL Usage:</p> <ul> <li> <p>Find all open circuits:</p> <pre><code>circuit_breaker_state{state=\"open\"} == 1\n</code></pre> </li> <li> <p>Count the number of circuits in each state:</p> <pre><code>sum(circuit_breaker_state) by (state)\n</code></pre> </li> </ul>"},{"location":"components/listeners/prometheus/#circuit_breaker_state_transition_total-counter","title":"<code>circuit_breaker_state_transition_total</code> (Counter)","text":"<p>This metric counts the total number of times a circuit breaker has transitioned from one state to another. Since it's a counter, its value only ever increases.</p> <p>Labels:</p> <ul> <li><code>circuit_name</code>: The name of the circuit breaker.</li> <li><code>old_state</code>: The state the circuit transitioned from.</li> <li><code>new_state</code>: The state the circuit transitioned to.</li> </ul> <p>Example PromQL Usage:</p> <ul> <li> <p>Calculate the rate of circuits tripping open over the last 5 minutes:</p> <pre><code>sum(rate(circuit_breaker_state_transition_total{new_state=\"open\"}[5m])) by (circuit_name)\n</code></pre> </li> <li> <p>Count all transitions into the <code>HALF_OPEN</code> state in the last hour:</p> <pre><code>increase(circuit_breaker_state_transition_total{new_state=\"half_open\"}[1h])\n</code></pre> </li> </ul>"},{"location":"components/listeners/prometheus/#usage","title":"Usage","text":""},{"location":"components/listeners/prometheus/#basic-setup","title":"Basic Setup","text":"<p>For simple scripts or background workers, you can start the Prometheus client's HTTP server in a separate thread.</p> <pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Start the Prometheus metrics server on port 8000.\n# This runs in a background thread and does not block.\nstart_http_server(8000)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n# Your application logic here...\n\n# The metrics will be available at http://localhost:8000/metrics\n</code></pre>"},{"location":"components/listeners/prometheus/#integration-with-web-frameworks-fastapi","title":"Integration with Web Frameworks (FastAPI)","text":"<p>When using a web framework like FastAPI or Flask, you should integrate the Prometheus metrics endpoint directly into your application instead of starting a separate server.</p> <pre><code>from fastapi import FastAPI\nfrom prometheus_client import make_asgi_app\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Create an ASGI app for the Prometheus metrics.\nmetrics_app = make_asgi_app()\n\napp = FastAPI()\n# Mount the metrics app at the /metrics endpoint.\napp.mount(\"/metrics\", metrics_app)\n\ncb = AsyncCircuitBreaker(\n    name=\"api_gateway\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n@app.get(\"/\")\n@cb\nasync def root():\n    # Your protected API logic...\n    return {\"message\": \"Hello World\"}\n</code></pre> <p>Note: The <code>prometheus-client</code> library is thread-safe, so a single <code>PrometheusListener</code> instance can be safely used with both synchronous and asynchronous circuit breakers. See the official documentation for more details.</p>"},{"location":"components/listeners/prometheus/#multiple-circuits","title":"Monitoring Multiple Circuit Breakers","text":"<p>To monitor multiple circuit breakers in the same application, simply reuse the same <code>PrometheusListener</code> instance. The metrics will be correctly labeled with the <code>circuit_name</code> for each breaker.</p> <pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\nstart_http_server(8000)\n\n# Create a single listener instance.\nlistener = PrometheusListener()\n\n# Add the same instance to multiple breakers.\npayment_cb = CircuitBreaker(name=\"payment_api\", ..., listeners=[listener])\ninventory_cb = CircuitBreaker(name=\"inventory_api\", ..., listeners=[listener])\n</code></pre>"},{"location":"components/listeners/prometheus/#grafana-dashboard-example","title":"Grafana Dashboard Example","text":"<p>Here are some examples of how you could visualize these metrics in a Grafana dashboard.</p>"},{"location":"components/listeners/prometheus/#panel-currently-open-circuits-stat","title":"Panel: \"Currently Open Circuits\" (Stat)","text":"<ul> <li>Query: <code>sum(circuit_breaker_state{state=\"open\"})</code></li> <li>Visualization: Stat</li> <li>Unit: None</li> <li>Thresholds: Base: 0, Step 1: 1 (Warning), Step 2: 5 (Critical)</li> <li>Description: Shows a real-time count of all circuit breakers that are currently in the <code>OPEN</code> state.</li> </ul>"},{"location":"components/listeners/prometheus/#panel-circuit-trip-rate-5m-time-series","title":"Panel: \"Circuit Trip Rate (5m)\" (Time Series)","text":"<ul> <li>Query: <code>sum(rate(circuit_breaker_state_transition_total{new_state=\"open\"}[5m])) by (circuit_name)</code></li> <li>Visualization: Time series</li> <li>Unit: Transitions per second</li> <li>Legend: <code>{{circuit_name}}</code></li> <li>Description: Shows the per-second rate of circuits tripping open, averaged over the last 5 minutes. Useful for spotting trends and identifying problematic services.</li> </ul>"},{"location":"components/listeners/prometheus/#panel-circuit-state-overview-pie-chart","title":"Panel: \"Circuit State Overview\" (Pie Chart)","text":"<ul> <li>Query: <code>sum(circuit_breaker_state) by (state)</code></li> <li>Visualization: Pie Chart</li> <li>Unit: None</li> <li>Value Options: <code>All values</code></li> <li>Description: Provides a high-level overview of the distribution of circuit breaker states across the entire system.</li> </ul>"},{"location":"components/listeners/prometheus/#custom-metrics","title":"Custom Metrics","text":"<p>If you need to export additional custom metrics, you can create your own listener by implementing the <code>IListener</code> interface.</p> <pre><code>from prometheus_client import Counter\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\n# Define a custom metric to count only OPEN transitions.\nOPEN_TRANSITIONS = Counter(\n    'circuit_breaker_open_total',\n    'Total number of times a circuit breaker has opened',\n    ['circuit_name']\n)\n\nclass CustomPrometheusListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            OPEN_TRANSITIONS.labels(circuit_name=signal.circuit_name).inc()\n</code></pre>"},{"location":"components/listeners/prometheus/#next-steps","title":"Next Steps","text":"<ul> <li>SlackListener: Get real-time notifications for state changes.</li> <li>LogListener: Configure detailed logging for transitions.</li> <li>Listeners Overview: Return to the main listeners page.</li> </ul>"},{"location":"components/listeners/slack/","title":"SlackListener / AsyncSlackListener","text":"<p>The <code>SlackListener</code> and <code>AsyncSlackListener</code> push real-time notifications about circuit breaker state changes directly to a Slack channel. This is invaluable for immediately alerting on-call engineers when a critical service starts to fail, enabling a faster response.</p>"},{"location":"components/listeners/slack/#installation","title":"Installation","text":"<p>This listener requires <code>httpx</code> for HTTP requests. You can install it as an extra:</p> <pre><code>pip install fluxgate[slack]\n</code></pre>"},{"location":"components/listeners/slack/#slack-setup","title":"Slack Setup","text":""},{"location":"components/listeners/slack/#1-create-a-slack-app","title":"1. Create a Slack App","text":"<ol> <li>Go to https://api.slack.com/apps and click Create New App.</li> <li>Choose From scratch, enter an app name (e.g., \"Circuit Breaker Alerts\"), and select your workspace.</li> </ol>"},{"location":"components/listeners/slack/#2-add-bot-token-scopes","title":"2. Add Bot Token Scopes","text":"<p>In the sidebar, go to OAuth &amp; Permissions and scroll down to the \"Scopes\" section. Add the following Bot Token Scopes:</p> <ul> <li><code>chat:write</code>: To send messages.</li> <li><code>chat:write.public</code>: To send messages to public channels (optional).</li> </ul>"},{"location":"components/listeners/slack/#3-install-the-app-and-copy-the-token","title":"3. Install the App and Copy the Token","text":"<ol> <li>Scroll back to the top of the OAuth &amp; Permissions page and click Install to Workspace.</li> <li>After installation, copy the Bot User OAuth Token. It will start with <code>xoxb-</code>.</li> </ol>"},{"location":"components/listeners/slack/#4-get-the-channel-id-and-invite-the-bot","title":"4. Get the Channel ID and Invite the Bot","text":"<ol> <li>In your Slack client, right-click the channel where you want to receive alerts, select \"View channel details,\" and copy the Channel ID from the bottom of the pop-up (e.g., <code>C1234567890</code>).</li> <li>In the same channel, type <code>/invite @YourAppName</code> to add the bot to the channel so it has permission to post messages.</li> </ol>"},{"location":"components/listeners/slack/#usage","title":"Usage","text":"<p>It is highly recommended to store your Slack token and channel ID as environment variables rather than hard-coding them in your source code.</p>"},{"location":"components/listeners/slack/#synchronous-slacklistener","title":"Synchronous (<code>SlackListener</code>)","text":"<p>Use <code>SlackListener</code> with a standard <code>CircuitBreaker</code>.</p> <pre><code>import os\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.slack import SlackListener\n\nslack_listener = SlackListener(\n    channel=os.environ[\"SLACK_CHANNEL_ID\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[slack_listener],\n)\n</code></pre>"},{"location":"components/listeners/slack/#asynchronous-asyncslacklistener","title":"Asynchronous (<code>AsyncSlackListener</code>)","text":"<p>Use <code>AsyncSlackListener</code> with an <code>AsyncCircuitBreaker</code>. The underlying HTTP calls will be made asynchronously.</p> <pre><code>import os\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.slack import AsyncSlackListener\n\nslack_listener = AsyncSlackListener(\n    channel=os.environ[\"SLACK_CHANNEL_ID\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[slack_listener],\n)\n</code></pre>"},{"location":"components/listeners/slack/#message-format","title":"Message Format","text":"<p>The listener sends threaded messages to keep conversations organized based on failure cycles:</p> <ul> <li>Thread starts on any transition \u2192 OPEN (new or continued failure cycle)</li> <li>Thread ends on transition to \u2192 CLOSED, \u2192 DISABLED, or \u2192 METRICS_ONLY</li> </ul> Transition Title Color Description CLOSED \u2192 OPEN \ud83d\udea8 Circuit Breaker Triggered Red Starts a new thread OPEN \u2192 HALF_OPEN \ud83d\udd04 Attempting Circuit Breaker Recovery Orange Reply in thread HALF_OPEN \u2192 OPEN \u26a0\ufe0f Circuit Breaker Re-triggered Red Reply in thread (thread continues) HALF_OPEN \u2192 CLOSED \u2705 Circuit Breaker Recovered Green Reply + broadcast, then clears thread Any other \u2139\ufe0f Circuit Breaker State Changed Gray Fallback for manual transitions <p>Transitions to <code>CLOSED</code>, <code>DISABLED</code>, or <code>METRICS_ONLY</code> end the current thread, so the next failure cycle starts a fresh thread. Transitions to <code>FORCED_OPEN</code> keep the thread open since the failure cycle continues.</p>"},{"location":"components/listeners/slack/#advanced-usage","title":"Advanced Usage","text":""},{"location":"components/listeners/slack/#custom-messages","title":"Custom Messages","text":"<p>To customize message templates (e.g., for different languages), you can subclass <code>SlackListener</code> and override the class attributes.</p> <p>Each template is a <code>Template</code> TypedDict with three required keys:</p> <ul> <li><code>title</code>: The message title (supports emoji)</li> <li><code>color</code>: Hex color code for the attachment sidebar</li> <li><code>description</code>: Detailed description of the state change</li> </ul> <pre><code>from fluxgate.listeners.slack import SlackListener, Template\nfrom fluxgate.state import StateEnum\n\nclass KoreanSlackListener(SlackListener):\n    \"\"\"SlackListener with Korean messages.\"\"\"\n\n    TRANSITION_TEMPLATES: dict[tuple[StateEnum, StateEnum], Template] = {\n        (StateEnum.CLOSED, StateEnum.OPEN): {\n            \"title\": \"\ud83d\udea8 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc791\ub3d9\",\n            \"color\": \"#FF4C4C\",\n            \"description\": \"\uc694\uccad \uc2e4\ud328\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4.\",\n        },\n        (StateEnum.OPEN, StateEnum.HALF_OPEN): {\n            \"title\": \"\ud83d\udd04 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \ubcf5\uad6c \uc2dc\ub3c4 \uc911\",\n            \"color\": \"#FFA500\",\n            \"description\": \"\ubd80\ubd84 \uc694\uccad\uc73c\ub85c \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ud14c\uc2a4\ud2b8\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\",\n        },\n        (StateEnum.HALF_OPEN, StateEnum.OPEN): {\n            \"title\": \"\u26a0\ufe0f \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc7ac\uc791\ub3d9\",\n            \"color\": \"#FF4C4C\",\n            \"description\": \"\ud14c\uc2a4\ud2b8 \uc694\uccad\uc774 \uc2e4\ud328\ud558\uc5ec \uc5f4\ub9bc \uc0c1\ud0dc\ub85c \ubcf5\uadc0\ud569\ub2c8\ub2e4.\",\n        },\n        (StateEnum.HALF_OPEN, StateEnum.CLOSED): {\n            \"title\": \"\u2705 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \ubcf5\uad6c\ub428\",\n            \"color\": \"#36a64f\",\n            \"description\": \"\ud14c\uc2a4\ud2b8 \uc694\uccad\uc774 \uc131\uacf5\ud558\uc5ec \uc11c\ube44\uc2a4\uac00 \uc815\uc0c1\uc785\ub2c8\ub2e4.\",\n        },\n    }\n\n    FALLBACK_TEMPLATE: Template = {\n        \"title\": \"\u2139\ufe0f \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc \ubcc0\uacbd\",\n        \"color\": \"#808080\",\n        \"description\": \"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\",\n    }\n</code></pre>"},{"location":"components/listeners/slack/#troubleshooting","title":"Troubleshooting","text":"<ul> <li><code>invalid_auth</code> error: Your bot token is likely incorrect or has been revoked.</li> <li><code>not_in_channel</code> error: You have not invited the bot to the channel. Type <code>/invite @YourAppName</code> in the channel.</li> <li><code>channel_not_found</code> error: The channel ID is incorrect.</li> <li>No messages appear:<ul> <li>Check that the <code>chat:write</code> scope was added under OAuth &amp; Permissions.</li> <li>Ensure the app was re-installed to the workspace after scopes were changed.</li> <li>Verify the circuit breaker is actually changing state.</li> </ul> </li> </ul>"},{"location":"components/listeners/slack/#next-steps","title":"Next Steps","text":"<ul> <li>PrometheusListener: Set up metrics-based monitoring and alerting.</li> <li>LogListener: Configure detailed logging for all transitions.</li> <li>Listeners Overview: Return to the main listeners page.</li> </ul>"},{"location":"ko/","title":"Fluxgate","text":"<p>\ub3d9\uae30 \ubc0f \ube44\ub3d9\uae30 \ucf54\ub4dc\ub97c \ubaa8\ub450 \uc644\ubcbd\ud558\uac8c \uc9c0\uc6d0\ud558\ub294 Python\uc6a9 \ud604\ub300\uc801\uc774\uace0 \uc870\ud569 \uac00\ub2a5\ud55c Circuit Breaker \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/#fluxgate_1","title":"\uc65c Fluxgate\uc778\uac00?","text":"<p>Circuit breaker\ub294 \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc2e4\ud328\ud558\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud638\ucd9c\uc744 \uc77c\uc2dc\uc801\uc73c\ub85c \ucc28\ub2e8\ud558\uc5ec \uc5f0\uc1c4\uc801\uc778 \uc2e4\ud328\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4. Fluxgate\ub294 \ub2e4\uc74c \uae30\ub2a5\uc744 \ud1b5\ud574 \uc774\ub97c \uc27d\uac8c \ub9cc\ub4e4\uc5b4\uc90d\ub2c8\ub2e4.</p> <ul> <li>\ub3d9\uae30 &amp; \ube44\ub3d9\uae30: \ub3d9\uae30 \ubc0f \ube44\ub3d9\uae30 \uc9c0\uc6d0</li> <li>\uc870\ud569 \uac00\ub2a5: \uac04\ub2e8\ud558\uace0 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubcf5\uc7a1\ud55c \uc2e4\ud328 \uac10\uc9c0 \ub85c\uc9c1 \uad6c\uc131</li> <li>\uc758\uc874\uc131 \uc5c6\uc74c: \ucf54\uc5b4 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc678\ubd80 \uc758\uc874\uc131\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.</li> <li>\uc644\uc804\ud55c \ud0c0\uc785 \ud78c\ud305: IDE \uc9c0\uc6d0\uc744 \uc704\ud55c \uc644\ubcbd\ud55c \ud0c0\uc785 \ud78c\ud2b8</li> <li>\ubaa8\ub2c8\ud130\ub9c1 \uc9c0\uc6d0: Prometheus, Slack \ubc0f \ub85c\uae45\uc744 \ud1b5\ud55c \ub0b4\uc7a5 \ubaa8\ub2c8\ud130\ub9c1</li> </ul>"},{"location":"ko/#_1","title":"\ube60\ub978 \uc2dc\uc791","text":""},{"location":"ko/#_2","title":"\uc124\uce58","text":"<pre><code>pip install fluxgate\n</code></pre>"},{"location":"ko/#_3","title":"\uae30\ubcf8 \uc608\uc81c","text":"<pre><code>from fluxgate import CircuitBreaker\n\ncb = CircuitBreaker(\"payment_api\")\n\n@cb\ndef call_payment_api(amount: float):\n    pass  # \uacb0\uc81c API \ud638\ucd9c\n</code></pre> <p>\uc774\uac8c \uc804\ubd80\uc785\ub2c8\ub2e4! Circuit breaker\ub294 \ud569\ub9ac\uc801\uc778 \uae30\ubcf8\uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd (\ucd5c\uc18c 100\ud68c \ud638\ucd9c \ud6c4)</li> <li>\ubcf5\uad6c \uc2dc\ub3c4 \uc804 60\ucd08 \ub300\uae30</li> <li>\ubcf5\uad6c \uc911 60\ucd08\uc5d0 \uac78\uccd0 0%\uc5d0\uc11c 100%\uae4c\uc9c0 \uc810\uc9c4\uc801\uc73c\ub85c \ud638\ucd9c \ud5c8\uc6a9</li> </ul>"},{"location":"ko/#_4","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p>Circuit breaker\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud560\uc9c0 \ub610\ub294 \ucc28\ub2e8\ud560\uc9c0 \uacb0\uc815\ud558\ub294 \uc0c1\ud0dc \uba38\uc2e0\uc785\ub2c8\ub2e4. \ub2e4\uc74c \uc138 \uac00\uc9c0 \uc8fc\uc694 \uc0c1\ud0dc\ub85c \uc791\ub3d9\ud569\ub2c8\ub2e4.</p> <pre><code>stateDiagram-v2\n    [*] --&gt; CLOSED\n    CLOSED --&gt; OPEN: tripper\n    OPEN --&gt; HALF_OPEN: retry\n    HALF_OPEN --&gt; CLOSED: !tripper\n    HALF_OPEN --&gt; OPEN: tripper</code></pre> <ul> <li>CLOSED: \uae30\ubcf8 \uc0c1\ud0dc\uc785\ub2c8\ub2e4. \ubaa8\ub4e0 \ud638\ucd9c\uc774 \ud5c8\uc6a9\ub418\uba70 <code>tracker</code>\uac00 \ud638\ucd9c \uacb0\uacfc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud569\ub2c8\ub2e4. <code>tripper</code> \uc870\uac74\uc73c\ub85c \uc815\uc758\ub41c \uc2e4\ud328\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud558\uba74, \ube0c\ub808\uc774\ucee4\uac00 \"\ud2b8\ub9bd\"\ub418\uc5b4 <code>OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> <li>OPEN: \uc774 \uc0c1\ud0dc\uc5d0\uc11c circuit breaker\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ucc28\ub2e8\ud558\uc5ec \ucd94\uac00\uc801\uc778 \uc2e4\ud328\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4. \uad6c\uc131\ub41c <code>retry</code> \ub85c \uc77c\uc815 \uc2dc\uac04\uc744 \ub300\uae30\ud55c \ud6c4 <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> <li>HALF_OPEN: \ube0c\ub808\uc774\ucee4\ub294 <code>permit</code>\uc5d0 \uc758\ud574 \uc81c\uc5b4\ub418\ub294 \uc81c\ud55c\ub41c \uc218\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud558\uc5ec \uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c\ub418\uc5c8\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ud569\ub2c8\ub2e4. \uc774 \ud638\ucd9c\uc774 \uc131\uacf5\ud558\uba74 \ube0c\ub808\uc774\ucee4\ub294 <code>CLOSED</code> \uc0c1\ud0dc\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4. \uc2e4\ud328\ud558\uba74 \ub2e4\uc2dc \ud2b8\ub9bd\ub418\uc5b4 <code>OPEN</code> \uc0c1\ud0dc\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/#_5","title":"\ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8","text":"<p>Fluxgate\uc758 \uac15\uc810\uc740 \uc870\ud569 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\uc5d0\uc11c \ub098\uc635\ub2c8\ub2e4. \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc870\ud569\ud558\uc5ec \ud544\uc694\uc5d0 \ub9de\ub294 \uc815\ubc00\ud558\uace0 \uc720\uc5f0\ud55c \uc2e4\ud328 \uac10\uc9c0 \ub85c\uc9c1\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> \ucef4\ud3ec\ub10c\ud2b8 \ubaa9\uc801 \uc77c\ubc18\uc801\uc778 \uad6c\ud604 Windows \ucd5c\uadfc \ud638\ucd9c \uacb0\uacfc(\uc131\uacf5/\uc2e4\ud328)\ub97c \uc218\uc9d1\ud558\uace0 \uc800\uc7a5\ud569\ub2c8\ub2e4. <code>CountWindow(100)</code>: \ucd5c\uadfc 100\uac1c \ud638\ucd9c\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4.<code>TimeWindow(60)</code>: \ucd5c\uadfc 60\ucd08 \ub3d9\uc548\uc758 \ud638\ucd9c\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4. Trackers \ud638\ucd9c \uacb0\uacfc\uac00 \uc2e4\ud328\ub85c \ucd94\uc801\ub418\uc5b4\uc57c \ud558\ub294\uc9c0 \uacb0\uc815\ud569\ub2c8\ub2e4. <code>TypeOf(ConnectionError)</code>: \ud2b9\uc815 \uc608\uc678 \uc720\ud615\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.<code>Custom(func)</code>: \ubcf5\uc7a1\ud55c \ub85c\uc9c1\uc744 \uc704\ud574 \uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. Trippers <code>CLOSED</code> \uc0c1\ud0dc\uc5d0\uc11c <code>OPEN</code> \uc0c1\ud0dc\ub85c \ud68c\ub85c\ub97c \ud2b8\ub9bd\uc2dc\ud0a4\ub294 \uc870\uac74\uc744 \uc815\uc758\ud569\ub2c8\ub2e4. <code>FailureRate(0.5)</code>: \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd\ud569\ub2c8\ub2e4.<code>AvgLatency(2.0)</code>: \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc774 2\ucd08\ub97c \ucd08\uacfc\ud558\uba74 Open \ud569\ub2c8\ub2e4. Retries \ud68c\ub85c\uac00 <code>OPEN</code>\uc5d0\uc11c <code>HALF_OPEN</code>\uc73c\ub85c \uc804\ud658\ub418\uc5b4\uc57c \ud558\ub294 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4. <code>Cooldown(60.0)</code>: 60\ucd08 \uace0\uc815 \ucfe8\ub2e4\uc6b4\uc744 \uae30\ub2e4\ub9bd\ub2c8\ub2e4.<code>Backoff(10.0)</code>: 10\ucd08\ubd80\ud130 \uc2dc\uc791\ud558\uc5ec \uc9c0\uc218 \ubc31\uc624\ud504 \uc2dc\uac04\ub9cc\ud07c \ub300\uae30\ud569\ub2c8\ub2e4. Permits <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \ud638\ucd9c \uc218\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4. <code>Random(0.5)</code>: \ud638\ucd9c\uc758 50%\ub97c \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.<code>RampUp(0.1, 0.8, 60)</code>: 60\ucd08 \ub3d9\uc548 \ud5c8\uc6a9 \ud638\ucd9c \ube44\uc728\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4."},{"location":"ko/#_6","title":"\ube44\ub3d9\uae30 \uc9c0\uc6d0","text":"<p>Asyncio \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc644\ubcbd\ud558\uac8c \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</p> <pre><code>import asyncio\nfrom fluxgate import AsyncCircuitBreaker\n\ncb = AsyncCircuitBreaker(\"async_api\")\n\n@cb\nasync def call_async_api():\n    pass  # \ube44\ub3d9\uae30 HTTP \ud638\ucd9c\n\nasync def main():\n    result = await call_async_api()\n\nasyncio.run(main())\n</code></pre>"},{"location":"ko/#_7","title":"\uc804\uccb4 \uc608\uc81c","text":"<p>\uc678\ubd80 \uacb0\uc81c API\ub97c \uc704\ud55c \uc804\uccb4 \uad6c\uc131 \uc608\uc81c\uc785\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, FailureStreak\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# 5xx \uc5d0\ub7ec\uc640 \ub124\ud2b8\uc6cc\ud06c \uc2e4\ud328\ub9cc \ucd94\uc801\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    window=CountWindow(size=100),\n    tracker=Custom(is_retriable_error),\n    tripper=FailureStreak(5) | (MinRequests(20) &amp; (\n        (Closed() &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; FailureRate(0.5))\n    )),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0, jitter_ratio=0.1),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\"https://payment-api.example.com/charge\", json={\"amount\": amount})\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"ko/#_8","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>\ucef4\ud3ec\ub10c\ud2b8 \uc54c\uc544\ubcf4\uae30 - Windows, Trackers, Trippers, Retries, Permits \uc2ec\ud654 \ud559\uc2b5</li> <li>\uc608\uc81c \ubcf4\uae30 - \uc2e4\uc81c \uc0ac\uc6a9 \ud328\ud134</li> <li>API \ub808\ud37c\ub7f0\uc2a4 \uc77d\uae30 - \uc644\uc804\ud55c API \ubb38\uc11c</li> </ul>"},{"location":"ko/circuit-breaker/","title":"Circuit Breaker","text":"<p>Circuit Breaker\ub294 \uc2e4\ud328\ud560 \uac00\ub2a5\uc131\uc774 \uc788\ub294 \uc791\uc5c5\uc744 \uc2dc\uc2a4\ud15c\uc774 \ubc18\ubcf5\uc801\uc73c\ub85c \uc2e4\ud589\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\ub294 \uba54\ucee4\ub2c8\uc998\uc73c\ub85c, \ud68c\ubcf5\ub825 \uc788\ub294 \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\ub294 \ub370 \ud544\uc218\uc801\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/circuit-breaker/#core-concepts","title":"\ud575\uc2ec \uac1c\ub150","text":"<p>\ud68c\ub85c \ucc28\ub2e8\uae30\uc640 \uc720\uc0ac\ud55c \ubc29\uc2dd\uc73c\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4.</p> <ul> <li>\ubaa8\ub4e0 \uac83\uc774 \uc815\uc0c1\uc77c \ub54c\ub294 \ud68c\ub85c\uac00 Closed \uc0c1\ud0dc\uc774\uba70, \ud638\ucd9c\uc774 \ud1b5\uacfc\ub429\ub2c8\ub2e4.</li> <li>\uc2e4\ud328\uac00 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud558\uba74 \ud68c\ub85c\uac00 Open\uc73c\ub85c \uc804\ud658\ub418\uba70, \ud638\ucd9c\uc774 \ucc28\ub2e8\ub429\ub2c8\ub2e4.</li> <li>\ud0c0\uc784\uc544\uc6c3 \ud6c4\uc5d0 \ud68c\ub85c\ub294 Half Open \uc0c1\ud0dc\ub85c \uc9c4\uc785\ud558\uc5ec \uc77c\uc815 \ud638\ucd9c\uc744 \ud1b5\uacfc\uc2dc\ucf1c \ud14c\uc2a4\ud2b8\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/circuit-breaker/#state-transitions","title":"\uc0c1\ud0dc \uc804\ud658","text":"<p>Circuit breaker\ub294 <code>CLOSED</code>, <code>OPEN</code>, <code>HALF_OPEN</code>\uc758 \uc138 \uac00\uc9c0 \uc8fc\uc694 \uc0c1\ud0dc \uc0ac\uc774\ub97c \uc790\ub3d9\uc73c\ub85c \uc804\ud658\ud569\ub2c8\ub2e4. \ub610\ud55c \uc720\uc9c0\ubcf4\uc218 \ubc0f \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 \uc218\ub3d9 \uc0c1\ud0dc(<code>DISABLED</code>, <code>FORCED_OPEN</code>, <code>METRICS_ONLY</code>)\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <pre><code>stateDiagram-v2\n    [*] --&gt; CLOSED\n    CLOSED --&gt; OPEN: tripper\n    OPEN --&gt; HALF_OPEN: retry\n    HALF_OPEN --&gt; CLOSED: !tripper\n    HALF_OPEN --&gt; OPEN: tripper</code></pre>"},{"location":"ko/circuit-breaker/#state-closed","title":"CLOSED: \uc815\uc0c1 \uc0c1\ud0dc","text":"<p>\uc774\uac83\uc740 \ubaa8\ub4e0 \ud638\ucd9c\uc774 \ubcf4\ud638\ub41c \uc11c\ube44\uc2a4\ub85c \uc804\ub2ec\ub418\ub294 \uae30\ubcf8 \uc791\ub3d9 \uc0c1\ud0dc\uc785\ub2c8\ub2e4. Circuit breaker\ub294 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \ud638\ucd9c\uc744 \uc9c0\uc18d\uc801\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> <li>\ubaa8\ub2c8\ud130\ub9c1: \uc131\uacf5 \ubc0f \uc2e4\ud328\ub97c \ucd94\uc801\ud569\ub2c8\ub2e4.</li> <li>\uc804\ud658: <code>tripper</code>\ub85c \uc815\uc758\ub41c \uc2e4\ud328 \uc784\uacc4\uac12\uc774 \ucda9\uc871\ub418\uba74 <code>OPEN</code>\uc73c\ub85c \ud2b8\ub9bd\ub429\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate import CircuitBreaker\n\n# \uae30\ubcf8\uac12 \uc0ac\uc6a9: 100\ud68c \ud638\ucd9c \ud6c4 50% \uc2e4\ud328\uc728\uc5d0\uc11c \ud2b8\ub9bd, 60\ucd08 \ucfe8\ub2e4\uc6b4\ncb = CircuitBreaker(\"api\")\n</code></pre>"},{"location":"ko/circuit-breaker/#state-open","title":"OPEN: \uc2e4\ud328 \uc0c1\ud0dc","text":"<p>\uc2e4\ud328 \uc784\uacc4\uac12\uc774 \ucd08\uacfc\ub418\uba74 \ud68c\ub85c\uac00 \uc5f4\ub9bd\ub2c8\ub2e4. \uc774 \uc0c1\ud0dc\uc5d0\uc11c\ub294 \uc11c\ube44\uc2a4\uc5d0 \uc5f0\ub77d\uc744 \uc2dc\ub3c4\ud558\uc9c0 \uc54a\uace0 \ubaa8\ub4e0 \ud638\ucd9c\uc744 \uc989\uc2dc \uac70\ubd80\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ucc28\ub2e8\ud558\uace0 <code>CallNotPermittedError</code>\ub97c \ubc1c\uc0dd\uc2dc\ud0b5\ub2c8\ub2e4.</li> <li>Half Open\uc73c\ub85c \uc804\ud658: <code>retry</code>\ub85c \uc778\ud574 <code>HALF_OPEN</code>\uc73c\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> </ul> <p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2e4\ud328\ud558\ub294 \uc11c\ube44\uc2a4\uc5d0 \ub9ac\uc18c\uc2a4\ub97c \ub0ad\ube44\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uace0 \uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c\ub420 \uc2dc\uac04\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef call_api():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = call_api()\nexcept CallNotPermittedError as e:\n    # \ud68c\ub85c\uac00 \uc5f4\ub824 \uc788\uc73c\ubbc0\ub85c, \ub300\uccb4 \ub85c\uc9c1\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\n    print(f\"Circuit is open: {e.message}\")\n    return {\"fallback\": \"data\"}\n</code></pre>"},{"location":"ko/circuit-breaker/#state-half-open","title":"HALF_OPEN: \ubcf5\uad6c \uc0c1\ud0dc","text":"<p>Retry\ub85c \uc77c\uc815 \uc2dc\uac04\uc744 \ub300\uae30\ud55c \ud6c4 \ud68c\ub85c\ub294 \uc774 \uc0c1\ud0dc\ub85c \uc804\ud658\ub418\uc5b4 \uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c\ub418\uc5c8\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: <code>permit</code> \uc73c\ub85c \uc815\uc758\ub41c \uc81c\ud55c\ub41c \uc218\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> <li>CLOSED\ub85c \uc804\ud658: \ud638\ucd9c\uc774 \uc131\uacf5\ud558\uba74 \ud68c\ub85c\uac00 \ub2eb\ud788\uace0 \uc815\uc0c1 \uc791\ub3d9\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.</li> <li>OPEN\uc73c\ub85c \uc804\ud658: \ud638\ucd9c\uc774 \uc2e4\ud328\ud558\uba74 \ud68c\ub85c\ub294 \ub2e4\uc2dc <code>OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> </ul> <p>\uc774 \uc810\uc9c4\uc801\uc778 \ubcf5\uad6c \uc811\uadfc \ubc29\uc2dd\uc740 \uc544\uc9c1 \ubd88\uc548\uc815\ud55c \uc11c\ube44\uc2a4\uc5d0 \"\ub3d9\uc2dc\ub2e4\ubc1c\uc801\uc778 \uc694\uccad\"\uc774 \uc1c4\ub3c4\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    # \ubcf5\uad6c \ud14c\uc2a4\ud2b8 \uc911\uc5d0\ub294 \ub354 \uc5c4\uaca9\ud55c \ud2b8\ub9bd \uc870\uac74\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n    tripper=MinRequests(5) &amp; FailureRate(0.3),\n    # 10%\uc758 \ud2b8\ub798\ud53d\uc744 \ud5c8\uc6a9\ud558\ub294 \uac83\uc73c\ub85c \uc2dc\uc791\ud558\uc5ec 60\ucd08 \ub3d9\uc548 80%\uae4c\uc9c0 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n)\n</code></pre>"},{"location":"ko/circuit-breaker/#state-metrics-only","title":"METRICS_ONLY: \ud2b8\ub9bd \uc5c6\uc774 \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\uc774 \uc0c1\ud0dc\uc5d0\uc11c circuit breaker\ub294 Metric\uc744 \ucd94\uc801\ud558\uc9c0\ub9cc \uc808\ub300 \ud2b8\ub9bd\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: <code>CLOSED</code> \uc0c1\ud0dc\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \ubaa8\ub4e0 \ud638\ucd9c\uc774 \ud1b5\uacfc\ub418\ub3c4\ub85d \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> </ul> <p>\ud65c\uc131 \ubcf4\ud638\ub97c \ud65c\uc131\ud654\ud558\uae30 \uc804\uc5d0 \uc0c8 \uc11c\ube44\uc2a4\uc5d0\uc11c \ub610\ub294 \ub85c\ub4dc \ud14c\uc2a4\ud2b8 \uc911\uc5d0 \uc548\uc804\ud558\uac8c Metric\uc744 \uc218\uc9d1\ud569\ub2c8\ub2e4.</p> <pre><code># \ube0c\ub808\uc774\ucee4\ub97c \ud65c\uc131\ud654\ud558\uae30 \uc804\uc5d0 Metric\uc744 \uc218\uc9d1\ud569\ub2c8\ub2e4.\ncb.metrics_only()\n\n# \uc900\ube44\uac00 \ub418\uba74 circuit breaker\uc758 \uc77c\ubc18\uc801\uc778 \uc218\uba85 \uc8fc\uae30\ub97c \ud65c\uc131\ud654\ud569\ub2c8\ub2e4.\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#state-disabled","title":"DISABLED: \ube0c\ub808\uc774\ucee4 \uc6b0\ud68c","text":"<p>\uc774 \uc0c1\ud0dc\ub294 circuit breaker\ub97c \uc644\uc804\ud788 \ube44\ud65c\uc131\ud654\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: \ubaa8\ub4e0 \ud638\ucd9c\uc774 \ud1b5\uacfc\ub418\ub3c4\ub85d \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> <li>\ubaa8\ub2c8\ud130\ub9c1: \uc5b4\ub5a0\ud55c Metric\ub3c4 \ucd94\uc801\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</li> </ul> <p>\ub514\ubc84\uae45, \ud2b9\uc815 \ud14c\uc2a4\ud2b8 \uc2e4\ud589 \ub610\ub294 \ube0c\ub808\uc774\ucee4\ub97c \uc644\uc804\ud788 \uc6b0\ud68c\ud574\uc57c \ud558\ub294 \uae34\uae09 \uc0c1\ud669\uc5d0 \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code># \uae34\uae09 \uc0c1\ud669 \uc2dc circuit breaker\ub97c \ube44\ud65c\uc131\ud654\ud569\ub2c8\ub2e4.\ncb.disable()\n\n# \ub098\uc911\uc5d0 \ub2e4\uc2dc \ud65c\uc131\ud654\ud569\ub2c8\ub2e4.\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#state-forced-open","title":"FORCED_OPEN: \uc218\ub3d9\uc73c\ub85c \ud638\ucd9c \ucc28\ub2e8","text":"<p>\uc774 \uc0c1\ud0dc\ub294 \ud68c\ub85c\ub97c \uac15\uc81c\ub85c \uc5f4\uace0 \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ucc28\ub2e8\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc791\ub3d9: <code>CallNotPermittedError</code>\uc640 \ud568\uaed8 \ubaa8\ub4e0 \ud638\ucd9c\uc744 \uac70\ubd80\ud569\ub2c8\ub2e4.</li> <li>\ubcf5\uad6c: \uc790\ub3d9\uc73c\ub85c \ubcf5\uad6c\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc218\ub3d9 <code>reset()</code> \ud638\ucd9c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</li> </ul> <p>\uacc4\ud68d\ub41c \uc720\uc9c0\ubcf4\uc218 \ub610\ub294 \uc11c\ube44\uc2a4\ub97c \uc218\ub3d9\uc73c\ub85c \uc624\ud504\ub77c\uc778\uc73c\ub85c \uc804\ud658\ud558\ub294 \ub370 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code># \uacc4\ud68d\ub41c \ubc30\ud3ec \uc911\uc5d0 \ud68c\ub85c\ub97c \uac15\uc81c\ub85c \uc5fd\ub2c8\ub2e4.\ncb.force_open()\n\n# \uc720\uc9c0\ubcf4\uc218 \uc644\ub8cc \ud6c4 \uc815\uc0c1 \uc791\ub3d9\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.\ncb.reset()\n</code></pre>"},{"location":"ko/circuit-breaker/#usage","title":"\uc0ac\uc6a9 \ubc29\ubc95","text":"<p>\ucf54\ub4dc\uc5d0 circuit breaker\ub97c \uc5ec\ub7ec \uac00\uc9c0 \ubc29\ubc95\uc73c\ub85c \uc801\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/circuit-breaker/#decorator-usage","title":"\ub370\ucf54\ub808\uc774\ud130 \ubc29\uc2dd","text":"<p>\ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ud568\uc218\ub97c \ubcf4\ud638\ud558\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uace0 \ud3b8\ub9ac\ud55c \ubc29\ubc95\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),  # \uc774 \uc5d0\ub7ec\ub9cc \ucd94\uc801\n)\n\n@cb\ndef charge_payment(amount: float):\n    pass  # \uacb0\uc81c API \ud638\ucd9c\n</code></pre>"},{"location":"ko/circuit-breaker/#call-usage","title":"\uc9c1\uc811 \ud638\ucd9c \ubc29\uc2dd","text":"<p><code>call</code> \uba54\uc11c\ub4dc\ub294 \ub370\ucf54\ub808\uc774\ud130\ub85c \uc218\uc815\ud560 \uc218 \uc5c6\ub294 \ud568\uc218(\uc608: \uc11c\ub4dc\ud30c\ud2f0 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ud568\uc218)\ub97c \ubcf4\ud638\ud574\uc57c \ud560 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>def process_payment(amount: float):\n    pass  # \uacb0\uc81c API \ud638\ucd9c\n\n# .call()\ub85c \ud568\uc218\ub97c \uac10\uc2f8\uc11c \ubcf4\ud638\ud569\ub2c8\ub2e4.\nresult = cb.call(process_payment, amount=100.0)\n</code></pre>"},{"location":"ko/circuit-breaker/#async-usage","title":"\ube44\ub3d9\uae30 \uc9c0\uc6d0","text":"<p>Fluxgate\ub294 <code>AsyncCircuitBreaker</code>\ub97c \ud1b5\ud574 \ucd5c\uc2e0 <code>asyncio</code> \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc644\ubcbd\ud558\uac8c \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</p> <p>Note</p> <p>\ubcf5\uad6c \uc911\uc778 \uc11c\ube44\uc2a4\uc5d0 \uacfc\ubd80\ud558\uac00 \uac78\ub9ac\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574 <code>AsyncCircuitBreaker</code>\ub294 <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \ub3d9\uc2dc \ud638\ucd9c \uc218\ub97c \uc81c\ud55c\ud569\ub2c8\ub2e4. \uc774\ub294 <code>max_half_open_calls</code> \ub9e4\uac1c\ubcc0\uc218(\uae30\ubcf8\uac12\uc740 10)\uc5d0 \uc758\ud574 \uc81c\uc5b4\ub418\uba70, \ub0b4\ubd80\uc801\uc73c\ub85c <code>asyncio.Semaphore</code>\uc5d0 \uc758\ud574 \uad00\ub9ac\ub429\ub2c8\ub2e4.</p> <pre><code>import asyncio\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    tracker=TypeOf(httpx.ConnectError),\n    max_half_open_calls=5,  # HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ub3d9\uc2dc \ud638\ucd9c\uc744 5\uac1c\ub85c \uc81c\ud55c\ud569\ub2c8\ub2e4.\n)\n\n@cb\nasync def fetch_data():\n    pass  # \ube44\ub3d9\uae30 HTTP \ud638\ucd9c\n\n# await\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube44\ub3d9\uae30 \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4.\nasync def main():\n    result = await fetch_data()\n\nasyncio.run(main())\n</code></pre>"},{"location":"ko/circuit-breaker/#info","title":"\ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc \ud655\uc778","text":"<p><code>.info()</code> \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec circuit breaker\uc758 \ud604\uc7ac \uc0c1\ud0dc\uc640 Metric\uc744 \uc5b8\uc81c\ub4e0\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>info = cb.info()\nprint(f\"Circuit: {info.name}\")\nprint(f\"State: {info.state}\")\nprint(f\"Last state change: {info.changed_at}\")\nprint(f\"Reopens at: {info.reopens}\")\nprint(f\"Current metrics: {info.metrics}\")\n\n# \ucd9c\ub825 \uc608\uc2dc\n# Circuit: payment_api\n# State: closed\n# Last state change: 1234567890.123\n# Reopens at: 0\n# Current metrics: Metric(total_count=100, failure_count=5, total_duration=45.2, slow_count=3)\n</code></pre>"},{"location":"ko/circuit-breaker/#manual-control","title":"\uc218\ub3d9 \uc81c\uc5b4","text":"<p>circuit breaker\uc758 \uc0c1\ud0dc\ub97c \uc218\ub3d9\uc73c\ub85c \uc81c\uc5b4\ud574\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># CLOSED \uc0c1\ud0dc\ub85c \uc7ac\uc124\uc815\ud558\uace0 \ubaa8\ub4e0 Metric\uc744 \uc9c0\uc6c1\ub2c8\ub2e4.\ncb.reset()\n\n# \ud2b8\ub9bd \uc5c6\uc774 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30 \uc704\ud574 METRICS_ONLY\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.\ncb.metrics_only()\n\n# \ube0c\ub808\uc774\ucee4\ub97c \uc644\uc804\ud788 \uc6b0\ud68c\ud558\uae30 \uc704\ud574 DISABLED\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.\ncb.disable()\n\n# \ud638\ucd9c\uc744 \uc218\ub3d9\uc73c\ub85c \ucc28\ub2e8\ud558\uae30 \uc704\ud574 FORCED_OPEN\uc73c\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.\ncb.force_open()\n\n# Listener\uc5d0\uac8c \uc54c\ub9bc \uc5c6\uc774 \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\ncb.reset(notify=False)\n</code></pre>"},{"location":"ko/circuit-breaker/#error-handling","title":"\uc624\ub958 \ucc98\ub9ac \ubc0f Fallback","text":"<p>\ud68c\ub85c\uac00 \uc5f4\ub9ac\uba74 <code>CallNotPermittedError</code>\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. \uce90\uc2dc\ub41c \ub370\uc774\ud130 \ub610\ub294 \uae30\ubcf8\uac12\uc744 \ubc18\ud658\ud558\ub294 \uac83\uacfc \uac19\uc740 \ub300\uccb4 \uc751\ub2f5\uc744 \uc81c\uacf5\ud558\uae30 \uc704\ud574 Fallback \uba54\ucee4\ub2c8\uc998\uc744 \uc815\uc758\ud558\uc5ec \uc774\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/circuit-breaker/#fallback-parameter","title":"<code>fallback</code>\uc744 \uc0ac\uc6a9\ud55c \uc790\ub3d9 Fallback","text":"<p>\uac00\uc7a5 \uc26c\uc6b4 \ubc29\ubc95\uc740 \ub370\ucf54\ub808\uc774\ud130\uc5d0 \uc9c1\uc811 Fallback \ud568\uc218\ub97c \uc81c\uacf5\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \uc774 \ud568\uc218\ub294 \ubcf4\ud638\ub41c \ud568\uc218\uc5d0\uc11c \ubaa8\ub4e0 \uc608\uc678\uac00 \ubc1c\uc0dd\ud560 \ub54c\ub9c8\ub2e4 \uc790\ub3d9\uc73c\ub85c \ud638\ucd9c\ub429\ub2c8\ub2e4. Fallback \ud568\uc218\ub294 \uc608\uc678 \uc778\uc2a4\ud134\uc2a4\ub97c \ubc1b\uc73c\ubbc0\ub85c \uc5b4\ub5bb\uac8c \ucc98\ub9ac\ud560\uc9c0 \uacb0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code># Fallback \ud568\uc218\ub294 \uc608\uc678\ub97c \uc778\uc218\ub85c \ubc1b\uc2b5\ub2c8\ub2e4.\ndef handle_error(e: Exception) -&gt; dict:\n    if isinstance(e, CallNotPermittedError):\n        return get_cached_data()  # \ud68c\ub85c\uac00 \uc5f4\ub9bc\n    if isinstance(e, TimeoutError):\n        return get_stale_data()   # \uc791\uc5c5 \uc2dc\uac04 \ucd08\uacfc\n    raise e  # \ub2e4\ub978 \uc608\uc0c1\uce58 \ubabb\ud55c \uc608\uc678\ub294 \ub2e4\uc2dc \ubc1c\uc0dd\uc2dc\ud0b5\ub2c8\ub2e4.\n\n@cb(fallback=handle_error)\ndef api_call() -&gt; dict:\n    return requests.get(\"https://api.example.com\").json()\n\n# \uc608\uc678 \ubc1c\uc0dd \uc2dc Fallback\uc774 \uc790\ub3d9\uc73c\ub85c \ud638\ucd9c\ub429\ub2c8\ub2e4.\nresult = api_call()\n</code></pre>"},{"location":"ko/circuit-breaker/#call-with-fallback","title":"<code>call_with_fallback</code>\uc744 \uc0ac\uc6a9\ud55c \uba85\uc2dc\uc801 Fallback","text":"<p>\ub2e8\uc77c \ud638\ucd9c\uc5d0 \ub300\ud574 Fallback\uc744 \uba85\uc2dc\uc801\uc73c\ub85c \uc9c0\uc815\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>result = cb.call_with_fallback(\n    fetch_from_api,\n    fallback_func=lambda e: get_cached_data(),\n)\n</code></pre>"},{"location":"ko/circuit-breaker/#manual-try-except","title":"\uc218\ub3d9 <code>try...except</code> \ucc98\ub9ac","text":"<p>\ucd5c\ub300\ud55c\uc758 \uc81c\uc5b4\ub97c \uc704\ud574 \ud45c\uc900 <code>try...except</code> \ube14\ub85d\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate.errors import CallNotPermittedError\n\n@cb\ndef api_call():\n    return requests.get(\"https://api.example.com\")\n\ntry:\n    result = api_call()\nexcept CallNotPermittedError:\n    # \ud68c\ub85c\uac00 \uc5f4\ub824 \uc788\uc73c\ubbc0\ub85c, Fallback\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\n    result = get_cached_data()\nexcept Exception as e:\n    # \uae30\ubcf8 \uc11c\ube44\uc2a4 \ud638\ucd9c\uc774 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.\n    logging.error(f\"API \ud638\ucd9c \uc2e4\ud328: {e}\")\n    raise\n</code></pre>"},{"location":"ko/circuit-breaker/#complete-example","title":"\uc804\uccb4 \uc608\uc81c","text":"<pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nfrom fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate, FailureStreak\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# \uc911\uc694\ud55c \uc11c\ubc84 \uce21 \uc624\ub958\ub9cc \uc2e4\ud328\ub85c \uac04\uc8fc\ud558\ub3c4\ub85d \uc0ac\uc6a9\uc790 \uc815\uc758 Tracker\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.\ndef is_retriable_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500  # 5xx \uc624\ub958\ub294 \uc2e4\ud328\uc785\ub2c8\ub2e4.\n    # \ub610\ud55c \ub124\ud2b8\uc6cc\ud06c \uc624\ub958\ub3c4 \ucd94\uc801\ud569\ub2c8\ub2e4.\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\npayment_cb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=Custom(is_retriable_error),\n    tripper=(\n        # 5\ud68c \uc5f0\uc18d \uc2e4\ud328 \uc2dc \ube60\ub978 \ud2b8\ub9bd (\ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \ubcf4\ud638).\n        FailureStreak(5) |\n        # \ucda9\ubd84\ud55c \ub370\uc774\ud130\uac00 \uc218\uc9d1\ub418\uba74 \uc2e4\ud328\uc728/\ub290\ub9b0 \ud638\ucd9c\uc728 \uae30\ubc18 \ud1b5\uacc4\uc801 \ud2b8\ub9bd.\n        (MinRequests(20) &amp; (\n            (Closed() &amp; (FailureRate(0.6) | SlowRate(0.3))) |\n            (HalfOpened() &amp; (FailureRate(0.5) | SlowRate(0.2)))\n        ))\n    ),\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0,\n        jitter_ratio=0.1  # \ub3d9\uc2dc\ub2e4\ubc1c\uc801\uc778 \uc694\uccad\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc9c0\ud130\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\n    ),\n    permit=RampUp(\n        initial=0.1,      # 10% \ud2b8\ub798\ud53d \ud5c8\uc6a9\ubd80\ud130 \uc2dc\uc791\ud569\ub2c8\ub2e4.\n        final=0.5,        # 50%\uae4c\uc9c0 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.\n        duration=60.0     # 60\ucd08\uc5d0 \uac78\uccd0 \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.\n    ),\n    slow_threshold=3.0,  # 3\ucd08 \uc774\uc0c1\uc758 \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ub290\ub9b0 \ud638\ucd9c\ub85c \ud45c\uc2dc\ud569\ub2c8\ub2e4.\n    listeners=[LogListener(), PrometheusListener()],\n)\n\n@payment_cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://payment-api.example.com/charge\",\n        json={\"amount\": amount},\n        timeout=5.0\n    )\n    response.raise_for_status()\n    return response.json()\n\n# Fallback \ub85c\uc9c1\uc744 \uc0ac\uc6a9\ud55c \uc608\uc81c\ntry:\n    result = charge_payment(amount=100.0)\n    print(f\"Payment successful: {result}\")\nexcept CallNotPermittedError:\n    print(\"\uacb0\uc81c \uc11c\ube44\uc2a4\ub97c \uc77c\uc2dc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \uacb0\uc81c\ub97c \ud050\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4.\")\n    # Fallback: \ub098\uc911\uc5d0 \ucc98\ub9ac\ud560 \uacb0\uc81c\ub97c \ud050\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4.\n    queue_payment(amount=100.0)\nexcept httpx.HTTPStatusError as e:\n    print(f\"\uacb0\uc81c \uc2e4\ud328: \uc0c1\ud0dc \ucf54\ub4dc {e.response.status_code}\")\n    raise\n</code></pre>"},{"location":"ko/circuit-breaker/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>\ucef4\ud3ec\ub10c\ud2b8: circuit breaker\ub97c \uad6c\uc131\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \uc54c\uc544\ubcf4\uc138\uc694.</li> <li>\uc608\uc81c: \ub354 \ub9ce\uc740 \uc2e4\uc81c \uc0ac\uc6a9 \ud328\ud134\uacfc \uc2dc\ub098\ub9ac\uc624\ub97c \ud655\uc778\ud558\uc138\uc694.</li> <li>API \ub808\ud37c\ub7f0\uc2a4: \uc804\uccb4 API \ubb38\uc11c\ub97c \uc0b4\ud3b4\ubcf4\uc138\uc694.</li> </ul>"},{"location":"ko/examples/","title":"\uc608\uc81c","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 Fluxgate\ub97c \uc2dc\uc791\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub418\ub294 \uc2e4\uc6a9\uc801\uc778 \uc2e4\uc81c \uc608\uc81c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/examples/#1-api","title":"1. \uc678\ubd80 API \ud638\ucd9c \ubcf4\ud638","text":"<p>\uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \uc0ac\ub840\uc785\ub2c8\ub2e4. \ubaa9\ud45c\ub294 \ub290\ub9ac\uac70\ub098 \uc2e4\ud328\ud558\ub294 \uc678\ubd80 \uc11c\ube44\uc2a4\ub85c\ubd80\ud130 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubcf4\ud638\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.</p> <p>\uae30\ubcf8 \uc124\uc815\uc73c\ub85c Fluxgate\ub294 \ub2e4\uc74c\uc744 \uc218\ud589\ud569\ub2c8\ub2e4:</p> <ul> <li>\ub9c8\uc9c0\ub9c9 100\uac1c \ud638\ucd9c\uc5d0 \ub300\ud55c \uc2e4\ud328 \ucd94\uc801</li> <li>50% \uc2e4\ud328\uc728\uc5d0\uc11c \ud2b8\ub9bd (\ucd5c\uc18c 100\ud68c \ud638\ucd9c \ud6c4)</li> <li>\ubcf5\uad6c \uc804 60\ucd08 \ub300\uae30</li> <li>\ubcf5\uad6c \uc911 50%\uc758 \ud638\ucd9c \ud5c8\uc6a9</li> </ul> <pre><code>import httpx\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    tracker=TypeOf(httpx.HTTPError),  # HTTP \uc5d0\ub7ec\ub9cc \ucd94\uc801\n)\n\n@cb\ndef charge_payment(amount: float):\n    response = httpx.post(\n        \"https://api.example.com/charge\",\n        json={\"amount\": amount}\n    )\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"ko/examples/#2-fastapi","title":"2. \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\uc640 \ud1b5\ud569 (FastAPI)","text":"<p>\uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\uc640 \ud1b5\ud569\ud560 \ub54c, \uc77c\ubc18\uc801\uc73c\ub85c <code>CallNotPermittedError</code>\ub97c \uc7a1\uc544\uc11c <code>503 Service Unavailable</code>\uacfc \uac19\uc740 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 \uc624\ub958 \uc751\ub2f5\uc744 \ubc18\ud658\ud558\uace0 \uc2f6\uc744 \uac83\uc785\ub2c8\ub2e4.</p> <pre><code>from fastapi import FastAPI, HTTPException\nimport httpx\nfrom fluxgate import AsyncCircuitBreaker, CallNotPermittedError\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.retries import Cooldown\n\napp = FastAPI()\n\n# \uc911\uc694\ud55c \uc678\ubd80 \uc11c\ube44\uc2a4\ub97c \uc704\ud55c \ub2e8\uc77c circuit breaker.\nexternal_api_cb = AsyncCircuitBreaker(\n    name=\"external_product_api\",\n    tracker=TypeOf(httpx.HTTPError),\n    retry=Cooldown(duration=30.0),  # \ub354 \ube60\ub978 \ubcf5\uad6c\ub97c \uc704\ud574 \uc9e7\uc740 \ucfe8\ub2e4\uc6b4\n)\n\n# \ud575\uc2ec \ub85c\uc9c1\uc744 \uc704\ud55c \ubcc4\ub3c4\uc758 \ud568\uc218\uac00 \uc88b\uc740 \uad00\ud589\uc785\ub2c8\ub2e4.\n@external_api_cb\nasync def fetch_product_data(product_id: str):\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"https://api.example.com/products/{product_id}\")\n        response.raise_for_status()\n        return response.json()\n\n@app.get(\"/products/{product_id}\")\nasync def get_product(product_id: str):\n    try:\n        data = await fetch_product_data(product_id)\n        return data\n    except CallNotPermittedError:\n        # \ud68c\ub85c\uac00 \uc5f4\ub824 \uc788\uc73c\ubbc0\ub85c 503 \uc624\ub958\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.\n        raise HTTPException(\n            status_code=503,\n            detail=\"\uc678\ubd80 \uc81c\ud488 \uc11c\ube44\uc2a4\ub97c \ud604\uc7ac \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624.\"\n        )\n    except httpx.HTTPStatusError as e:\n        # \uc678\ubd80 \uc11c\ube44\uc2a4\uac00 \uc624\ub958\ub97c \ubc18\ud658\ud588\uc2b5\ub2c8\ub2e4.\n        raise HTTPException(status_code=e.response.status_code, detail=str(e))\n</code></pre>"},{"location":"ko/examples/#3","title":"3. \uc11c\ube44\uc2a4\ubcc4\ub85c \ub2e4\ub978 \uc815\ucc45 \uc801\uc6a9","text":"<p>\uc11c\ub85c \ub2e4\ub978 \uc678\ubd80 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud574 \uac01\uac01 \uc790\uccb4\uc801\uc73c\ub85c \uc870\uc815\ub41c \uc815\ucc45\uc744 \uac00\uc9c4 \ub2e4\ub978 circuit breaker\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc785\ub2c8\ub2e4. \uacb0\uc81c\uc640 \uac19\uc740 \uc911\uc694\ud55c \uc11c\ube44\uc2a4\ub294 \uc778\ubca4\ud1a0\ub9ac\uc640 \uac19\uc740 \ub35c \uc911\uc694\ud55c \uc11c\ube44\uc2a4\ubcf4\ub2e4 \ub354 \ubcf4\uc218\uc801\uc778 \uad6c\uc131\uc744 \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.windows import TimeWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import MinRequests, FailureRate, FailureStreak\nfrom fluxgate.retries import Backoff\n\n# \uc911\uc694\ud55c \uacb0\uc81c \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ub354 \ubcf4\uc218\uc801\uc778 \uc815\ucc45.\n# FailureStreak\uc740 MinRequests\uac00 \ucda9\uc871\ub418\uae30 \uc804 \ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \uc2dc \ube60\ub978 \ubcf4\ud638\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.\npayment_cb = AsyncCircuitBreaker(\n    name=\"payment_service\",\n    window=TimeWindow(size=300),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=FailureStreak(5) | (MinRequests(20) &amp; FailureRate(0.4)),\n    retry=Backoff(initial=30.0, max_duration=600.0),\n)\n\n# \ub35c \uc911\uc694\ud55c \uc778\ubca4\ud1a0\ub9ac \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ub354 \uacf5\uaca9\uc801\uc778 \uc815\ucc45.\ninventory_cb = AsyncCircuitBreaker(\n    name=\"inventory_service\",\n    window=TimeWindow(size=60),\n    tracker=TypeOf(httpx.HTTPError),\n    tripper=MinRequests(10) &amp; FailureRate(0.6),\n    retry=Backoff(initial=10.0, max_duration=300.0),\n)\n\n@payment_cb\nasync def charge_payment(amount: float):\n    pass\n\n@inventory_cb\nasync def check_inventory(product_id: str):\n    pass\n</code></pre>"},{"location":"ko/examples/#4-fallback","title":"4. Fallback \ucc98\ub9ac","text":"<p>\ud638\ucd9c\uc774 \ucc28\ub2e8\ub418\uac70\ub098 \uc2e4\ud328\ud558\uba74 \uce90\uc2dc\ub41c \ub370\uc774\ud130\ub97c \ubc18\ud658\ud558\ub294 \uac83\uacfc \uac19\uc740 \ub300\uccb4 \ub85c\uc9c1\uc744 \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \uc774\ub97c \"\ud3f4\ubc31\"\uc774\ub77c\uace0 \ud569\ub2c8\ub2e4.</p>"},{"location":"ko/examples/#fallback","title":"<code>fallback</code> \ub370\ucf54\ub808\uc774\ud130 \uc778\uc790 \uc0ac\uc6a9 (\uad8c\uc7a5)","text":"<p>\uc774\uac83\uc774 \uac00\uc7a5 \uae54\ub054\ud55c \uc811\uadfc \ubc29\uc2dd\uc785\ub2c8\ub2e4. \ubcf4\ud638\ub41c \ud568\uc218\uac00 \uc5b4\ub5a4 \uc608\uc678\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub4e0 \uc81c\uacf5\ub41c \ud568\uc218\uac00 \uc790\ub3d9\uc73c\ub85c \ud638\ucd9c\ub429\ub2c8\ub2e4. \ud3f4\ubc31 \ud568\uc218\ub294 \uc608\uc678 \uc778\uc2a4\ud134\uc2a4\ub97c \ubc1b\uc73c\ubbc0\ub85c \uc5b4\ub5bb\uac8c \ucc98\ub9ac\ud560\uc9c0 \uacb0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker, CallNotPermittedError\n\n# \uce90\uc2dc\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \ud568\uc218\uc5d0 \ub300\ud55c \ud50c\ub808\uc774\uc2a4\ud640\ub354.\ndef get_cached_data(e: Exception):\n    print(f\"\ub2e4\uc74c\uc73c\ub85c \uc778\ud574 \uce90\uc2dc\ub41c \ub370\uc774\ud130 \ubc18\ud658: {type(e).__name__}\")\n    return {\"source\": \"cache\"}\n\n# fetch_from_api\uac00 \uc608\uc678\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \uacbd\uc6b0\uc5d0\ub9cc \ud3f4\ubc31\uc774 \ud638\ucd9c\ub429\ub2c8\ub2e4.\n@cb(fallback=get_cached_data)\ndef fetch_data_with_fallback() -&gt; dict:\n    # ... \ub77c\uc774\ube0c API\uc5d0\uc11c \uac00\uc838\uc624\ub294 \ub85c\uc9c1 ...\n    raise httpx.ConnectError(\"\uc5f0\uacb0 \uc2e4\ud328!\")\n\n# \uc0ac\uc6a9: \ud3f4\ubc31\uc774 \uc790\ub3d9\uc73c\ub85c \ud638\ucd9c\ub429\ub2c8\ub2e4.\nresult = fetch_data_with_fallback() # {\"source\": \"cache\"} \ubc18\ud658\n</code></pre>"},{"location":"ko/examples/#call_with_fallback","title":"<code>call_with_fallback</code> \uc0ac\uc6a9","text":"<p>\ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc744 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4. <code>fallback</code> \uc778\uc790\uc640 \ub3d9\uc77c\ud558\uac8c \uc791\ub3d9\ud569\ub2c8\ub2e4.</p> <pre><code>def fetch_from_api():\n    # ...\n    pass\n\n# fetch_from_api\uac00 \uc608\uc678\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \uacbd\uc6b0\uc5d0\ub9cc \ud3f4\ubc31\uc774 \ud638\ucd9c\ub429\ub2c8\ub2e4.\nresult = cb.call_with_fallback(\n    fetch_from_api,\n    fallback_func=get_cached_data,\n)\n</code></pre>"},{"location":"ko/examples/#tryexcept","title":"\uc218\ub3d9 <code>try...except</code>","text":"<p>\ucd5c\ub300\ud55c\uc758 \uc81c\uc5b4\ub97c \uc704\ud574 \ud45c\uc900 <code>try...except</code> \ube14\ub85d\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 \ucd5c\ub300\ud55c\uc758 \uc720\uc5f0\uc131\uc744 \uc81c\uacf5\ud558\uc9c0\ub9cc \ub354 \uc7a5\ud669\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CallNotPermittedError\n\n@cb\ndef fetch_data():\n    # ...\n    pass\n\ntry:\n    result = fetch_data()\nexcept CallNotPermittedError as e:\n    # \uc774 \ube14\ub85d\uc740 \ud68c\ub85c\uac00 \uc5f4\ub824 \uc788\uc744 \ub54c\ub9cc \uc2e4\ud589\ub429\ub2c8\ub2e4.\n    print(\"\ud68c\ub85c\uac00 \uc5f4\ub838\uc2b5\ub2c8\ub2e4. \ud3f4\ubc31\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\")\n    result = get_cached_data(e)\nexcept httpx.HTTPError as e:\n    # \uc774 \ube14\ub85d\uc740 \ub2e4\ub978 \ud2b9\uc815 \uc624\ub958 \ubc1c\uc0dd \uc2dc \uc2e4\ud589\ub429\ub2c8\ub2e4.\n    print(f\"API \ud638\ucd9c \uc2e4\ud328: {e}, \ud3f4\ubc31 \ubc18\ud658.\")\n    result = get_cached_data(e)\n</code></pre>"},{"location":"ko/examples/#5","title":"5. \uace0\uae09 \uad6c\uc131 \ud328\ud134","text":""},{"location":"ko/examples/#_2","title":"\uc0ac\uc6a9\uc790 \uc815\uc758 \uc624\ub958 \ucd94\uc801","text":"<p><code>tracker</code>\ub97c \uc0ac\uc6a9\ud558\uba74 \uc2e4\ud328\ub85c \uac04\uc8fc\ub418\ub294 \uc694\uc18c\ub97c \uc815\ud655\ud558\uac8c \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, 5xx \uc11c\ubc84 \uc624\ub958\ub97c \ucd94\uc801\ud558\uba74\uc11c 4xx \ud074\ub77c\uc774\uc5b8\ud2b8 \uc624\ub958\ub294 \ubb34\uc2dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>import httpx\nfrom fluxgate.trackers import Custom\n\n# \uc774 \ud568\uc218\ub294 \ucd94\uc801\ud558\ub824\ub294 \uc624\ub958\uc5d0 \ub300\ud574\uc11c\ub9cc True\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.\ndef is_retriable_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        # 5xx \uc624\ub958\ub294 \uc2e4\ud328\uc774\uc9c0\ub9cc, 4xx \uc624\ub958\ub294 \uc2e4\ud328\uac00 \uc544\ub2d9\ub2c8\ub2e4.\n        return e.response.status_code &gt;= 500\n    # \ub610\ud55c \ub124\ud2b8\uc6cc\ud06c \uc624\ub958\ub3c4 \ucd94\uc801\ud569\ub2c8\ub2e4.\n    return isinstance(e, (httpx.ConnectError, httpx.TimeoutException))\n\ncb = CircuitBreaker(\n    name=\"api_client\",\n    tracker=Custom(is_retriable_server_error),\n    ...\n)\n</code></pre>"},{"location":"ko/examples/#_3","title":"\uc0c1\ud0dc\ubcc4 \ub2e4\ub978 \uc784\uacc4\uac12","text":"<p><code>Closed()</code> \ubc0f <code>HalfOpened()</code> Tripper\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubcf5\uad6c \uc2dc\ub3c4\uc5d0 \ub300\ud55c \ub354 \uc5c4\uaca9\ud55c \uaddc\uce59\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\ncb = CircuitBreaker(\n    name=\"api\",\n    # CLOSED \ubc0f HALF_OPEN \uc0c1\ud0dc\uc5d0 \ub300\ud574 \ub2e4\ub978 \ud2b8\ub9bd \uc870\uac74\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n    tripper=(\n        (Closed() &amp; MinRequests(20) &amp; FailureRate(0.6)) |\n        (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.5)) # \ub354 \uc5c4\uaca9\ud558\uac8c\n    ),\n    ...\n)\n</code></pre>"},{"location":"ko/examples/#_4","title":"\ub3d9\uc801 \uc0dd\uc131\uc744 \uc704\ud55c \ud329\ud1a0\ub9ac","text":"<p>\ud329\ud1a0\ub9ac \ud568\uc218\ub294 \ucf54\ub4dc\ub97c \ubc18\ubcf5\ud558\uc9c0 \uc54a\uace0\ub3c4 \ub9ce\uc740 \uc720\uc0ac\ud55c circuit breaker\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \uac15\ub825\ud55c \ud328\ud134\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\nfrom fluxgate.windows import CountWindow\nfrom fluxgate.trippers import MinRequests, FailureRate\n\ndef circuit_breaker_factory(name: str, policy: str) -&gt; CircuitBreaker:\n    \"\"\"\uc815\uc758\ub41c \uc815\ucc45 \uc774\ub984\uc5d0 \ub530\ub77c circuit breaker\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.\"\"\"\n    if policy == \"strict\":\n        return CircuitBreaker(\n            name=name,\n            tripper=MinRequests(20) &amp; FailureRate(0.4),\n        )\n    elif policy == \"lenient\":\n        return CircuitBreaker(\n            name=name,\n            window=CountWindow(50),\n            tripper=MinRequests(10) &amp; FailureRate(0.7),\n            retry=Cooldown(30.0),\n        )\n    else:\n        raise ValueError(f\"\uc54c \uc218 \uc5c6\ub294 \uc815\ucc45: {policy}\")\n\n# \uc989\uc2dc \ube0c\ub808\uc774\ucee4 \uc0dd\uc131\ncheckout_cb = circuit_breaker_factory(\"checkout\", \"strict\")\nrecommendation_cb = circuit_breaker_factory(\"recommendations\", \"lenient\")\n</code></pre>"},{"location":"ko/examples/#_5","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>\ucef4\ud3ec\ub10c\ud2b8 \uac1c\uc694: \uac01 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \ub300\ud574 \ub354 \uae4a\uc774 \uc54c\uc544\ubcf4\uc138\uc694.</li> <li>Listener \uac1c\uc694: circuit breaker\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6b0\uc138\uc694.</li> <li>API \ub808\ud37c\ub7f0\uc2a4: \uc804\uccb4 API \ubb38\uc11c\ub97c \uc0b4\ud3b4\ubcf4\uc138\uc694.</li> </ul>"},{"location":"ko/about/comparison/","title":"\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640\uc758 \ube44\uad50","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 Fluxgate\uc640 \ub2e4\ub978 \uc778\uae30 \uc788\ub294 Python Circuit Breaker \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uacf5\uc815\ud558\uac8c \ube44\uad50\ud569\ub2c8\ub2e4. \ubaa9\ud45c\ub294 \ub2e4\uc591\ud55c \uc124\uacc4 \ucca0\ud559\uacfc \uae30\ub2a5\uc744 \uac15\uc870\ud558\uc5ec \ud2b9\uc815 \uc694\uad6c\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \ub3c4\uad6c\ub97c \uc120\ud0dd\ud558\ub294 \ub370 \ub3c4\uc6c0\uc744 \ub4dc\ub9ac\ub294 \uac83\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/about/comparison/#_2","title":"\uae30\ub2a5 \ube44\uad50","text":"\uae30\ub2a5 Fluxgate circuitbreaker pybreaker aiobreaker \ube44\ub3d9\uae30 \uc9c0\uc6d0 \u2705 \u2705 (Tornado\ub9cc) \u2705 \uc8fc\uc694 \ud2b8\ub9bd \ub85c\uc9c1 \uc2e4\ud328\uc728, \uc5f0\uc18d \uc2e4\ud328 \uc5f0\uc18d \uc2e4\ud328 \uc5f0\uc18d \uc2e4\ud328 \uc5f0\uc18d \uc2e4\ud328 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0 \u2705 (\uce74\uc6b4\ud2b8 \ub610\ub294 \uc2dc\uac04) \u274c \u274c \u274c \uc9c0\uc5f0 \uae30\ubc18 \ud2b8\ub9bd \u2705 (<code>AvgLatency</code>, <code>SlowRate</code>) \u274c \u274c \u274c \uc870\ud569 \uac00\ub2a5\ud55c \uaddc\uce59 (&amp;, |) \u2705 \u274c \u274c \u274c \uc810\uc9c4\uc801 \ubcf5\uad6c (<code>RampUp</code>) \u2705 \u274c \u274c \u274c \uc0c1\ud0dc Listener \u2705 \u274c \u2705 \u2705 \ub0b4\uc7a5 \ubaa8\ub2c8\ud130\ub9c1 \u2705 (Prometheus, Slack) \u274c \u274c \u274c \uc678\ubd80 \uc0c1\ud0dc \uc800\uc7a5\uc18c \u274c \u274c \u2705 (Redis) \u2705 (Redis)"},{"location":"ko/about/comparison/#_3","title":"\uc8fc\uc694 \ucc28\uc774\uc810","text":""},{"location":"ko/about/comparison/#1","title":"1. \ub354 \uacac\uace0\ud55c \ud2b8\ub9bd \ub85c\uc9c1","text":"<p>\ub300\ubd80\ubd84\uc758 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uac04\ub2e8\ud55c \uc5f0\uc18d \uc2e4\ud328 \ud69f\uc218\ub97c \uae30\ubc18\uc73c\ub85c \ud2b8\ub9bd\ub429\ub2c8\ub2e4. \uc774\ub294 \uae68\uc9c0\uae30 \uc26c\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc11c\ube44\uc2a4\uac00 \uc5ec\uc804\ud788 \ube44\uc815\uc0c1 \uc0c1\ud0dc\uc774\ub354\ub77c\ub3c4 \ub2e8 \ud55c \ubc88\uc758 \uc131\uacf5\uc801\uc778 \ud638\ucd9c\ub85c \uce74\uc6b4\ud130\uac00 0\uc73c\ub85c \uc7ac\uc124\uc815\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>Fluxgate\ub294 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0\ub97c \ud1b5\ud55c \uc2e4\ud328\uc728\uc744 \uc0ac\uc6a9\ud558\uba70, \uc774\ub294 \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ud6e8\uc52c \ub354 \uc815\ud655\ud558\uace0 \uc548\uc815\uc801\uc73c\ub85c \ud3c9\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c Fluxgate\ub294 \ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \ub610\ub294 \uc11c\ube44\uc2a4 \uc644\uc804 \uc7a5\uc560 \uc2dc \ube60\ub978 \ubcf4\ud638\ub97c \uc704\ud574 <code>FailureStreak</code>\uc744 \ud1b5\ud55c \uc5f0\uc18d \uc2e4\ud328 \uac10\uc9c0\ub3c4 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \ub450 \uc811\uadfc \ubc29\uc2dd\uc744 \uacb0\ud569\ud558\uc5ec \ucd5c\ub300\ud55c\uc758 \ud68c\ubcf5\ub825\uc744 \ud655\ubcf4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li> <p>\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac:</p> <pre><code># 5\ubc88 \uc5f0\uc18d \uc2e4\ud328 \ud6c4 \uc5f4\ub9bd\ub2c8\ub2e4.\n@circuit(failure_threshold=5)\ndef call_api(): ...\n</code></pre> </li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, FailureRate\n\n# \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\uba74 \uc5f4\ub9bd\ub2c8\ub2e4\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; FailureRate(0.5),\n)\n</code></pre> </li> </ul>"},{"location":"ko/about/comparison/#2","title":"2. \uc870\ud569 \uac00\ub2a5\ud558\uace0 \uc720\uc5f0\ud55c \uaddc\uce59","text":"<p>Fluxgate\ub294 \uac04\ub2e8\ud55c \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub17c\ub9ac \uc5f0\uc0b0\uc790(<code>&amp;</code>, <code>|</code>)\uc640 \uacb0\ud569\ud558\uc5ec \uc815\uad50\ud558\uace0 \uc138\ubd84\ud654\ub41c \uaddc\uce59\uc744 \uad6c\ucd95\ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4. \ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc77c\ubc18\uc801\uc73c\ub85c \ub2e8\uc77c \uc870\uac74\ub9cc \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</p> <ul> <li>\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac: \ub2e8\uc77c \uc784\uacc4\uac12.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate, SlowRate\n\n# \ub2e4\ub978 \uc0c1\ud0dc\uc5d0 \ub300\ud574 \ub2e4\ub978 \uaddc\uce59\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n\n# \ub192\uc740 \uc2e4\ud328\uc728 \ub610\ub294 \ub192\uc740 \ub290\ub9b0 \ud638\ucd9c\uc728\uc5d0\uc11c \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre> </li> </ul>"},{"location":"ko/about/comparison/#3","title":"3. \uc9c0\uc5f0 \uae30\ubc18 \ud2b8\ub9bd","text":"<p>Fluxgate\ub294 \uc608\uc678\ubfd0\ub9cc \uc544\ub2c8\ub77c \uc751\ub2f5 \uc2dc\uac04\uc744 \uae30\ubc18\uc73c\ub85c \ud2b8\ub9bd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 \uc11c\ube44\uc2a4 \"Brown-out\"(\uc11c\ube44\uc2a4\uac00 \ub290\ub9ac\uc9c0\ub9cc \uc2e4\ud328\ud558\uc9c0\ub294 \uc54a\ub294 \uacbd\uc6b0)\uc744 \uac10\uc9c0\ud558\ub294 \ub370 \uc911\uc694\ud569\ub2c8\ub2e4.</p> <ul> <li>\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac: \uc608\uc678\uc5d0\ub9cc \ubc18\uc751\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import MinRequests, AvgLatency, SlowRate\n\n# \ud3c9\uade0 \uc9c0\uc5f0 \uc2dc\uac04\uc774 2\ucd08\ub97c \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; AvgLatency(2.0)\n\n# \ud638\ucd9c\uc758 30% \uc774\uc0c1\uc774 1\ucd08\ubcf4\ub2e4 \ub290\ub9ac\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=MinRequests(10) &amp; SlowRate(0.3),\n    slow_threshold=1.0,  # \"\ub290\ub9bc\"\uc758 \uae30\uc900\uc744 \uc815\uc758\ud569\ub2c8\ub2e4\n)\n</code></pre> </li> </ul>"},{"location":"ko/about/comparison/#4","title":"4. \uc810\uc9c4\uc801 \ubcf5\uad6c","text":"<p>\uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c \uc911\uc77c \ub54c\ub294 \uacfc\ubd80\ud558\ub97c \ud53c\ud558\uae30 \uc704\ud574 \ud2b8\ub798\ud53d\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc7ac\ub3c4\uc785\ud574\uc57c \ud569\ub2c8\ub2e4. Fluxgate\ub294 \uc774\ub97c \uc704\ud574 <code>RampUp</code>\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4. \ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc77c\ubc18\uc801\uc73c\ub85c \ud55c \ubc88\uc5d0 \ud558\ub098\uc758 \ud14c\uc2a4\ud2b8 \ud638\ucd9c\ub9cc \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</p> <ul> <li>\ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac: \ud558\ub098\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud558\uace0, \uc131\uacf5\ud558\uba74 \ud68c\ub85c\ub97c \ub2eb\uc2b5\ub2c8\ub2e4.</li> <li> <p>Fluxgate:</p> <pre><code>from fluxgate.permits import RampUp\n\n# 60\ucd08 \ub3d9\uc548 \ud2b8\ub798\ud53d\uc744 10%\uc5d0\uc11c 80%\ub85c \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> </li> </ul>"},{"location":"ko/about/comparison/#_4","title":"\uac01 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc120\ud0dd\ud558\ub294 \uacbd\uc6b0","text":""},{"location":"ko/about/comparison/#fluxgate","title":"<code>Fluxgate</code>\ub97c \uc120\ud0dd\ud574\uc57c \ud558\ub294 \uacbd\uc6b0","text":"<p>\uac00\uc7a5 \uac15\ub825\ud558\uace0 \uae30\ub2a5\uc774 \ud48d\ubd80\ud55c Circuit Breaker\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc2e4\ud328\uc728, \uc9c0\uc5f0 \uc2dc\uac04 \ub610\ub294 \uc5f0\uc18d \uc2e4\ud328 (<code>FailureStreak</code>)\ub97c \uae30\ubc18\uc73c\ub85c \ud2b8\ub9ac\uac70\ud558\uace0 \uc2f6\uc2b5\ub2c8\ub2e4.</li> <li>\ubcf5\uc7a1\ud558\uace0 \uc870\ud569 \uac00\ub2a5\ud55c \uaddc\uce59(\uc608: \ub2e4\ub978 \uc0c1\ud0dc\uc5d0 \ub300\ud55c \ub2e4\ub978 \uc784\uacc4\uac12)\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</li> <li>\ubcf5\uad6c \uc911\uc5d0 \ud2b8\ub798\ud53d\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0a4\uace0 \uc2f6\uc2b5\ub2c8\ub2e4.</li> <li>\ud604\ub300\uc801\uc778 asyncio \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uad6c\ucd95 \uc911\uc785\ub2c8\ub2e4.</li> <li>\ub354 \ub098\uc740 \uac1c\ubc1c\uc790 \uacbd\ud5d8\uc744 \uc704\ud574 \uc644\uc804\ud788 \ud0c0\uc785 \ud78c\ud2b8\ub41c API\ub97c \uc911\uc694\ud558\uac8c \uc0dd\uac01\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/about/comparison/#circuitbreaker","title":"<code>circuitbreaker</code>\ub97c \uc120\ud0dd\ud574\uc57c \ud558\ub294 \uacbd\uc6b0?","text":"<p>\uae30\ubcf8\uc801\uc778 \uc0ac\uc6a9 \uc0ac\ub840\uc5d0 \ub300\ud55c \uac04\ub2e8\ud558\uace0 \uc548\uc815\uc801\uc774\uba70 \ub110\ub9ac \uc0ac\uc6a9\ub418\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc5f0\uc18d \uc2e4\ud328 \uae30\ubc18\uc758 \ud2b8\ub9ac\uac70\uac00 \uc694\uad6c \uc0ac\ud56d\uc744 \ucda9\uc871\ud569\ub2c8\ub2e4.</li> <li>\ub2e8\uc21c\uc131\uacfc \ucd5c\uc18c\ud55c\uc758 \uad6c\uc131\uc744 \uc911\uc694\ud558\uac8c \uc0dd\uac01\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/about/comparison/#pybreaker-aiobreaker","title":"<code>pybreaker</code> \ub610\ub294 <code>aiobreaker</code>\ub97c \uc120\ud0dd\ud574\uc57c \ud558\ub294 \uacbd\uc6b0?","text":"<p>\uc5ec\ub7ec \ud504\ub85c\uc138\uc2a4\ub098 \uc11c\ubc84 \uac04\uc5d0 Circuit Breaker \uc0c1\ud0dc\ub97c \uacf5\uc720\ud574\uc57c \ud558\ub294 \uc5c4\uaca9\ud55c \uc694\uad6c \uc0ac\ud56d\uc774 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\uc544\ud0a4\ud14d\ucc98\uc5d0 \ubd84\uc0b0 \uc0c1\ud0dc \uc800\uc7a5\uc18c(Redis)\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.</li> <li><code>pybreaker</code>\ub294 \uc2a4\ub808\ub4dc \ub610\ub294 Tornado \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc801\ud569\ud569\ub2c8\ub2e4.</li> <li><code>aiobreaker</code>\ub294 <code>pybreaker</code>\uc758 <code>asyncio</code> \ubc84\uc804\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/about/comparison/#_5","title":"\ud568\uaed8 \ubcf4\uae30","text":"<ul> <li>\uc124\uacc4 \ubc0f \uc601\uac10: Fluxgate\uc758 \ucca0\ud559\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uc138\uc694.</li> <li>\ucef4\ud3ec\ub10c\ud2b8 \uac1c\uc694: \uc774\ub7ec\ud55c \uae30\ub2a5\uc744 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \uc54c\uc544\ubcf4\uc138\uc694.</li> </ul>"},{"location":"ko/about/design/","title":"\uc124\uacc4 \ubc0f \uc601\uac10","text":"<p>\uc774 \ubb38\uc11c\ub294 Fluxgate\uc758 \ud575\uc2ec \uc124\uacc4 \ucca0\ud559, \uc601\uac10\uc744 \uc900 \ud504\ub85c\uc81d\ud2b8, \uadf8\ub9ac\uace0 \uc8fc\uc694 \uc544\ud0a4\ud14d\ucc98 \uacb0\uc815\uc758 \ubc30\uacbd\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_2","title":"\uc774\ub984","text":"<p>\ud50c\ub7ed\uc2a4\uac8c\uc774\ud2b8 \uc790\ub825\uacc4(fluxgate magnetometer)\ub294 \ud3ec\ud654 \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud560 \ub54c \ubc18\uc751\ud568\uc73c\ub85c\uc368 \uc790\uae30\uc7a5 \ubcc0\ud654\ub97c \uac10\uc9c0\ud558\ub294 \uc13c\uc11c\uc785\ub2c8\ub2e4. \uc774\ub294 Circuit Breaker\uac00 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc2e4\ud328 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud560 \ub54c \"\ud2b8\ub9bd(trip)\"\ud558\ub294 \ubc29\uc2dd\uacfc \uc720\uc0ac\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_3","title":"\uc601\uac10","text":"<p>Fluxgate\uc758 \uc124\uacc4\ub294 \ub450 \uac00\uc9c0 \ud6cc\ub96d\ud55c \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ud06c\uac8c \uc601\uac10\uc744 \ubc1b\uc558\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#resilience4j","title":"Resilience4j","text":"<p>Resilience4j\ub294 Java\uc6a9 \uacbd\ub7c9, \uc778\uae30 \uc788\ub294 \uacb0\ud568 \ub0b4\uc131 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4. Fluxgate\ub294 Resilience4j\uc758 \uac00\uc7a5 \uc911\uc694\ud55c \uac1c\ub150\uc778 \uc11c\ube44\uc2a4 \uc0c1\ud0dc \ucd94\uc801\uc744 \uc704\ud55c \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0(sliding windows) \uc0ac\uc6a9\uc744 \ucc28\uc6a9\ud588\uc2b5\ub2c8\ub2e4.</p> <p>\ub2e8\uc21c\ud788 \uc5f0\uc18d\uc801\uc778 \uc2e4\ud328\ub9cc \ucd94\uc801\ud558\ub294 \ud328\ud134\uacfc \ub2ec\ub9ac, \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0(\uce74\uc6b4\ud2b8 \uae30\ubc18 \ub610\ub294 \uc2dc\uac04 \uae30\ubc18)\ub294 \ucd5c\uadfc \uae30\uac04 \ub3d9\uc548 \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ud6e8\uc52c \ub354 \uc815\ud655\ud558\uace0 \uacac\uace0\ud558\uac8c \ud3c9\uac00\ud569\ub2c8\ub2e4.</p> <pre><code># Fluxgate\uc758 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0 \uc811\uadfc \ubc29\uc2dd\uc740 Resilience4j\uc5d0\uc11c \uc9c1\uc811 \uc601\uac10\uc744 \ubc1b\uc558\uc2b5\ub2c8\ub2e4.\nfrom fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # \ub9c8\uc9c0\ub9c9 100\uac1c \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.\nwindow = TimeWindow(size=60)    # \ub9c8\uc9c0\ub9c9 60\ucd08 \ub3d9\uc548\uc758 \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4.\n</code></pre>"},{"location":"ko/about/design/#django-rest-framework","title":"Django REST Framework","text":"<p>Django\uc758 \uad8c\ud55c \uc2dc\uc2a4\ud15c\uc740 \ub17c\ub9ac \uc5f0\uc0b0\uc790(<code>&amp;</code>, <code>|</code>, <code>~</code>)\uc640 \uacb0\ud569\ub41c \uc870\ud569 \uac00\ub2a5\ud55c \uac1d\uccb4\ub77c\ub294 \ud6cc\ub96d\ud558\uace0 \ub9e4\uc6b0 \uc720\uc5f0\ud55c \ud328\ud134\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code># Django REST Framework\uc5d0\uc11c\ub294 \uac04\ub2e8\ud55c \uad8c\ud55c \ud074\ub798\uc2a4\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \uaddc\uce59\uc744 \uad6c\ucd95\ud569\ub2c8\ub2e4.\nfrom rest_framework.permissions import IsAuthenticated, IsAdminUser\n\nclass MyView(APIView):\n    permission_classes = [IsAuthenticated &amp; IsAdminUser]\n</code></pre> <p>Fluxgate\ub294 <code>Tracker</code> \ubc0f <code>Tripper</code> \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \uc774\uc640 \ub3d9\uc77c\ud55c \ucca0\ud559\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uc5d0\uac8c \ubcf5\uc7a1\ud55c \uad6c\uc131 \uc2a4\ud0a4\ub9c8\ub97c \ubc30\uc6b0\uac70\ub098 \ubc88\uac70\ub85c\uc6b4 \ube4c\ub354 \ud328\ud134\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uac15\uc694\ud558\ub294 \ub300\uc2e0, \uc815\uad50\ud55c \uaddc\uce59\uc744 \ub9cc\ub4e4\uae30 \uc704\ud574 \uc870\ud569\ud560 \uc218 \uc788\ub294 \uac04\ub2e8\ud558\uace0 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \uad6c\uc131 \uc694\uc18c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# \uac04\ub2e8\ud55c Tripper\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ud2b8\ub9bd \ub85c\uc9c1\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre> <p>\uc774 \uc870\ud569 \uac00\ub2a5\ud55c \uc811\uadfc \ubc29\uc2dd\uc740 Fluxgate\uc758 \uc720\uc5f0\uc131\uc758 \ud575\uc2ec\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_4","title":"\uc124\uacc4 \uacb0\uc815","text":"<p>Fluxgate\ub294 \ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640\ub294 \ub2e4\ub978 \ub450 \uac00\uc9c0 \uc758\ub3c4\uc801\uc778 \uc124\uacc4 \uc120\ud0dd\uc744 \ud588\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#_5","title":"\ubd84\uc0b0 \uc0c1\ud0dc \uacf5\uc720 \uc5c6\uc74c","text":"<p>Fluxgate\uc758 Circuit Breaker\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud504\ub85c\uc138\uc2a4 \ub0b4\uc5d0\uc11c\ub9cc \uc0c1\ud0dc\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc5ec\ub7ec \ud504\ub85c\uc138\uc2a4\ub098 \uc11c\ubc84 \uac04\uc5d0 \uc0c1\ud0dc\ub97c \uacf5\uc720\ud558\ub294 \uae30\ub2a5(\uc608: Redis\ub97c \ud1b5\ud55c)\uc740 \ub0b4\uc7a5\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p> <p>\uc774\ub294 Circuit Breaker \ud328\ud134\uc758 \ud575\uc2ec \ubaa9\uc801\uc5d0 \uae30\ubc18\ud55c \uc758\ub3c4\uc801\uc778 \uacb0\uc815\uc785\ub2c8\ub2e4. \ubaa9\ud45c\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ube44\uc815\uc0c1\uc801\uc778 \uc11c\ube44\uc2a4\ub97c \ubc18\ubcf5\uc801\uc73c\ub85c \ud638\ucd9c\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \uc774\ub294 \ubd84\uc0b0 \uc0c1\ud0dc \uc5c6\uc774\ub3c4 \ud6a8\uacfc\uc801\uc73c\ub85c \ub2ec\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\ub3c5\ub9bd\uc801\uc778 \ud3c9\uac00: \ud558\uc704 \uc2a4\ud2b8\ub9bc \uc11c\ube44\uc2a4\uac00 \ube44\uc815\uc0c1\uc778 \uacbd\uc6b0, \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubaa8\ub4e0 \uc778\uc2a4\ud134\uc2a4\ub294 \uc790\uccb4\uc801\uc778 \uc2e4\ud328 \ud638\ucd9c\uc744 \ud1b5\ud574 \uc774\ub97c \uc790\uc5f0\uc2a4\ub7fd\uac8c \uac10\uc9c0\ud569\ub2c8\ub2e4. \ud68c\ub85c\ub294 \uac01 \uc11c\ubc84\uc5d0\uc11c \ub3c5\ub9bd\uc801\uc73c\ub85c \uc62c\ubc14\ub974\uac8c \uc5f4\ub9b4 \uac83\uc785\ub2c8\ub2e4.</li> <li>\ub2e8\uc21c\uc131 \ubc0f \ud0c4\ub825\uc131: \ubd84\uc0b0 \uc0c1\ud0dc \uc800\uc7a5\uc18c(\uc608: Redis)\uc5d0 \ub300\ud55c \uc758\uc874\uc131\uc744 \ucd94\uac00\ud558\uba74 \uc0c8\ub85c\uc6b4 \ub124\ud2b8\uc6cc\ud06c \uc758\uc874\uc131, \uc0c8\ub85c\uc6b4 \ub2e8\uc77c \uc2e4\ud328 \uc9c0\uc810, \uadf8\ub9ac\uace0 \uc0c1\ub2f9\ud55c \uc6b4\uc601 \ubcf5\uc7a1\uc131\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. \uc0c1\ud0dc \uc800\uc7a5\uc18c\uc758 \uc2e4\ud328\ub294 \uc804\uccb4 Circuit Breaking \uba54\ucee4\ub2c8\uc998\uc744 \ube44\ud65c\uc131\ud654\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li>\uc131\ub2a5: \uc694\uccad\ub9c8\ub2e4 \ud68c\ub85c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uae30 \uc704\ud574 \ub124\ud2b8\uc6cc\ud06c \ud638\ucd9c\uc744 \ud558\ub294 \uac83\ubcf4\ub2e4 \uc778\ud504\ub85c\uc138\uc2a4 \uba54\ubaa8\ub9ac\uc5d0 \uc758\uc874\ud558\ub294 \uac83\uc774 \ud6e8\uc52c \ube60\ub985\ub2c8\ub2e4.</li> </ul> <p>\uc0c1\ud0dc\ub97c \ub85c\uceec\ub85c \uc720\uc9c0\ud568\uc73c\ub85c\uc368 Fluxgate\ub294 \uacbd\ub7c9\ud654\ub418\uace0 \ube60\ub974\uba70 \ud0c4\ub825\uc801\uc774\uba70, \uc678\ubd80 \uc758\uc874\uc131\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/about/design/#circuitbreaker","title":"<code>CircuitBreaker</code>\ub294 \uc2a4\ub808\ub4dc \uc548\uc804\ud558\uc9c0 \uc54a\uc74c","text":"<p>\ub3d9\uc2dc\uc131 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uacbd\uc6b0, Fluxgate\ub294 <code>CircuitBreaker</code>\uc640 \ud568\uaed8 \uba40\ud2f0\uc2a4\ub808\ub529\uc774 \uc544\ub2cc <code>asyncio</code>\uc640 \ud568\uaed8 <code>AsyncCircuitBreaker</code>\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc744 \uac15\ub825\ud788 \uad8c\uc7a5\ud569\ub2c8\ub2e4.</p> <p>\ud45c\uc900 <code>CircuitBreaker</code> \ud074\ub798\uc2a4\ub294 \uc2a4\ub808\ub4dc \uc548\uc804\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc774\ub294 Python\uc758 \ub3d9\uc2dc\uc131 \uc0dd\ud0dc\uacc4\uc758 \ud604\uc7ac \uc0c1\ud0dc\ub97c \ubc18\uc601\ud558\ub294 \uc758\ub3c4\uc801\uc778 \uc120\ud0dd\uc785\ub2c8\ub2e4.</p> <ul> <li>Python\uc758 GIL(Global Interpreter Lock)\ub85c \uc778\ud574 \uba40\ud2f0\uc2a4\ub808\ub529\uc740 CPU \ubc14\uc6b4\ub4dc \ucf54\ub4dc\ub97c \ubcd1\ub82c\ud654\ud558\ub294 \ud6a8\uacfc\uc801\uc778 \ubc29\uc2dd\uc774 \uc544\ub2c8\uba70, <code>asyncio</code>\uc5d0 \ube44\ud574 I/O \ubc14\uc6b4\ub4dc \ucf54\ub4dc\uc5d0 \ub300\ud55c \uc774\uc810\ub3c4 \uc81c\ud55c\uc801\uc785\ub2c8\ub2e4.</li> <li>\ud604\ub300 Python \uc0dd\ud0dc\uacc4\ub294 \uace0\uc131\ub2a5 I/O \ubc14\uc6b4\ub4dc \uc791\uc5c5\uc5d0 \ub300\ud574 <code>asyncio</code>\ub97c \uc555\ub3c4\uc801\uc73c\ub85c \uc218\uc6a9\ud588\uc2b5\ub2c8\ub2e4. \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c(FastAPI, Starlette, aiohttp), \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ub4dc\ub77c\uc774\ubc84(asyncpg), HTTP \ud074\ub77c\uc774\uc5b8\ud2b8(httpx) \ubaa8\ub450 <code>asyncio</code> \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \uae30\ubc18\uc73c\ub85c \uad6c\ucd95\ub429\ub2c8\ub2e4.</li> <li><code>AsyncCircuitBreaker</code>\ub294 \uc774\ub7ec\ud55c \ud604\ub300 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c Circuit Breaker\ub97c \uc0ac\uc6a9\ud558\ub294 \uc790\uc5f0\uc2a4\ub7fd\uace0 \uad00\uc6a9\uc801\uc774\uba70 \uac00\uc7a5 \uc131\ub2a5\uc774 \uc88b\uc740 \ubc29\ubc95\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/about/design/#_6","title":"\ud568\uaed8 \ubcf4\uae30","text":"<ul> <li>\ube44\uad50: Fluxgate\uac00 \ub2e4\ub978 Python \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \uc5b4\ub5bb\uac8c \ube44\uad50\ub418\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694.</li> <li>\ucef4\ud3ec\ub10c\ud2b8 \uac1c\uc694: \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uad6c\uc131\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \uc54c\uc544\ubcf4\uc138\uc694.</li> </ul>"},{"location":"ko/api/core/","title":"Core","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub178\ucd9c\ub418\ub294 \uc8fc\uc694 \ud074\ub798\uc2a4\uc640 \uc608\uc678\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. \uc774\ub294 Fluxgate \uc0ac\uc6a9\uc744 \uc704\ud55c \uc8fc\uc694 \uc9c4\uc785\uc810\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/api/core/#circuit-breaker","title":"Circuit Breaker \ud074\ub798\uc2a4","text":"<p>\uc774\uac83\uc740 Circuit Breaker\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud574 \uc778\uc2a4\ud134\uc2a4\ud654\ud560 \uc8fc\uc694 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/api/core/#_1","title":"\uc0c1\ud0dc \ubc0f \uc608\uc678","text":"<p>\uc774\uac83\uc740 \uac00\uc7a5 \uc77c\ubc18\uc801\uc73c\ub85c \uc0c1\ud638 \uc791\uc6a9\ud560 \uc5f4\uac70\ud615(enum) \ubc0f \uc608\uc678\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/api/interfaces/","title":"API: Interface","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 Fluxgate \ucef4\ud3ec\ub10c\ud2b8\uc758 \ub3d9\uc791\uc744 \uc815\uc758\ud558\ub294 \ud575\uc2ec \uc778\ud130\ud398\uc774\uc2a4\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. \uc774 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uc5ec \uc790\uc2e0\ub9cc\uc758 \ucee4\uc2a4\ud140 \ucef4\ud3ec\ub10c\ud2b8(Window, Tracker, Tripper, Retry, Permit, Listener)\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/api/listeners/","title":"API: Listener","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Listener \uad6c\ud604\uc744 \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Listener\ub97c \uc0ac\uc6a9\ud558\uba74 \ub85c\uae45, \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc54c\ub9bc \uc2dc\uc2a4\ud15c\uacfc \ud1b5\ud569\ud558\uc5ec Circuit Breaker \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ubc18\uc751\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>Listener \uc0ac\uc6a9 \ubc0f \uc0ac\uc6a9\uc790 \uc815\uc758\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Listener \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/api/listeners/#listener","title":"\ub85c\uae45 Listener","text":""},{"location":"ko/api/listeners/#prometheus-listener","title":"Prometheus Listener","text":""},{"location":"ko/api/listeners/#slack-listener","title":"Slack Listener","text":""},{"location":"ko/api/permits/","title":"API: Permit","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Permit\uc744 \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Permit\uc740 <code>HALF_OPEN</code> \uc0c1\ud0dc \ub3d9\uc548 \uc11c\ube44\uc2a4 \ubcf5\uad6c\ub97c \ud14c\uc2a4\ud2b8\ud558\uae30 \uc704\ud574 \uc5bc\ub9c8\ub098 \ub9ce\uc740 \uac80\uc99d \ud638\ucd9c\uc774 \ud1b5\uacfc\ub418\ub3c4\ub85d \ud5c8\uc6a9\ub418\ub294\uc9c0 \uc81c\uc5b4\ud569\ub2c8\ub2e4.</p> <p>Permit \uc120\ud0dd\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Permits \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/api/retries/","title":"API: Retry","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ubcf5\uad6c Retry\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Retry\ub97c Circuit Breaker\uac00 <code>OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ud558\uc5ec \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud574\uc57c \ud558\ub294 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4.</p> <p>Retry \uc120\ud0dd\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Retry \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/api/trackers/","title":"API: Tracker","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Tracker\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Tracker\ub294 \uc608\uc678\ub97c \uac80\uc0ac\ud558\uc5ec \uc2e4\ud328\ub85c \uac04\uc8fc\ud574\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4.</p> <p>Tracker \uc120\ud0dd\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Tracker \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/api/trippers/","title":"API: Tripper","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Tripper\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Tripper\ub294 <code>window</code>\uc758 Metric\uc744 \ud3c9\uac00\ud558\uc5ec \ud68c\ub85c\uac00 \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud574\uc57c \ud558\ub294\uc9c0 \uacb0\uc815\ud558\ub294 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4.</p> <p>Tripper \uc120\ud0dd \ubc0f \uc870\ud569\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Tripper \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/api/windows/","title":"API: Window","text":"<p>\uc774 \ud398\uc774\uc9c0\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Window\ub97c \ubb38\uc11c\ud654\ud569\ub2c8\ub2e4. Window\ub294 \ucd5c\uadfc \ud638\ucd9c\uc5d0 \ub300\ud55c Metric\uc744 \uc800\uc7a5\ud558\uace0 \uc81c\uacf5\ud558\ub294 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4.</p> <p>Window \uc120\ud0dd\uc5d0 \ub300\ud55c \uac1c\uc694\ub294 Windows \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc774\ub4dc\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/components/","title":"\ucef4\ud3ec\ub10c\ud2b8 \uac1c\uc694","text":"<p>Fluxgate\uc758 \ub3d9\uc791\uc740 \ud50c\ub7ec\uadf8\uc778 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8 \uc138\ud2b8\ub85c \uc815\uc758\ub429\ub2c8\ub2e4. \uc774 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc870\ud569\ud568\uc73c\ub85c\uc368 \uc2dc\uc2a4\ud15c\uc758 \ud544\uc694\uc5d0 \uc815\ud655\ud788 \ub9de\ub294 \ud68c\ub85c \ucc28\ub2e8\uae30\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uac01 \ucef4\ud3ec\ub10c\ud2b8\ub294 \ub85c\uc9c1\uc758 \ud2b9\uc815 \ubd80\ubd84\uc744 \ub2f4\ub2f9\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/#_2","title":"\uc544\ud0a4\ud14d\ucc98","text":"\ucef4\ud3ec\ub10c\ud2b8 \uc5ed\ud560 \uc870\ud569 \uac00\ub2a5 \uc5ec\ubd80 Window \ucd5c\uadfc \ud638\ucd9c \uacb0\uacfc\ub97c \uc800\uc7a5\ud558\ub294 \uc2ac\ub77c\uc774\ub529 \uc708\ub3c4\uc6b0. \uc544\ub2c8\uc694 Tracker \uc5b4\ub5a4 \uacb0\uacfc(\uc608: \ud2b9\uc815 \uc608\uc678)\uac00 \uc2e4\ud328\ub85c \uac04\uc8fc\ub418\uc5b4\uc57c \ud558\ub294\uc9c0 \uc2dd\ubcc4\ud569\ub2c8\ub2e4. \uc608 (&amp;, |, ~) Tripper Window\uc758 Metric\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc5b8\uc81c \ud68c\ub85c\ub97c \ud2b8\ub9bd\ud560\uc9c0 \uacb0\uc815\ud569\ub2c8\ub2e4. \uc608 (&amp;, |) Retry <code>OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c \uc774\ub3d9\ud558\ub294 \uc870\uac74\uc744 \uc815\uc758\ud569\ub2c8\ub2e4. \uc544\ub2c8\uc694 Permit <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \"\ud504\ub85c\ube0c\" \ud638\ucd9c \uc218\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc544\ub2c8\uc694 Listener \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ubc18\uc751\ud558\uc5ec \ub85c\uae45 \ub610\ub294 \uc54c\ub9bc\uacfc \uac19\uc740 \ubd80\uc791\uc6a9\uc744 \ud2b8\ub9ac\uac70\ud569\ub2c8\ub2e4. \uc544\ub2c8\uc694"},{"location":"ko/components/#_3","title":"\ucef4\ud3ec\ub10c\ud2b8 \uc720\ud615","text":""},{"location":"ko/components/#windows","title":"Windows","text":"<p>Windows\ub294 \ucd5c\uadfc \ud638\ucd9c \uacb0\uacfc(\uc131\uacf5, \uc2e4\ud328, \uc751\ub2f5 \uc2dc\uac04 \ub4f1)\ub97c \uc800\uc7a5\ud558\uace0, <code>tripper</code>\uac00 \ud68c\ub85c\ub97c \uc5f4\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \ub370 \uc0ac\uc6a9\ud558\ub294 Metric\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <ul> <li>CountWindow: \ub9c8\uc9c0\ub9c9 N\uac1c\uc758 \ud638\ucd9c\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4.</li> <li>TimeWindow: \ub9c8\uc9c0\ub9c9 N\ucd08 \ub3d9\uc548\uc758 \ud638\ucd9c\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate.windows import CountWindow, TimeWindow\n\nwindow = CountWindow(size=100)  # \ub9c8\uc9c0\ub9c9 100\uac1c \ud638\ucd9c \ucd94\uc801\nwindow = TimeWindow(size=60)    # \ub9c8\uc9c0\ub9c9 60\ucd08 \ucd94\uc801\n</code></pre>"},{"location":"ko/components/#trackers","title":"Trackers","text":"<p>Trackers\ub294 \ud638\ucd9c \uacb0\uacfc(\uc608: \uc608\uc678)\ub97c \uac80\uc0ac\ud558\uc5ec \uc2e4\ud328\ub85c \ud45c\uc2dc\ub418\uc5b4\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.</p> <ul> <li>All: \ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.</li> <li>TypeOf: \ud2b9\uc815 \uc608\uc678 \uc720\ud615\ub9cc \ucd94\uc801\ud569\ub2c8\ub2e4.</li> <li>Custom: \uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218\ub85c \uc2e4\ud328 \uae30\uc900\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\ntracker = TypeOf(ConnectionError, TimeoutError)\ntracker = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\n</code></pre> <p>\uc870\ud569 \uac00\ub2a5: <code>&amp;</code> (AND), <code>|</code> (OR), <code>~</code> (NOT) \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc870\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/#trippers","title":"Trippers","text":"<p>Trippers\ub294 <code>CLOSED</code> \uc0c1\ud0dc\uc5d0\uc11c <code>OPEN</code> \uc0c1\ud0dc\ub85c \ud68c\ub85c\ub97c \ud2b8\ub9bd\uc2dc\ud0a4\uac70\ub098 \ub2e4\uc2dc \ub2eb\ub294 \ud575\uc2ec \ub85c\uc9c1\uc744 \uc815\uc758\ud569\ub2c8\ub2e4. Window\uc758 Metric\uc744 \ubd84\uc11d\ud558\uc5ec \uacb0\uc815\uc744 \ub0b4\ub9bd\ub2c8\ub2e4.</p> <ul> <li>Closed/HalfOpened: \ud2b9\uc815 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc801\uc6a9\ub418\ub294 \uc870\uac74\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.</li> <li>MinRequests: \ucd5c\uc18c \ud638\ucd9c \uc218\uac00 \ucda9\uc871\ub418\uae30 \uc804\uc5d0 \ube0c\ub808\uc774\ucee4\uac00 \ud2b8\ub9bd\ub418\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4.</li> <li>FailureRate: \uc2e4\ud328\uc728\uc774 \ud2b9\uc815 \ube44\uc728\uc744 \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.</li> <li>AvgLatency: \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc774 \ub108\ubb34 \ub192\uc73c\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.</li> <li>SlowRate: \ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate.trippers import Closed, MinRequests, FailureRate\n\n# CLOSED \uc0c1\ud0dc\uc5d0\uc11c \ucd5c\uc18c 10\uac1c\uc758 \uc694\uccad\uacfc 50%\uc758 \uc2e4\ud328\uc728\uc774 \ucda9\uc871\ub418\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ntripper = Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)\n</code></pre> <p>\uc870\ud569 \uac00\ub2a5: <code>&amp;</code> (AND) \ubc0f <code>|</code> (OR) \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc815\uad50\ud55c \ud2b8\ub9bd \uc870\uac74\uc744 \uad6c\ucd95\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/#retries","title":"Retries","text":"<p>Retry\ub294 \ucfe8\ub2e4\uc6b4 \uae30\uac04\uc744 \uc81c\uc5b4\ud558\uc5ec \ud68c\ub85c\uac00 <code>OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c \uc774\ub3d9\ud558\uc5ec \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud574\uc57c \ud558\ub294 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4.</p> <ul> <li>Never: \uc218\ub3d9 \uc7ac\uc124\uc815\uc774 \ud544\uc694\ud558\uba70, \ud68c\ub85c\uac00 \uc790\ub3d9\uc73c\ub85c \ubcf5\uad6c\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</li> <li>Always: \uc989\uc2dc \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud569\ub2c8\ub2e4.</li> <li>Cooldown: \uace0\uc815\ub41c \ub300\uae30 \uc2dc\uac04 \ub3d9\uc548 \uae30\ub2e4\ub9b0 \ud6c4 \uc804\ud658\ud569\ub2c8\ub2e4.</li> <li>Backoff: \ubc18\ubcf5\uc801\uc778 \uc2e4\ud328 \ud6c4 \ub300\uae30 \uc2dc\uac04\uc744 \ub298\ub9ac\ub294 \uc9c0\uc218 \ubc31\uc624\ud504 \uc54c\uace0\ub9ac\uc998\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\nretry = Cooldown(duration=60.0, jitter_ratio=0.1)\nretry = Backoff(initial=10.0, multiplier=2.0, max_duration=300.0)\n</code></pre>"},{"location":"ko/components/#permits","title":"Permits","text":"<p>Permit\uc740 <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \ud638\ucd9c \uc218\ub97c \uad00\ub9ac\ud558\uc5ec \uc11c\ube44\uc2a4 \ubcf5\uad6c\ub97c \uc548\uc804\ud558\uac8c \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\ub3c4\ub85d \ub3d5\uc2b5\ub2c8\ub2e4.</p> <ul> <li>All: \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4 (\ud14c\uc2a4\ud2b8\uc6a9).</li> <li>Random: \ud655\ub960\uc801\uc73c\ub85c \uc77c\uc815 \ube44\uc728\uc758 \ud638\ucd9c\uc744 \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.</li> <li>RampUp: \uc124\uc815\ub41c \uae30\uac04 \ub3d9\uc548 \ud5c8\uc6a9\ub418\ub294 \ud638\ucd9c \ube44\uc728\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate.permits import All, Random, RampUp\n\npermit = All()\npermit = Random(ratio=0.5)\npermit = RampUp(initial=0.1, final=0.8, duration=60.0)\n</code></pre>"},{"location":"ko/components/#listeners","title":"Listeners","text":"<p>Listeners\ub294 \uc0c1\ud0dc \ubcc0\uacbd \uc774\ubca4\ud2b8\uc5d0 \ub4f1\ub85d\ud558\uc5ec \ub85c\uae45, \ubaa8\ub2c8\ud130\ub9c1 \ub610\ub294 \uc54c\ub9bc\uacfc \uac19\uc740 \ubd80\uc791\uc6a9\uc744 \ud2b8\ub9ac\uac70\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li>LogListener: \ud45c\uc900 \ub85c\uae45\uc5d0 \uc0c1\ud0dc \ubcc0\uacbd\uc744 \uae30\ub85d\ud569\ub2c8\ub2e4.</li> <li>PrometheusListener: Prometheus \uc2a4\ud06c\ub798\ud551\uc744 \uc704\ud55c \uba54\ud2b8\ub9ad\uc744 \ub178\ucd9c\ud569\ub2c8\ub2e4. (optional)</li> <li>SlackListener: Slack \ucc44\ub110\ub85c \uc0c1\ud0dc \ubcc0\uacbd \uc54c\ub9bc\uc744 \ubcf4\ub0c5\ub2c8\ub2e4. (optional)</li> </ul> <pre><code>from fluxgate.listeners.log import LogListener\n\nlisteners = [LogListener()]\ncb = CircuitBreaker(..., listeners=listeners)\n</code></pre>"},{"location":"ko/components/#_4","title":"\uc804\uccb4 \uc608\uc81c","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\nfrom fluxgate.trackers import TypeOf\nfrom fluxgate.trippers import MinRequests, FailureRate, SlowRate\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    window=TimeWindow(size=60),  # \ucd5c\uadfc 60\ucd08 \ub3d9\uc548\uc758 \ud638\ucd9c \ucd94\uc801\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    tripper=MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.8)),\n    retry=Backoff(initial=10.0, multiplier=2.0, max_duration=300.0),\n    permit=RampUp(initial=0.1, final=0.5, duration=60.0),\n    slow_threshold=2.0,  # 2\ucd08 \uc774\uc0c1 \uac78\ub9ac\uba74 \ub290\ub9b0 \ud638\ucd9c\ub85c \uac04\uc8fc\n)\n</code></pre>"},{"location":"ko/components/#_5","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Windows: \uc0ac\uc6a9 \uc0ac\ub840\uc5d0 \ub9de\ub294 \uc62c\ubc14\ub978 Window \uc720\ud615\uc744 \uc120\ud0dd\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6b0\uc138\uc694.</li> <li>Trackers: \uc815\ud655\ud55c \uc2e4\ud328 \uae30\uc900\uc744 \uc815\uc758\ud558\uc138\uc694.</li> <li>Trippers: \ud68c\ub85c\ub97c \ud2b8\ub9bd\uc2dc\ud0a4\ub294 \uac15\ub825\ud55c \uc870\uac74\uc744 \uad6c\ucd95\ud558\uc138\uc694.</li> <li>Retries: \ubcf5\uad6c \uc870\uac74\uc744 \uc124\uacc4\ud558\uc138\uc694.</li> <li>Permits: \ubcf5\uad6c \uae30\uac04 \ub3d9\uc548 \ud2b8\ub798\ud53d\uc744 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud558\uc138\uc694.</li> <li>Listeners: \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc54c\ub9bc \uc2a4\ud0dd\uacfc \ud1b5\ud569\ud558\uc138\uc694.</li> </ul>"},{"location":"ko/components/permits/","title":"Permits","text":"<p>Permit\uc740 <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ud638\ucd9c\uc758 \ud5c8\uc6a9 \uc5ec\ubd80\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4. Half Open\uc73c\ub85c \uc804\ud658\ub41c \uc774\ud6c4, \uc11c\ube44\uc2a4\ub85c \ud1b5\uacfc\ub420 \uc218 \uc788\ub294 \ud638\ucd9c \uc218\ub97c \uc81c\uc5b4\ud558\uc5ec \uac11\uc791\uc2a4\ub7ec\uc6b4 \ud2b8\ub798\ud53d \ud3ed\uc8fc\ub85c \uc11c\ube44\uc2a4\uac00 \uacfc\ubd80\ud558\ub418\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4.</p> Permit \uc720\ud615 \ub3d9\uc791 \uc801\ud569\ud55c \uacbd\uc6b0 All \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ud56d\uc0c1 \ud5c8\uc6a9 \ud14c\uc2a4\ud2b8 \ub610\ub294 \ud2b8\ub798\ud53d \uc81c\ud55c\uc774 \ud544\uc694 \uc5c6\ub294 \uacbd\uc6b0 Random \ubb34\uc791\uc704\ub85c \uace0\uc815\ub41c \ube44\uc728\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9 \ud2b8\ub798\ud53d\uc744 \uc81c\ud55c\ud558\ub294 \ud655\ub960\uc801\uc778 \ubc29\uc2dd RampUp \ud5c8\uc6a9\ub41c \ud638\ucd9c\uc758 \ube44\uc728\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00 \ud2b8\ub798\ud53d\uc744 \ubd80\ub4dc\ub7fd\uac8c \uc7ac\ub3c4\uc785\ud558\ub294 \ubc29\uc2dd"},{"location":"ko/components/permits/#all","title":"All","text":"<p>\ubaa8\ub4e0 \ud638\ucd9c\uc744 \ubb34\uc870\uac74 \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/permits/#all-how-it-works","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p><code>All</code>\uc740 \ubaa8\ub4e0 \ud638\ucd9c\uc5d0 \ub300\ud574 <code>True</code>\ub97c \ubc18\ud658\ud558\uc5ec <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c 100%\uc758 \ud2b8\ub798\ud53d\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4. \uc774\ub294 \uc8fc\ub85c \ud14c\uc2a4\ud2b8 \uc2dc\ub098\ub9ac\uc624\uc5d0\uc11c \uc720\uc6a9\ud558\uac70\ub098, \uc0c1\ud0dc \uc804\ud658 \uc81c\uc5b4\ub97c <code>tripper</code>\uc5d0\ub9cc \uc758\uc874\ud558\ub824\ub294 \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import All\n\n# HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ubaa8\ub4e0 \ud638\ucd9c\uc744 \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=All(),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#random","title":"Random","text":"<p>\uace0\uc815\ub41c \ud655\ub960\ub85c \ud638\ucd9c\uc744 \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/permits/#random-how-it-works","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p><code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0 \ub3c4\ub2ec\ud558\ub294 \ubaa8\ub4e0 \ud638\ucd9c\uc5d0 \ub300\ud574 <code>Random</code>\uc740 \ub09c\uc218\ub97c \uc0dd\uc131\ud558\uace0, \uad6c\uc131\ub41c <code>ratio</code> \ub0b4\uc5d0 \uc788\uc73c\uba74 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</p> <ul> <li><code>Random(ratio=0.1)</code>\uc740 \ub300\ub7b5 10%\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> <li><code>Random(ratio=0.8)</code>\uc740 \ub300\ub7b5 80%\uc758 \ud638\ucd9c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import Random\n\n# HALF_OPEN \uc0c1\ud0dc\uc5d0\uc11c \ub300\ub7b5 50%\uc758 \ud638\ucd9c\uc744 \ud1b5\uacfc\uc2dc\ud0b5\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=Random(ratio=0.5),\n    ...\n)\n</code></pre>"},{"location":"ko/components/permits/#rampup","title":"RampUp","text":"<p>\uc2dc\uac04\uc774 \uc9c0\ub0a8\uc5d0 \ub530\ub77c \ud5c8\uc6a9\ub960\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ucf1c \ub354 \ubd80\ub4dc\ub7fd\uace0 \uc628\uac74\ud55c \ubcf5\uad6c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \ub300\ubd80\ubd84\uc758 \ucf00\uc774\uc2a4\uc5d0 \uad8c\uc7a5\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/components/permits/#rampup-how-it-works","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p><code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0 \uc9c4\uc785\ud55c \uc774\ud6c4 \uacbd\uacfc\ub41c \uc2dc\uac04\uc744 \uae30\ubc18\uc73c\ub85c, \uc124\uc815\ub41c <code>duration</code> \ub3d9\uc548 <code>initial</code> \uac12\uc5d0\uc11c <code>final</code> \uac12\uae4c\uc9c0 \ud5c8\uc6a9\ub418\ub294 \ud2b8\ub798\ud53d \ube44\uc728\uc744 \uc120\ud615\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.permits import RampUp\n\n# 10%\uc758 \ud2b8\ub798\ud53d\uc744 \ud5c8\uc6a9\ud558\ub294 \uac83\uc73c\ub85c \uc2dc\uc791\ud558\uc5ec 60\ucd08 \ub3d9\uc548 80%\uae4c\uc9c0 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>\uc608\uc2dc \uc9c4\ud589: <code>RampUp(initial=0.1, final=0.8, duration=60.0)</code>\uc758 \uacbd\uc6b0</p> <ul> <li>0\ucd08 \uc2dc\uc810: \ud638\ucd9c\uc758 10%\uac00 \ud5c8\uc6a9\ub429\ub2c8\ub2e4.</li> <li>15\ucd08 \uc2dc\uc810: \ud638\ucd9c\uc758 27.5%\uac00 \ud5c8\uc6a9\ub429\ub2c8\ub2e4.</li> <li>30\ucd08 \uc2dc\uc810: \ud638\ucd9c\uc758 45%\uac00 \ud5c8\uc6a9\ub429\ub2c8\ub2e4.</li> <li>60\ucd08 \uc2dc\uc810(\uc774\ud6c4): \ube44\uc728\uc740 <code>final</code> \uac12\uc778 80%\ub85c \uc81c\ud55c\ub429\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/permits/#permit","title":"\uc62c\ubc14\ub978 Permit \uc120\ud0dd","text":""},{"location":"ko/components/permits/#comparison","title":"\ube44\uad50","text":"\uae30\ub2a5 All Random RampUp \ubcf5\uc7a1\uc131 \ub9e4\uc6b0 \uac04\ub2e8 \uac04\ub2e8 \uc911\uac04 \ud5c8\uc6a9\ub960 100% \uc77c\uc815 \uc2dc\uac04 \uacbd\uacfc\uc5d0 \ub530\ub77c \uc99d\uac00 \ubcf5\uad6c \ubc29\uc2dd \uc81c\ud55c \uc5c6\uc74c \uc989\uc2dc \uace0\uc815 \ube44\uc728 \uc810\uc9c4\uc801 \uc99d\uac00 \ub85c\ub4dc \uc2a4\ud30c\uc774\ud06c \uc704\ud5d8 \uac00\uc7a5 \ub192\uc74c \ub192\uc74c (\ub192\uc740 \ube44\uc728\uc5d0\uc11c) \ub9e4\uc6b0 \ub0ae\uc74c \uad8c\uc7a5 \ud14c\uc2a4\ud2b8 \uc804\uc6a9 \uac04\ub2e8\ud55c \uacbd\uc6b0 \uad8c\uc7a5"},{"location":"ko/components/permits/#choose-random","title":"<code>Random</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>Random</code>\uc740 \uc77c\uc815\ud55c \uc18d\ub3c4\ub85c \ubcf5\uad6c \ud14c\uc2a4\ud2b8\ub97c \uc989\uc2dc \uc2dc\uc791\ud574\uc57c \ud558\uace0 \ud558\uc704 \uc2a4\ud2b8\ub9bc \uc11c\ube44\uc2a4\uc5d0 \uacfc\ubd80\ud558\ub97c \uc8fc\ub294 \uac83\uc5d0 \ub300\ud574 \uac71\uc815\ud558\uc9c0 \uc54a\ub294 \uac04\ub2e8\ud55c \uc0ac\uc6a9 \uc0ac\ub840\uc5d0 \uac00\uc7a5 \uc801\ud569\ud569\ub2c8\ub2e4.</p> <p>\uad8c\uc7a5 \uc124\uc815:</p> <pre><code>from fluxgate.permits import Random\n\n# \ubcf4\uc218\uc801 (\uc548\uc815\uc131 \uc6b0\uc120)\npermit = Random(ratio=0.3)\n\n# \uacf5\uaca9\uc801 (\ube60\ub978 \ubcf5\uad6c \uc6b0\uc120)\npermit = Random(ratio=0.8)\n</code></pre>"},{"location":"ko/components/permits/#choose-rampup","title":"<code>RampUp</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>RampUp</code>\uc740 \ub300\ubd80\ubd84\uc758 \uc0ac\uc6a9 \uc0ac\ub840\uc5d0\uc11c \uad8c\uc7a5\ub429\ub2c8\ub2e4. \ud2b8\ub798\ud53d\uc744 \ucc9c\ucc9c\ud788 \uc7ac\ub3c4\uc785\ud558\uc5ec \uc11c\ube44\uc2a4\uac00 \uce90\uc2dc\ub97c \uc6cc\ubc0d\uc5c5\ud558\uace0 \uc5f0\uacb0\uc744 \uc7ac\uc124\uc815\ud558\uba70 \uc2a4\ucf00\uc77c\uc5c5\ud560 \uc2dc\uac04\uc744 \uc81c\uacf5\ud568\uc73c\ub85c\uc368 \uac00\uc7a5 \uc548\uc804\ud55c \ubcf5\uad6c \uacbd\ub85c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>\uad8c\uc7a5 \uc124\uc815:</p> <pre><code>from fluxgate.permits import RampUp\n\n# \ubcf4\uc218\uc801 \ubcf5\uad6c\npermit = RampUp(initial=0.1, final=0.5, duration=120.0)\n\n# \uacf5\uaca9\uc801 \ubcf5\uad6c\npermit = RampUp(initial=0.5, final=1.0, duration=30.0)\n</code></pre>"},{"location":"ko/components/permits/#relationship-with-retry","title":"Retry\uc640\uc758 \uad00\uacc4","text":"<p><code>retry</code> \ubc0f <code>permit</code>\uc740 \ud568\uaed8 \uc791\ub3d9\ud558\uc5ec \uc644\uc804\ud55c \ubcf5\uad6c \ud504\ub85c\uc138\uc2a4\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.</p> <ul> <li>Retry: Half Open \uc0c1\ud0dc\ub85c\uc758 \uc804\ud658 \uc2dc\uc810\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4.</li> <li>Permit: Half Open \uc0c1\ud0dc\uc5d0\uc11c \uc694\uccad\uc758 \ud5c8\uc6a9 \uc5ec\ubd80\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\nfrom fluxgate.permits import RampUp\n\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(initial=10.0, multiplier=2.0),\n    permit=RampUp(initial=0.1, final=0.8, duration=60.0),\n    ...\n)\n</code></pre> <p>\ubcf5\uad6c \ud750\ub984\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:</p> <ol> <li><code>tripper</code> \uc870\uac74\uc774 \ucda9\uc871\ub418\uace0 \ud68c\ub85c\uac00 <code>OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> <li><code>retry</code>\uac00 \uc77c\uc815 \uc2dc\uac04 \ub300\uae30\ud569\ub2c8\ub2e4. <code>Backoff(initial=10.0)</code>\uc744 \uc0ac\uc6a9\ud558\uba74 10\ucd08 \ub3d9\uc548 \uae30\ub2e4\ub9bd\ub2c8\ub2e4.</li> <li>10\ucd08 \ud6c4 \ud68c\ub85c\uac00 <code>HALF_OPEN</code>\uc73c\ub85c \uc804\ud658\ub429\ub2c8\ub2e4.</li> <li>\uc774\uc81c <code>permit</code>\uc774 \ub3d9\uc791\ud569\ub2c8\ub2e4. \ub2e4\uc74c 60\ucd08 \ub3d9\uc548 \ud5c8\uc6a9\ub418\ub294 \ud638\ucd9c\uc758 \ube44\uc728\uc744 10%\uc5d0\uc11c 80%\uae4c\uc9c0 \uc810\uc9c4\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.</li> <li>\uc774 \uc2dc\uac04 \ub3d9\uc548 <code>tripper</code>\uc758\ud574 \uc2e4\ud328\ub85c \ud310\ub2e8\ub418\uba74 <code>OPEN</code>\uc73c\ub85c \ub2e4\uc2dc trip\ub418\uace0 <code>retry</code> \uce74\uc6b4\ud130\uac00 \uc99d\uac00\ud569\ub2c8\ub2e4(\ub2e4\uc74c \ub300\uae30 \uc2dc\uac04\uc740 20\ucd08\uac00 \ub429\ub2c8\ub2e4).</li> <li>\uc131\uacf5\ud558\uba74 \ud68c\ub85c\ub294 <code>CLOSED</code>\ub85c \ub2e4\uc2dc \uc804\ud658\ub418\uace0 \uc815\uc0c1 \uc791\ub3d9\uc774 \uc7ac\uac1c\ub429\ub2c8\ub2e4.</li> </ol>"},{"location":"ko/components/permits/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Listeners: \uc0c1\ud0dc \ubcc0\uacbd\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uc54c\ub9bc\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.</li> <li>Circuit Breaker \uac1c\uc694: \ubaa8\ub4e0 \ucef4\ud3ec\ub10c\ud2b8\uac00 \uc5b4\ub5bb\uac8c \ud568\uaed8 \uc791\ub3d9\ud558\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694.</li> </ul>"},{"location":"ko/components/retries/","title":"Retry","text":"<p>Retry\ub294 Circuit Breaker\uc758 \"\ucfe8\ub2e4\uc6b4\" \uae30\uac04\uc744 \uc815\uc758\ud569\ub2c8\ub2e4. <code>OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c \uc804\ud658\ud558\uc5ec \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud574\uc57c \ud558\ub294 \uc2dc\uc810\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4.</p> Retry \uc720\ud615 \uc804\ud658 \uc2dc\uc810 \uc801\ud569\ud55c \uacbd\uc6b0 Always \uc989\uc2dc \uc989\uac01\uc801\uc778 Retry\uac00 \ud5c8\uc6a9\ub418\ub294 \uc911\uc694\ud558\uc9c0 \uc54a\uc740 \uc11c\ube44\uc2a4 Never \uc218\ub3d9\uc73c\ub85c\ub9cc \ubcf5\uad6c\uc5d0 \uc6b4\uc601\uc790\uc758 \uc218\ub3d9 \uac1c\uc785\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 Cooldown \uace0\uc815 \uc9c0\uc5f0 \ud6c4 \uc77c\uc815 \uc2dc\uac04 \ub300\uae30 \ud6c4 \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud558\uae30 \uc6d0\ud558\ub294 \uacbd\uc6b0 Backoff \uc9c0\uc218\uc801\uc73c\ub85c \uc99d\uac00\ud558\ub294 \uc9c0\uc5f0 \ud6c4 \ubc18\ubcf5\uc801\uc778 \uc2e4\ud328 \ud6c4 \ub354 \uc624\ub798 \uae30\ub2e4\ub9ac\ub294 \uc801\uc751\ud615 \uc811\uadfc \ubc29\uc2dd"},{"location":"ko/components/retries/#always","title":"Always","text":"<p>\ud68c\ub85c\uac00 \uc5f4\ub9b0 \uc9c1\ud6c4 <code>HALF_OPEN</code>\uc73c\ub85c \uc774\ub3d9\uc2dc\ud0b5\ub2c8\ub2e4. \uc774\ud6c4 \ubaa8\ub4e0 \ud638\ucd9c\uc5d0\uc11c \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud569\ub2c8\ub2e4.</p> <p>\uc8fc\uc758\ud574\uc11c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624</p> <p><code>Always</code>\ub294 \ub9ce\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ub3d9\uc2dc\uc5d0 Retry\ud558\uc5ec \ubcf5\uad6c \uc911\uc778 \uc11c\ube44\uc2a4\uc5d0 \uacfc\ubd80\ud558\ub97c \uc8fc\ub294 \"\ub3d9\uc2dc\ub2e4\ubc1c\uc801\uc778 \uc694\uccad\" \ubb38\uc81c\ub97c \uc57c\uae30\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc704\ud5d8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc2e4\ud328\uac00 \ub9e4\uc6b0 \uc9e7\uc740 \uac83\uc73c\ub85c \uc54c\ub824\uc9c4 \uc911\uc694\ud558\uc9c0 \uc54a\uc740 \uc11c\ube44\uc2a4\uc5d0 \uac00\uc7a5 \uc801\ud569\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Always\n\n# \uc77c\ubc18\uc801\uc73c\ub85c \uad8c\uc7a5\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\ncb = CircuitBreaker(name=\"api\", retry=Always(), ...)\n</code></pre>"},{"location":"ko/components/retries/#never","title":"Never","text":"<p>\uc218\ub3d9\uc73c\ub85c \uc7ac\uc124\uc815\ub420 \ub54c\uae4c\uc9c0 \ud68c\ub85c\ub97c <code>OPEN</code> \uc0c1\ud0dc\ub85c \ubb34\uae30\ud55c \uc720\uc9c0\ud569\ub2c8\ub2e4. \uc11c\ube44\uc2a4 \ubcf5\uad6c\uc5d0 \uc0ac\ub78c\uc758 \uac1c\uc785\uc774 \ud544\uc694\ud560 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Never\n\ncb = CircuitBreaker(name=\"api\", retry=Never(), ...)\n\n# \uc6b4\uc601\uc790\ub294 \uc11c\ube44\uc2a4 \ubcf5\uad6c \ud6c4 \uc218\ub3d9\uc73c\ub85c \ube0c\ub808\uc774\ucee4\ub97c \uc7ac\uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\ncb.reset()\n</code></pre>"},{"location":"ko/components/retries/#cooldown","title":"Cooldown","text":"<p><code>HALF_OPEN</code>\uc73c\ub85c \uc774\ub3d9\ud558\uae30 \uc804\uc5d0 \uace0\uc815\ub41c <code>duration</code>(\ucd08 \ub2e8\uc704) \ub3d9\uc548 \uae30\ub2e4\ub9bd\ub2c8\ub2e4.</p> <p>\uc608\uce21 \uac00\ub2a5\ud55c \uc2dc\uac04 \ub0b4\uc5d0 \ubcf5\uad6c\uac00 \uc608\uc0c1\ub418\ub294 \uc11c\ube44\uc2a4\uc77c \uacbd\uc6b0 \uc120\ud0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Cooldown\n\n# \uccab \ubc88\uc9f8 \ubcf5\uad6c \uc2dc\ub3c4 \uc804\uc5d0 60\ucd08 \ub3d9\uc548 \uae30\ub2e4\ub9bd\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Cooldown(duration=60.0),\n    ...\n)\n</code></pre>"},{"location":"ko/components/retries/#backoff","title":"Backoff","text":"<p>\uac01 \uc5f0\uc18d\uc801\uc778 \uc2e4\ud328 \ud6c4\uc5d0 \ub300\uae30 \uc2dc\uac04\uc744 \uc9c0\uc218\uc801\uc73c\ub85c \uc99d\uac00\uc2dc\ucf1c, \uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c\ud560 \uc2dc\uac04\uc744 \ub354 \ub9ce\uc774 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>\ub300\uae30 \uc2dc\uac04\uc740 <code>initial * (multiplier ** consecutive_failures)</code>\ub85c \uacc4\uc0b0\ub429\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.retries import Backoff\n\n# \ub300\uae30 \uc2dc\uac04\uc740 10\ucd08\uc5d0\uc11c \uc2dc\uc791\ud558\uc5ec, \uc2e4\ud328\ud55c \uac01 \ubcf5\uad6c \uc2dc\ub3c4 \ud6c4\uc5d0 \ub450 \ubc30\uac00 \ub418\uba70,\n# \ucd5c\ub300 300\ucd08\ub85c \uc81c\ud55c\ub429\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    retry=Backoff(\n        initial=10.0,\n        multiplier=2.0,\n        max_duration=300.0\n    ),\n    ...\n)\n# \ub300\uae30 \uc2dc\uac04 \uc2dc\ud000\uc2a4\n# 1\ucc28 \uc2dc\ub3c4 -&gt; 10\ucd08\n# 2\ucc28 \uc2dc\ub3c4 -&gt; 20\ucd08\n# 3\ucc28 \uc2dc\ub3c4 -&gt; 40\ucd08\n# 4\ucc28 \uc2dc\ub3c4 -&gt; 80\ucd08\n# 5\ucc28 \uc2dc\ub3c4 -&gt; 160\ucd08\n# 6\ucc28 \uc774\uc0c1 \uc2dc\ub3c4 -&gt; 300\ucd08 (max_duration\uc73c\ub85c \uc81c\ud55c)\n</code></pre>"},{"location":"ko/components/retries/#retry_1","title":"\uc62c\ubc14\ub978 Retry \uc120\ud0dd","text":""},{"location":"ko/components/retries/#comparison","title":"\ube44\uad50","text":"\uae30\ub2a5 Always Never Cooldown Backoff \ubcf5\uad6c \uc989\uc2dc \uc218\ub3d9 \uace0\uc815 \uc9c0\uc5f0 \uc9c0\uc218 \uc9c0\uc5f0 \uc11c\ube44\uc2a4 \ubd80\ud558 \ub192\uc74c \uc5c6\uc74c \uc911\uac04 \ub0ae\uc74c \ubc18\ubcf5 \uc2e4\ud328 \ucc98\ub9ac \uc544\ub2c8\uc694 \ud574\ub2f9 \uc5c6\uc74c \uc544\ub2c8\uc694 \uc608 \ubcf5\uc7a1\uc131 \ub9e4\uc6b0 \uac04\ub2e8 \ub9e4\uc6b0 \uac04\ub2e8 \uac04\ub2e8 \uc911\uac04 \uad8c\uc7a5 \uc5ec\ubd80 \uc544\ub2c8\uc694 \ud2b9\uc218 \uc0ac\ub840\uc6a9 \uc88b\uc740 \uae30\ubcf8\uac12 \uad8c\uc7a5"},{"location":"ko/components/retries/#choose-always","title":"<code>Always</code>\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p>\uc2e4\ud328\uac00 \uadf9\ud788 \uc9e7\uace0 \uc11c\ube44\uc2a4\uac00 \ub9ce\uc740 Retry \ubcfc\ub968\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uac83\uc73c\ub85c \uc54c\ub824\uc9c4 \uc911\uc694\ud558\uc9c0 \uc54a\uc740 \uc11c\ube44\uc2a4\uc5d0\ub9cc \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/retries/#choose-never","title":"<code>Never</code>\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p>\uc11c\ube44\uc2a4 \ubcf5\uad6c\uc5d0 \uc218\ub3d9 \uac1c\uc785\uc774 \ud544\uc694\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. Circuit Breaker\ub294 \uc790\uccb4\uc801\uc73c\ub85c \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: \uacc4\ud68d\ub41c \ubc30\ud3ec \uc911\uc774\uac70\ub098 \uc11c\ube44\uc2a4\uac00 \uc720\uc9c0\ubcf4\uc218\ub97c \uc704\ud574 \uc911\ub2e8\ub418\uc5c8\uc744 \ub54c.</li> </ul>"},{"location":"ko/components/retries/#choose-cooldown","title":"<code>Cooldown</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p>\uac04\ub2e8\ud55c \uae30\ubcf8\uac12\uc785\ub2c8\ub2e4. \uc11c\ube44\uc2a4\uac00 \ubcf5\uad6c\ud558\ub294 \ub370 \uac78\ub9ac\ub294 \uc2dc\uac04\uc5d0 \ub300\ud55c \uc77c\ubc18\uc801\uc778 \uc608\uce21\uce58\uac00 \uc788\uc744 \ub54c \uac00\uc7a5 \uc88b\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: \uace0\uc815\ub41c \uc18d\ub3c4 \uc81c\ud55c Window\ub97c \uac00\uc9c4 \uc678\ubd80 API\uc640 \uac19\uc774 \uc608\uce21 \uac00\ub2a5\ud55c \ubcf5\uad6c \uc2dc\uac04\uc744 \uac00\uc9c4 \uc11c\ube44\uc2a4\ub97c \ubcf4\ud638\ud560 \ub54c.</li> </ul>"},{"location":"ko/components/retries/#choose-backoff","title":"<code>Backoff</code>\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p>\ub300\ubd80\ubd84\uc758 \uc0ac\uc6a9 \uc0ac\ub840\uc5d0\uc11c \uad8c\uc7a5\ub429\ub2c8\ub2e4. \ubc18\ubcf5\uc801\uc778 \uc2e4\ud328 \uc2dc \ubcf5\uad6c\ud560 \uc2dc\uac04\uc744 \ub354 \ub9ce\uc774 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: \ub2e4\uc2dc \uc2dc\uc791\ud558\uac70\ub098 \uc911\ub2e8\uc5d0\uc11c \ubcf5\uad6c\ud558\ub294 \ub370 \ub290\ub9b4 \uc218 \uc788\ub294 \uc911\uc694\ud55c \ud558\uc704 \uc2a4\ud2b8\ub9bc \uc11c\ube44\uc2a4\ub97c \ubcf4\ud638\ud560 \ub54c.</li> </ul>"},{"location":"ko/components/retries/#using-jitter","title":"\uc9c0\ud130\uc5d0 \ub300\ud55c \ucc38\uace0 \uc0ac\ud56d","text":"<p>\uc9c0\ud130\ub97c \ucd94\uac00\ud558\uc138\uc694</p> <p>\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ube44\uc2a4\uac00 \uc5ec\ub7ec \uc778\uc2a4\ud134\uc2a4\ub85c \ub3d9\uc791\ud558\ub294 \uacbd\uc6b0, <code>Cooldown</code>\uacfc <code>Backoff</code> \ubaa8\ub450\uc5d0 jitter\ub97c \ucd94\uac00\ud558\uc138\uc694. \ub3d9\uc2dc\uc5d0 \ubcf5\uad6c\ub97c \uc2dc\ub3c4\ud558\ub294 \"\ub3d9\uc2dc\ub2e4\ubc1c\uc801\uc778 \uc694\uccad\" \uc2dc\ub098\ub9ac\uc624\ub97c \ubc29\uc9c0\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.</p> <pre><code>from fluxgate.retries import Cooldown, Backoff\n\n# 60\ucd08 \ucfe8\ub2e4\uc6b4\uc758 \uacbd\uc6b0, \uc9c0\ud130\ub294 +/- 6\ucd08\uc758 \ubb34\uc791\uc704 \ubcc0\ub3d9\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4 (54\ucd08\uc5d0\uc11c 66\ucd08).\nretry_cooldown = Cooldown(duration=60.0, jitter_ratio=0.1)\n\n# \ub3d9\uc77c\ud558\uac8c \ubc31\uc624\ud504\uc758 \uac01 \ub2e8\uacc4\uc5d0\ub3c4 \uc801\uc6a9\ub429\ub2c8\ub2e4.\nretry_backoff = Backoff(initial=10.0, jitter_ratio=0.1)\n</code></pre>"},{"location":"ko/components/retries/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Permits: <code>HALF_OPEN</code> \ubcf5\uad6c \uc0c1\ud0dc\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \"\ud504\ub85c\ube0c\" \ud638\ucd9c \uc218\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li>Trippers: \ud68c\ub85c\uac00 \ud2b8\ub9bd\ub418\ub294 \uc870\uac74\uc744 \uc815\uc758\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/trackers/","title":"Tracker","text":"<p>Tracker\ub294 \"\uc2e4\ud328\"\uac00 \ubb34\uc5c7\uc744 \uc758\ubbf8\ud558\ub294\uc9c0 \uc815\uc758\ud569\ub2c8\ub2e4. \ubaa8\ub4e0 \uc608\uc678\ub294 \ud638\ucd9c\uc790\uc5d0\uac8c \uc804\ud30c\ub418\uc9c0\ub9cc, Tracker\ub294 \uc5b4\ub5a4 \uc608\uc678\uac00 \uc2e4\uc81c\ub85c \uc2e4\ud328\ub85c \ucde8\uae09\ub418\uc5b4 Circuit Breaker\ub97c trip \uc2dc\ud0a4\ub294 \ub370 \uae30\uc5ec\ud574\uc57c \ud558\ub294\uc9c0 \uacb0\uc815\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc608\uc0c1\ub41c \uc624\ub958(\uc608: 404 Not Found)\uc640 \uc2e4\uc81c \uc2e4\ud328(\uc608: 500 Internal Server Error)\ub97c \uad6c\ubcc4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> Tracker \uc720\ud615 \uc77c\uce58 \uae30\uc900 \uc801\ud569\ud55c \uacbd\uc6b0 All \ubaa8\ub4e0 \uc608\uc678 \ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \ucde8\uae09\ud558\ub294 \uacbd\uc6b0. TypeOf \uc608\uc678 \uc720\ud615 \uc608\uc678 \uc720\ud615\uc73c\ub85c \uc2e4\ud328\ub97c \uc2dd\ubcc4\ud560 \uc218 \uc788\ub294 \uacbd\uc6b0. (\uc608: <code>ConnectionError</code>) Custom \uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218 \uc2e4\ud328\ub85c \ucde8\uae09\ud560 \uc870\uac74\uc744 \uc0ac\uc6a9\uc790 \uc815\uc758\ud558\uace0\uc790 \ud558\ub294 \uacbd\uc6b0. (\uc608: HTTP Status Code)"},{"location":"ko/components/trackers/#all","title":"All","text":"<p>\uac00\uc7a5 \uac04\ub2e8\ud55c Tracker\uc785\ub2c8\ub2e4. \ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import All\n\n# \ub370\ucf54\ub808\uc774\ud130\uac00 \uc801\uc6a9\ub41c \ud568\uc218\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubaa8\ub4e0 \uc608\uc678\ub294 \uc2e4\ud328\ub85c \ucd94\uc801\ub429\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    tracker=All(),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#typeof","title":"TypeOf","text":"<p>\uc774 Tracker\ub294 \uc608\uc678\uac00 \ud558\ub098 \uc774\uc0c1\uc758 \uc9c0\uc815\ub41c \uc720\ud615\uc758 \uc778\uc2a4\ud134\uc2a4\uc778\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \uc608\uc678 \uc720\ud615\uc744 \ud2b9\uc815\ud560 \uc218 \uc788\uc744 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import TypeOf\n\n# \ub124\ud2b8\uc6cc\ud06c \uad00\ub828 \uc608\uc678\ub9cc \uc2e4\ud328\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.\n# \ub2e4\ub978 \uc608\uc678(\uc608: ValueError)\ub294 Circuit Breaker \uc0c1\ud0dc \uc804\ud658 \uc870\uac74\uc5d0\uc11c \ud65c\uc6a9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"external_api\",\n    tracker=TypeOf(ConnectionError, TimeoutError),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#custom","title":"Custom","text":"<p>\ucd5c\ub300\ud55c\uc758 \uc720\uc5f0\uc131\uc744 \uc704\ud574 <code>Custom</code>\uc740 \uc608\uc678\ub97c \uac80\uc0ac\ud558\uace0 \uc2e4\ud328 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \uc790\uccb4 \ud568\uc218\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trackers import Custom\nimport httpx\n\n# 5xx \uc11c\ubc84 \uc624\ub958\ub9cc \uc2e4\ud328\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4. \ud074\ub77c\uc774\uc5b8\ud2b8 \uc624\ub958(4xx)\ub294 \ubb34\uc2dc\ub429\ub2c8\ub2e4.\ndef is_server_error(e: Exception) -&gt; bool:\n    if isinstance(e, httpx.HTTPStatusError):\n        return e.response.status_code &gt;= 500\n    return False\n\ncb = CircuitBreaker(\n    name=\"http_api\",\n    tracker=Custom(is_server_error),\n    ...\n)\n</code></pre>"},{"location":"ko/components/trackers/#operators","title":"\ub17c\ub9ac \uc5f0\uc0b0\uc790\ub85c Tracker \uc870\ud569","text":"<p>Tracker\ub294 \ub17c\ub9ac \uc5f0\uc0b0\uc790(&amp;, |, ~)\ub97c \uc9c0\uc6d0\ud558\uba70, \uc815\ud655\ud55c \uc2e4\ud328 \uac10\uc9c0 \uaddc\uce59\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/trackers/#and","title":"AND (<code>&amp;</code>)","text":"<p><code>&amp;</code> \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub450 \uc870\uac74\uc774 \ubaa8\ub450 \ucc38\uc778 \uacbd\uc6b0\uc5d0\ub9cc \uc77c\uce58\ud558\ub294 Tracker\ub97c \ub9cc\ub4ed\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\n\n# ConnectionError \uc608\uc678\uc774\uba74\uc11c \"timeout\"\uc774\ub77c\ub294 \ub2e8\uc5b4\ub97c \ud3ec\ud568\ud558\ub294 \uacbd\uc6b0\ub97c \ucd94\uc801\ud569\ub2c8\ub2e4.\ntracker = (\n    TypeOf(ConnectionError) &amp;\n    Custom(lambda e: \"timeout\" in str(e).lower())\n)\n</code></pre>"},{"location":"ko/components/trackers/#or","title":"OR (<code>|</code>)","text":"<p><code>|</code> \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc5b4\ub290 \ud55c \uc870\uac74\uc774 \ucc38\uc778 \uacbd\uc6b0\uc5d0 \uc77c\uce58\ud558\ub294 Tracker\ub97c \ub9cc\ub4ed\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trackers import TypeOf\n\n# ConnectionError \ub610\ub294 TimeoutError \uc911 \ud558\ub098\ub97c \ucd94\uc801\ud569\ub2c8\ub2e4.\ntracker = TypeOf(ConnectionError) | TypeOf(TimeoutError)\n\n# \uc774\ub294 TypeOf\uc5d0 \uc5ec\ub7ec \uc720\ud615\uc744 \uc9c1\uc811 \uc804\ub2ec\ud558\ub294 \uac83\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4.\ntracker = TypeOf(ConnectionError, TimeoutError)\n</code></pre>"},{"location":"ko/components/trackers/#not","title":"NOT (<code>~</code>)","text":"<p><code>~</code> \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc870\uac74\uc744 \ubc18\uc804\uc2dc\ucf1c \ud2b9\uc815 \uc624\ub958\ub97c \uc81c\uc678\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# 4xx \ud074\ub77c\uc774\uc5b8\ud2b8 \uc624\ub958\ub97c \ubb34\uc2dc\ud558\uace0, \ub2e4\ub978 \ubaa8\ub4e0 HTTPStatusError \uc608\uc678(\uc608: 5xx)\ub97c \ucd94\uc801\ud569\ub2c8\ub2e4.\nis_4xx_error = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and 400 &lt;= e.response.status_code &lt; 500)\ntracker = TypeOf(httpx.HTTPStatusError) &amp; ~is_4xx_error\n</code></pre>"},{"location":"ko/components/trackers/#_1","title":"\ubcf5\ud569 \uc608\uc81c","text":"<p>\uc774\ub7ec\ud55c \uc5f0\uc0b0\uc790\ub97c \uc870\ud569\ud558\uc5ec \uc815\uad50\ud55c \uaddc\uce59\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trackers import TypeOf, Custom\nimport httpx\n\n# \uc774 Tracker\ub294 \ub2e4\uc74c \uacbd\uc6b0\uc5d0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4.\n# 1. \ub124\ud2b8\uc6cc\ud06c \uc624\ub958(ConnectionError \ub610\ub294 TimeoutError)\uc774\uac70\ub098, \ub610\ub294\n# 2. 5xx \uc11c\ubc84 \uc624\ub958\uc774\uace0, \uadf8\ub9ac\uace0\n# 3. 401 Unauthorized \uc624\ub958\uac00 \uc544\ub2cc \uacbd\uc6b0(\uc774\uac83\uc740 \ub2e4\ub974\uac8c \ucc98\ub9ac\ud560 \uc218 \uc788\uc74c).\n\nnetwork_errors = TypeOf(ConnectionError, TimeoutError)\nserver_errors = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code &gt;= 500)\nis_auth_error = Custom(lambda e: isinstance(e, httpx.HTTPStatusError) and e.response.status_code == 401)\n\ntracker = (network_errors | server_errors) &amp; ~is_auth_error\n</code></pre>"},{"location":"ko/components/trackers/#tracker_1","title":"\uc62c\ubc14\ub978 Tracker \uc120\ud0dd","text":""},{"location":"ko/components/trackers/#comparison","title":"\ube44\uad50","text":"\uae30\ub2a5 All TypeOf Custom \ub2e8\uc21c\uc131 \ub9e4\uc6b0 \uac04\ub2e8 \uac04\ub2e8 \uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218 \ud544\uc694 \uc720\uc5f0\uc131 \ub0ae\uc74c \uc911\uac04 \ub192\uc74c \uc131\ub2a5 O(1) O(1) \ud568\uc218\uc5d0 \ub530\ub77c \ub2e4\ub984 \uc8fc\uc694 \uc6a9\ub3c4 \ubaa8\ub4e0 \uac83\uc744 \ucd94\uc801 \ud2b9\uc815 \uc720\ud615 \ucd94\uc801 \uc608\uc678 \ub0b4\uc6a9 \uac80\uc0ac"},{"location":"ko/components/trackers/#choose-all","title":"<code>All</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>All</code>\uc740 \ubaa8\ub4e0 \uc608\uc678\ub97c \uc2e4\ud328\ub85c \ucde8\uae09\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: \ubaa8\ub4e0 \uc624\ub958\uac00 \uc911\uc694\ud558\ub2e4\uace0 \uac04\uc8fc\ub418\ub294 \ub0b4\ubd80 \uc11c\ube44\uc2a4 \ubcf4\ud638.</li> </ul>"},{"location":"ko/components/trackers/#choose-typeof","title":"<code>TypeOf</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>TypeOf</code>\uc740 \uc678\ubd80 \uc11c\ube44\uc2a4\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \uc624\ub958 \uc720\ud615\uc744 \uc608\uc0c1\ud560 \uc218 \uc788\uc744 \ub54c \uc2e4\ud328\ub97c \ucd94\uc801\ud558\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc120\ud0dd\uc785\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: <code>TimeoutError</code> \ub610\ub294 <code>ConnectionError</code>\ub97c \uc608\uc0c1\ud558\ub294 \uc678\ubd80 API \ud638\ucd9c.</li> </ul>"},{"location":"ko/components/trackers/#choose-custom","title":"<code>Custom</code>\uc740 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>Custom</code>\uc740 \uc2e4\ud328 \uc5ec\ubd80\ub97c \uc0ac\uc6a9\uc790 \uc124\uc815\uc73c\ub85c \uc81c\uc5b4\ud558\uace0\uc790 \ud560 \ub54c \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <ul> <li>\uc0ac\uc6a9 \uc0ac\ub840: <code>httpx.HTTPStatusError</code>\uc758 \uc0c1\ud0dc \ucf54\ub4dc\ub97c \ud655\uc778\ud558\uc5ec \ud074\ub77c\uc774\uc5b8\ud2b8 \uc624\ub958(4xx)\uc640 \uc11c\ubc84 \uc624\ub958(5xx)\ub97c \uad6c\ubcc4\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/trackers/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Windows: \ud638\ucd9c \uae30\ub85d\uc774 \uc5b4\ub5bb\uac8c \uc800\uc7a5\ub418\ub294\uc9c0 \uc54c\uc544\ubcf4\uc138\uc694.</li> <li>Trippers: Tracker\uac00 \uc218\uc9d1\ud55c Metric\uc744 \uc0ac\uc6a9\ud558\uc5ec Trip \ub85c\uc9c1\uc744 \uad6c\ucd95\ud558\uc138\uc694.</li> </ul>"},{"location":"ko/components/trippers/","title":"Tripper","text":"<p>Tripper\ub294 Circuit Breaker\uc758 \uc0c1\ud0dc \uc804\ud658 \uc870\uac74\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4. <code>Window</code>\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Metric\uc744 \uae30\ubc18\uc73c\ub85c \ud68c\ub85c\uac00 \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud574\uc57c \ud558\ub294\uc9c0(\uc608: <code>CLOSED</code>\uc5d0\uc11c <code>OPEN</code>\uc73c\ub85c) \uacb0\uc815\ud569\ub2c8\ub2e4. \uac01 Tripper \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub17c\ub9ac \uc5f0\uc0b0\uc790(<code>&amp;</code>, <code>|</code>)\uc640 \uacb0\ud569\ud568\uc73c\ub85c\uc368, \ube0c\ub808\uc774\ucee4\uac00 \uc5b8\uc81c \ud2b8\ub9bd\ud574\uc57c \ud558\ub294\uc9c0\uc5d0 \ub300\ud55c \uaddc\uce59\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> Tripper \uc720\ud615 \uc870\uac74 \uc0ac\uc6a9 \uc0ac\ub840 Closed / HalfOpened \ud68c\ub85c\uac00 \ud2b9\uc815 \uc0c1\ud0dc\uc778\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \ud2b9\uc815 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc801\uc6a9\ub418\ub294 \uc870\uac74\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4. MinRequests \ud638\ucd9c \uc218\uac00 \ucd5c\uc18c\uac12\uc744 \ucd08\uacfc\ud558\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \ud1b5\uacc4\uc801\uc73c\ub85c \uc720\uc758\ubbf8\ud558\uc9c0 \uc54a\uc740 \uc801\uc740 \uc218\uc758 \ud638\ucd9c\ub85c \uc778\ud574 \ud2b8\ub9bd\ub418\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4. FailureRate \uc2e4\ud328\uc728\uc774 \ub108\ubb34 \ub192\uc740\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \uc624\ub958\uc728\uc774 \ud5c8\uc6a9\ud560 \uc218 \uc5c6\uc744 \uc815\ub3c4\ub85c \ub192\uc544\uc9c0\uba74 \ud2b8\ub9bd\ud569\ub2c8\ub2e4. AvgLatency \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc774 \ub108\ubb34 \ub290\ub9b0\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \uc804\ubc18\uc801\uc778 \uc131\ub2a5\uc774 \uc800\ud558\ub420 \ub54c \ud2b8\ub9bd\ud569\ub2c8\ub2e4. SlowRate \ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728\uc774 \ub108\ubb34 \ub192\uc740\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \ub290\ub9b0 \uc694\uccad\uc758 \ube44\uc728\uc744 \uae30\ubc18\uc73c\ub85c \ud2b8\ub9bd\ud569\ub2c8\ub2e4. FailureStreak \uc5f0\uc18d \uc2e4\ud328 \ud69f\uc218\ub97c \ud655\uc778\ud569\ub2c8\ub2e4. \ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \ub610\ub294 \uc11c\ube44\uc2a4 \uc804\uba74 \uc7a5\uc560 \uc2dc \ube60\ub974\uac8c \ud2b8\ub9bd\ud569\ub2c8\ub2e4."},{"location":"ko/components/trippers/#tripper_1","title":"\uc0c1\ud0dc \uae30\ubc18 Tripper","text":"<p>\uc774 Tripper\ub294 Circuit Breaker\uc758 \ud604\uc7ac \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uc5ec <code>CLOSED</code> \ub610\ub294 <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc801\uc6a9\ub418\ub294 \uaddc\uce59\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4.</p> <ul> <li><code>Closed()</code>: \ud68c\ub85c\uac00 <code>CLOSED</code> \uc0c1\ud0dc\uc77c \ub54c\ub9cc <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</li> <li><code>HalfOpened()</code>: \ud68c\ub85c\uac00 <code>HALF_OPEN</code> \uc0c1\ud0dc\uc77c \ub54c\ub9cc <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</li> </ul> <p>\uc774\ub4e4\uc740 \uac70\uc758 \ud56d\uc0c1 \ub2e4\ub978 \uc870\uac74\uc744 \ubc94\uc704 \uc9c0\uc815\ud558\uae30 \uc704\ud574 <code>&amp;</code> \uc5f0\uc0b0\uc790\uc640 \ud568\uaed8 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import Closed, HalfOpened, FailureRate\n\n# CLOSED \ubc0f HALF_OPEN \uc0c1\ud0dc\uc5d0 \ub300\ud574 \ub2e4\ub978 \uc2e4\ud328\uc728 \uc784\uacc4\uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\ntripper = (\n    (Closed() &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"ko/components/trippers/#tripper_2","title":"\uba54\ud2b8\ub9ad \uae30\ubc18 Tripper","text":"<p>\uc774 Tripper\ub294 <code>window</code>\uac00 \uc218\uc9d1\ud55c \uba54\ud2b8\ub9ad\uc744 \ud3c9\uac00\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/trippers/#minrequests","title":"MinRequests","text":"<p><code>MinRequests(count)</code>\ub294 Window\uac00 \ucd5c\uc18c\ud55c <code>count</code> \ud638\ucd9c\uc744 \uae30\ub85d\ud55c \ud6c4\uc5d0\ub9cc <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4. \uc774\ub294 \ud1b5\uacc4\uc801\uc73c\ub85c \uc911\uc694\ud558\uc9c0 \uc54a\uc740 \uc801\uc740 \uc218\uc758 \uc2e4\ud328(\uc608: 2\uac1c \ud638\ucd9c \uc911 1\uac1c \uc2e4\ud328\ub294 50% \uc2e4\ud328\uc728\uc774\uc9c0\ub9cc, \ud1b5\uacc4\uc801\uc73c\ub85c \ucda9\ubd84\ud55c \ub370\uc774\ud130\uac00 \uc544\ub2d8)\ub85c \uc778\ud574 \ube0c\ub808\uc774\ucee4\uac00 \ud2b8\ub9bd\ub418\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\ub294 \ub370 \ub9e4\uc6b0 \uc911\uc694\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# \ucd5c\uc18c 10\uac1c\uc758 \ud638\ucd9c\uc774 \uae30\ub85d\ub420 \ub54c\uae4c\uc9c0 \ube0c\ub808\uc774\ucee4\ub294 \ud2b8\ub9bd\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#failurerate","title":"FailureRate","text":"<p><code>FailureRate(rate)</code>\ub294 \uc2e4\ud328\ud55c \ud638\ucd9c \ub300 \ucd1d \ud638\ucd9c \uc218\uc758 \ube44\uc728\uc774 <code>rate</code>\ub97c \ucd08\uacfc\ud558\uba74(<code>0.5</code>\ub294 50%) <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import FailureRate\n\n# \ud638\ucd9c\uc758 50% \uc774\uc0c1\uc774 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ntripper = FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#avglatency","title":"AvgLatency","text":"<p><code>AvgLatency(seconds)</code>\ub294 Window \ub0b4 \ubaa8\ub4e0 \ud638\ucd9c\uc758 \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc774 <code>seconds</code>\ub97c \ucd08\uacfc\ud558\uba74 <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import AvgLatency\n\n# \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc774 2\ucd08\ub97c \ucd08\uacfc\ud558\uba74 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ntripper = AvgLatency(2.0)\n</code></pre>"},{"location":"ko/components/trippers/#slowrate","title":"SlowRate","text":"<p><code>SlowRate(rate)</code>\ub294 \ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728\uc774 <code>rate</code>\ub97c \ucd08\uacfc\ud558\uba74 <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4. \ud638\ucd9c \uc2dc\uac04\uc774 <code>CircuitBreaker</code>\uc758 <code>slow_threshold</code> \ub9e4\uac1c\ubcc0\uc218(\ucd08 \ub2e8\uc704)\ub97c \ucd08\uacfc\ud558\uba74 \"\ub290\ub9b0\" \ud638\ucd9c\ub85c \uac04\uc8fc\ub429\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.trippers import SlowRate\n\n# \ud638\ucd9c\uc758 30% \uc774\uc0c1\uc774 \"\ub290\ub9b0\" \uacbd\uc6b0 \ud2b8\ub9bd\ub429\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"api\",\n    tripper=SlowRate(0.3),\n    slow_threshold=1.0,  # 1\ucd08 \uc774\uc0c1 \uac78\ub9ac\ub294 \ud638\ucd9c\uc740 \ub290\ub9b0 \uac83\uc73c\ub85c \uac04\uc8fc\ub429\ub2c8\ub2e4.\n    ...\n)\n</code></pre>"},{"location":"ko/components/trippers/#failurestreak","title":"FailureStreak","text":"<p><code>FailureStreak(count)</code>\ub294 \uc5f0\uc18d \uc2e4\ud328 \ud69f\uc218\uac00 <code>count</code>\uc5d0 \ub3c4\ub2ec\ud558\uba74 <code>True</code>\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4. \ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \uc2dc \ub610\ub294 \uc678\ubd80 \uc11c\ube44\uc2a4\uac00 \uc644\uc804\ud788 \ub2e4\uc6b4\ub418\uc5c8\uc744 \ub54c \ube60\ub974\uac8c \uc7a5\uc560\ub97c \uac10\uc9c0\ud558\ub294 \ub370 \uc720\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import FailureStreak, MinRequests, FailureRate\n\n# 5\ud68c \uc5f0\uc18d \uc2e4\ud328 \ud6c4 \ud2b8\ub9bd\ntripper = FailureStreak(5)\n\n# FailureRate\uc640 \uacb0\ud569\ud558\uc5ec \uc885\ud569\uc801\uc778 \ubcf4\ud638:\n# - 5\ud68c \uc5f0\uc18d \uc2e4\ud328 \uc2dc \ube60\ub978 \ud2b8\ub9bd (\ucf5c\ub4dc \uc2a4\ud0c0\ud2b8 \ubcf4\ud638)\n# - \ub610\ub294 20\uac1c \uc694\uccad \ud6c4 50% \uc2e4\ud328\uc728 \uc2dc \ud1b5\uacc4\uc801 \ud2b8\ub9bd\ntripper = FailureStreak(5) | (MinRequests(20) &amp; FailureRate(0.5))\n</code></pre>"},{"location":"ko/components/trippers/#operators","title":"\ub17c\ub9ac \uc5f0\uc0b0\uc790\ub97c \uc774\uc6a9\ud55c Tripper \uacb0\ud569","text":"<p>\ub17c\ub9ac \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec Tripper\ub97c \uacb0\ud569\ud568\uc73c\ub85c\uc368 \uac15\ub825\ud558\uace0 \uc815\ubc00\ud55c \uaddc\uce59\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/trippers/#and","title":"AND (<code>&amp;</code>)","text":"<p><code>&amp;</code> \uc5f0\uc0b0\uc790\ub294 \ubaa8\ub4e0 \uc870\uac74\uc774 \ucc38\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4. Tripper\ub97c \uacb0\ud569\ud558\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \ubc29\ubc95\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# Window\uc5d0 \ucd5c\uc18c 10\uac1c\uc758 \uc694\uccad\uc774 \uc788\uace0 \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\ub294 \uacbd\uc6b0\uc5d0\ub9cc trip\ub429\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#or","title":"OR (<code>|</code>)","text":"<p><code>|</code> \uc5f0\uc0b0\uc790\ub294 \uc5b4\ub290 \ud558\ub098\ub77c\ub3c4 \uc870\uac74\uc774 \ucc38\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import FailureRate, SlowRate\n\n# \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\uac70\ub098 \ub290\ub9b0 \ud638\ucd9c \ube44\uc728\uc774 30%\ub97c \ucd08\uacfc\ud558\ub294 \uacbd\uc6b0 trip\ub429\ub2c8\ub2e4.\ntripper = FailureRate(0.5) | SlowRate(0.3)\n</code></pre>"},{"location":"ko/components/trippers/#_1","title":"\ubcf5\ud569 \uc608\uc81c","text":"<p>\ub2e4\uc74c\uc740 <code>CLOSED</code> \ubc0f <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0 \ub300\ud574 \ub2e4\ub978 \uaddc\uce59\uc744 \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import Closed, HalfOpened, MinRequests, FailureRate\n\n# - \uc0c1\ud0dc\uac00 CLOSED\uc774\uba74, \ucd5c\uc18c 10\uac1c\uc758 \uc694\uccad\uc774 \uc788\uace0 \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud560 \ub54c trip\ub429\ub2c8\ub2e4.\n# - \ub610\ub294 \uc0c1\ud0dc\uac00 HALF_OPEN\uc774\uba74, \ucd5c\uc18c 5\uac1c\uc758 \uc694\uccad\uc774 \uc788\uace0 \uc2e4\ud328\uc728\uc774 30%\ub97c \ucd08\uacfc\ud560 \ub54c trip\ub429\ub2c8\ub2e4.\ntripper = (\n    (Closed() &amp; MinRequests(10) &amp; FailureRate(0.5)) |\n    (HalfOpened() &amp; MinRequests(5) &amp; FailureRate(0.3))\n)\n</code></pre>"},{"location":"ko/components/trippers/#tripper_3","title":"\uc62c\ubc14\ub978 Tripper \uc120\ud0dd\ud558\uae30","text":""},{"location":"ko/components/trippers/#comparison","title":"\ube44\uad50","text":"\uae30\ub2a5 <code>Closed</code>/<code>HalfOpened</code> <code>MinRequests</code> <code>FailureRate</code> <code>AvgLatency</code> <code>SlowRate</code> <code>FailureStreak</code> \ubaa9\uc801 \ud2b9\uc815 \uc0c1\ud0dc\uc5d0 \uaddc\uce59 \uc801\uc6a9 \uc758\ubbf8 \uc788\ub294 \uc0d8\ud50c \ud06c\uae30 \ubcf4\uc7a5 \uc2e4\ud328\ud55c \ud638\ucd9c\uc758 \ube44\uc728 \ud655\uc778 \ud3c9\uade0 \uc131\ub2a5 \ud655\uc778 \ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728 \ud655\uc778 \uc5f0\uc18d \uc2e4\ud328 \uc2dc \ube60\ub978 \ud2b8\ub9bd \ub2e8\ub3c5 \uc0ac\uc6a9 X X O O O O"},{"location":"ko/components/trippers/#use-minrequests","title":"\ud56d\uc0c1 <code>MinRequests</code> \uc0ac\uc6a9\ud558\uae30","text":"<p>\uac15\ub825 \ucd94\ucc9c</p> <p>\uac70\uc758 \ubaa8\ub4e0 Tripper \uc870\ud569\uc5d0 <code>MinRequests</code>\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub294 \ud68c\ub85c\uac00 \ud1b5\uacc4\uc801\uc73c\ub85c \uc720\uc758\ubbf8\ud558\uc9c0 \uc54a\uc740 \uc801\uc740 \uc218\uc758 \ud638\ucd9c \uc0d8\ud50c\uc744 \uae30\ubc18\uc73c\ub85c \uc131\uae09\ud55c \uacb0\uc815\uc744 \ub0b4\ub9ac\ub294 \uac83\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4. Window \ud06c\uae30\uc758 10-20% \uc815\ub3c4\uc758 \uac12\uc774 \uc88b\uc740 \uc2dc\uc791\uc810\uc785\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate\n\n# CountWindow(size=100)\uc758 \uacbd\uc6b0, MinRequests\ub97c 10-20\uc73c\ub85c \uc124\uc815\ud558\ub294 \uac83\uc774 \ud569\ub9ac\uc801\uc785\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; FailureRate(0.5)\n</code></pre>"},{"location":"ko/components/trippers/#rate-vs-latency","title":"<code>FailureRate</code> vs. <code>AvgLatency</code> vs. <code>SlowRate</code>","text":"<ul> <li> <p>\uba85\uc2dc\uc801\uc778 \uc624\ub958(\uc608\uc678)\ub97c \uac00\uc7a5 \uc911\uc694\ud558\uac8c \uc0dd\uac01\ud55c\ub2e4\uba74 <code>FailureRate</code>\ub97c \uc120\ud0dd\ud558\uc138\uc694. \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uace0 \uc9c1\uad00\uc801\uc778 \uc120\ud0dd\uc785\ub2c8\ub2e4.</p> </li> <li> <p>\uc804\ubc18\uc801\uc778 \uc18d\ub3c4 \uc800\ud558\ub85c\ubd80\ud130 \ubcf4\ud638\ud558\uace0 \uc2f6\uc744 \ub54c\ub294 <code>AvgLatency</code>\ub97c \uc120\ud0dd\ud558\uc138\uc694. \uc8fc\uc758: \uba87 \uac1c\uc758 \ub9e4\uc6b0 \ub290\ub9b0 \ud638\ucd9c\uc774 \ud3c9\uade0\uc744 \uc65c\uace1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> </li> <li> <p>\uc774\uc0c1\uce58(outlier)\ub85c\ubd80\ud130 \ubcf4\ud638\ud558\uace0 \uc2f6\uc744 \ub54c\ub294 <code>SlowRate</code>\ub97c \uc120\ud0dd\ud558\uc138\uc694. \ub2e8 \ud558\ub098\uc758 \uadf9\ub3c4\ub85c \ub290\ub9b0 \ud638\ucd9c\uc5d0 \ub35c \ubbfc\uac10\ud558\uae30 \ub54c\ubb38\uc5d0 <code>AvgLatency</code>\ubcf4\ub2e4 \uc885\uc885 \ub354 \uacac\uace0\ud569\ub2c8\ub2e4. \uc774\ub294 \ud3c9\uade0\uc801\uc778 \ub290\ub9bc\uc774 \uc544\ub2cc, \ub290\ub9b0 \ud638\ucd9c\uc758 \ube44\uc728\uc744 \uce21\uc815\ud569\ub2c8\ub2e4.</p> </li> </ul>"},{"location":"ko/components/trippers/#combining-conditions","title":"\uc885\ud569\ud558\uae30","text":"<p>\uc77c\ubc18\uc801\uc73c\ub85c \uc5ec\ub7ec \uc870\uac74\uc744 \uacb0\ud569\ud558\uc5ec \uc0ac\uc6a9\ud558\uae30\ub97c \uad8c\uc7a5\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.trippers import MinRequests, FailureRate, SlowRate\n\n# \ucd5c\uc18c 10\uac1c\uc758 \ud638\ucd9c \uc774\ud6c4, \uc2e4\ud328\uc728\uc774 50%\ub97c \ucd08\uacfc\ud558\uac70\ub098 \ub290\ub9b0 \ud638\ucd9c \ube44\uc728\uc774 30%\ub97c \ucd08\uacfc\ud558\ub294 \uacbd\uc6b0 trip\ub429\ub2c8\ub2e4.\ntripper = MinRequests(10) &amp; (FailureRate(0.5) | SlowRate(0.3))\n</code></pre>"},{"location":"ko/components/trippers/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Retries: <code>OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ubcf5\uad6c\ud558\uae30 \uc704\ud55c \uc815\ucc45\uc744 \uc815\uc758\ud569\ub2c8\ub2e4.</li> <li>Permits: <code>HALF_OPEN</code> \uc0c1\ud0dc\uc5d0\uc11c \ubcf5\uad6c\ub97c \ud14c\uc2a4\ud2b8\ud558\ub294 \ubc29\ubc95\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/windows/","title":"Windows","text":"<p>Windows\ub294 Circuit Breaker\uc758 \uae30\uc5b5\uc785\ub2c8\ub2e4. \ucd5c\uadfc \ud638\ucd9c \uacb0\uacfc(\uc131\uacf5, \uc2e4\ud328, \uc751\ub2f5 \uc2dc\uac04 \ub4f1)\ub97c \uc800\uc7a5\ud558\uace0, <code>trippers</code>\uac00 \ud68c\ub85c\ub97c \uc5f4\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \ub370 \uc0ac\uc6a9\ud558\ub294 Metric\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>Fluxgate\ub294 \ub450 \uac00\uc9c0 \uc720\ud615\uc758 Window\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> Window \uc720\ud615 \ucd94\uc801 \ubc29\uc2dd \uc801\ud569\ud55c \uacbd\uc6b0... CountWindow \ub9c8\uc9c0\ub9c9 N\uac1c \ud638\ucd9c \uc548\uc815\uc801\uc778 \ud2b8\ub798\ud53d\uc744 \ucc98\ub9ac\ud558\uba70, \uace0\uc815\ub41c \uc218\uc758 \ucd5c\uadfc \uc791\uc5c5\uc744 \ud3c9\uac00\ud558\ub824\ub294 \uc11c\ube44\uc2a4\uc5d0 \uc801\ud569\ud569\ub2c8\ub2e4. TimeWindow \ub9c8\uc9c0\ub9c9 N\ucd08 \uac00\ubcc0\uc801\uc774\uac70\ub098 \ud3ed\uc8fc\ud558\ub294 \ud2b8\ub798\ud53d\uc744 \ucc98\ub9ac\ud558\uba70, \uc2dc\uac04 \uae30\ubc18 \ud3c9\uac00\uac00 \ub354 \uc758\ubbf8 \uc788\ub294 \uc11c\ube44\uc2a4\uc5d0 \uc801\ud569\ud569\ub2c8\ub2e4."},{"location":"ko/components/windows/#countwindow","title":"CountWindow","text":"<p><code>CountWindow</code>\ub294 \uac00\uc7a5 \ucd5c\uadfc N\uac1c\uc758 \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4. \uc548\uc815\uc801\uc774\uace0 \uc608\uce21 \uac00\ub2a5\ud55c \ud2b8\ub798\ud53d \ud328\ud134\uc744 \uac00\uc9c4 \uc11c\ube44\uc2a4\uc5d0 \ud6cc\ub96d\ud55c \uc120\ud0dd\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#countwindow-how-it-works","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p>\uba54\ubaa8\ub9ac\uc5d0 \uace0\uc815 \ud06c\uae30\uc758 \uc6d0\ud615 \ubc84\ud37c\ub97c \uc720\uc9c0\ud569\ub2c8\ub2e4. \uc0c8 \ud638\ucd9c\uc774 \uae30\ub85d\ub420 \ub54c, Window\uac00 \uac00\ub4dd \ucc3c\uc73c\uba74 \uac00\uc7a5 \uc624\ub798\ub41c \ud638\ucd9c\uc744 \ub36e\uc5b4\uc501\ub2c8\ub2e4. \uc774\ub294 Window\uac00 \ud56d\uc0c1 \uc815\ud655\ud788 \ub9c8\uc9c0\ub9c9 N\uac1c\uc758 \ud638\ucd9c\uc744 \ud3ec\ud568\ud558\ub3c4\ub85d \ubcf4\uc7a5\ud558\uc5ec \uc77c\uad00\ub41c \ud3c9\uac00 \ubcfc\ub968\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#countwindow-basic","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import CountWindow\n\n# \uc774 \ube0c\ub808\uc774\ucee4\ub294 \ub9c8\uc9c0\ub9c9 100\uac1c \ud638\ucd9c\uc744 \uae30\uc900\uc73c\ub85c \uacb0\uc815\uc744 \ub0b4\ub9bd\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"stable_api\",\n    window=CountWindow(size=100),\n    ...\n)\n</code></pre>"},{"location":"ko/components/windows/#timewindow","title":"TimeWindow","text":"<p><code>TimeWindow</code>\ub294 \ub9c8\uc9c0\ub9c9 N\ucd08 \ub3d9\uc548 \ubc1c\uc0dd\ud55c \ud638\ucd9c\uc744 \ucd94\uc801\ud569\ub2c8\ub2e4. \ud638\ucd9c \ud69f\uc218\ubcf4\ub2e4 \uc2dc\uac04 \uae30\ubc18 \uad00\uc810\uc774 \ub354 \uc911\uc694\ud55c \ubd88\uaddc\uce59\ud558\uac70\ub098 \ud3ed\uc8fc\ud558\ub294 \ud2b8\ub798\ud53d\uc744 \uac00\uc9c4 \uc11c\ube44\uc2a4\uc5d0 \uc774\uc0c1\uc801\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#timewindow-how-it-works","title":"\uc791\ub3d9 \ubc29\uc2dd","text":"<p>\uc2dc\uac04\uc744 1\ucd08 \ub2e8\uc704\uc758 \ubc84\ud0b7\uc73c\ub85c \ub098\ub215\ub2c8\ub2e4. \ud638\ucd9c\uc774 \uae30\ub85d\ub420 \ub54c \ud574\ub2f9 \uacb0\uacfc\ub294 \ud604\uc7ac \ud0c0\uc784\uc2a4\ud0ec\ud504\uc5d0 \ud574\ub2f9\ud558\ub294 \ubc84\ud0b7\uc5d0 \uc9d1\uacc4\ub429\ub2c8\ub2e4. \uc2dc\uac04 Window\ub97c \ubc97\uc5b4\ub098\ub294 \uc624\ub798\ub41c \ubc84\ud0b7\uc740 \uc790\ub3d9\uc73c\ub85c \ub9cc\ub8cc\ub418\uace0 \uc7ac\uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#timewindow-basic","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.windows import TimeWindow\n\n# \uc774 \ube0c\ub808\uc774\ucee4\ub294 \ub9c8\uc9c0\ub9c9 60\ucd08 \ub3d9\uc548 \ubc1c\uc0dd\ud55c \ud638\ucd9c\uc744 \uae30\uc900\uc73c\ub85c \uacb0\uc815\uc744 \ub0b4\ub9bd\ub2c8\ub2e4.\ncb = CircuitBreaker(\n    name=\"variable_traffic_api\",\n    window=TimeWindow(size=60),\n    ...\n)\n</code></pre>"},{"location":"ko/components/windows/#window","title":"Window \uc120\ud0dd","text":""},{"location":"ko/components/windows/#comparison","title":"\ube44\uad50","text":"\uae30\ub2a5 CountWindow TimeWindow \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ud638\ucd9c \uc218(size)\uc5d0 \ube44\ub840\ud569\ub2c8\ub2e4. \ucd08 \ub2e8\uc704(size)\uc758 \uc2dc\uac04\uc5d0 \ube44\ub840\ud569\ub2c8\ub2e4. \ud2b8\ub798\ud53d \uc2a4\ud30c\uc774\ud06c \uc624\ub798\ub41c \ub370\uc774\ud130\uac00 \ube60\ub974\uac8c \ubc00\ub824\ub0a0 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc804\uccb4 \uae30\uac04 \ub3d9\uc548 \ub370\uc774\ud130\ub97c \uc720\uc9c0\ud558\uc5ec \ud3ed\uc8fc\ub97c \uc644\ud654\ud569\ub2c8\ub2e4. \ub0ae\uc740 \ud2b8\ub798\ud53d \uc804\uccb4 Metric \uc138\ud2b8\ub97c \ub354 \ube68\ub9ac \uc218\uc9d1\ud569\ub2c8\ub2e4. \uc758\ubbf8 \uc788\ub294 \ub370\uc774\ud130\ub97c \uc218\uc9d1\ud558\ub294 \ub370 \ub354 \uc624\ub798 \uac78\ub9b4 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud3c9\uac00 \uae30\uc900 \uace0\uc815\ub41c \uc218\uc758 \ud638\ucd9c \uace0\uc815\ub41c \uc2dc\uac04 \uc138\ubd84\uc131 \ud638\ucd9c\ub2f9 \ucd08\ub2f9"},{"location":"ko/components/windows/#choose-countwindow","title":"<code>CountWindow</code>\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>CountWindow</code>\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uacbd\uc6b0\uc5d0 \ud6cc\ub96d\ud55c \uc120\ud0dd\uc785\ub2c8\ub2e4.</p> <ul> <li>\uc548\uc815\uc801\uc774\uace0 \uc608\uce21 \uac00\ub2a5\ud55c \ud2b8\ub798\ud53d: \ud638\ucd9c \ube48\ub3c4\uac00 \ud06c\uac8c \ubcc0\ub3d9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</li> <li>\uba54\ubaa8\ub9ac \ud6a8\uc728\uc131 \ud544\uc694: \uc885\uc885 \ub3d9\uc77c\ud55c \ubc94\uc704\uc5d0\uc11c <code>TimeWindow</code>\ubcf4\ub2e4 \uc801\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</li> <li>\ube60\ub978 \ud3c9\uac00 \ud544\uc694: \ube60\ub974\uac8c \ucc44\uc6cc\uc838 \uc758\ubbf8 \uc788\ub294 Metric\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <p>\uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \uc0ac\ub840: \ub0b4\ubd80 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uac04 \ud1b5\uc2e0, \ubc31\uadf8\ub77c\uc6b4\ub4dc \ucc98\ub9ac \ub610\ub294 \ubc30\uce58 \uc791\uc5c5.</p>"},{"location":"ko/components/windows/#choose-timewindow","title":"<code>TimeWindow</code>\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud574\uc57c \ud558\ub098\uc694?","text":"<p><code>TimeWindow</code>\ub294 \uc77c\ubc18\uc801\uc73c\ub85c \uad8c\uc7a5\ub418\uba70, \ud2b9\ud788 \ub2e4\uc74c\uacfc \uac19\uc740 \uacbd\uc6b0\uc5d0 \ub354 \uc548\uc804\ud55c \uae30\ubcf8 \uc120\ud0dd\uc785\ub2c8\ub2e4.</p> <ul> <li>\ubd88\uaddc\uce59\ud558\uac70\ub098 \ud3ed\uc8fc\ud558\ub294 \ud2b8\ub798\ud53d: \uac11\uc791\uc2a4\ub7ec\uc6b4 \ud2b8\ub798\ud53d \uae09\uc99d\uc744 \uc720\uc5f0\ud558\uac8c \ucc98\ub9ac\ud569\ub2c8\ub2e4.</li> <li>\uc2dc\uac04 \uae30\ubc18 \uc815\ucc45 \ud544\uc694: SLO\ub294 \uc2dc\uac04(\uc608: \"\ubaa8\ub4e0 5\ubd84 Window\uc5d0\uc11c 99.9% \uac00\ub3d9 \uc2dc\uac04\")\uc744 \uae30\uc900\uc73c\ub85c \uc815\uc758\ub420 \uac00\ub2a5\uc131\uc774 \ub192\uc2b5\ub2c8\ub2e4.</li> <li>\uc2e4\uc2dc\uac04 \uc751\ub2f5\uc131\uc5d0 \uc911\uc810: \ud638\ucd9c \ubcfc\ub968\uc5d0 \uad00\uacc4\uc5c6\uc774 \ud56d\uc0c1 \ucd5c\uadfc \uae30\uac04\uc758 \uacb0\uc815\uc5d0 \uae30\ubc18\ud569\ub2c8\ub2e4.</li> </ul> <p>\uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \uc0ac\ub840: \uacf5\uac1c API, \uc0ac\uc6a9\uc790 \ub300\uba74 \uc11c\ube44\uc2a4 \ub610\ub294 \ubd88\uc548\uc815\ud55c \uc678\ubd80 \uc11c\ube44\uc2a4 \ud638\ucd9c.</p>"},{"location":"ko/components/windows/#metric","title":"Metric","text":"<p>\ub450 Window \uc720\ud615 \ubaa8\ub450 <code>trippers</code>\uc5d0 \ub300\ud574 \ub3d9\uc77c\ud55c Metric\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.windows import CountWindow\nfrom fluxgate.metric import Record\n\nwindow = CountWindow(size=100)\n\n# \uc218\ub3d9\uc73c\ub85c \ud638\ucd9c \uae30\ub85d\nwindow.record(Record(success=True, duration=0.5))\nwindow.record(Record(success=False, duration=1.2))\n\n# \uc9d1\uacc4\ub41c Metric \uac1d\uccb4 \uac00\uc838\uc624\uae30\nmetric = window.get_metric()\nprint(f\"Total calls: {metric.total_count}\")\nprint(f\"Failed calls: {metric.failure_count}\")\nprint(f\"Average duration: {metric.avg_duration}\")\n</code></pre>"},{"location":"ko/components/windows/#_1","title":"\ud544\ub4dc \uc18d\uc131","text":"<ul> <li><code>total_count</code>: Window\uc5d0 \uae30\ub85d\ub41c \ucd1d \ud638\ucd9c \uc218.</li> <li><code>failure_count</code>: \uc2e4\ud328\ub85c \ucd94\uc801\ub41c \ud638\ucd9c \uc218.</li> <li><code>total_duration</code>: \ubaa8\ub4e0 \ud638\ucd9c\uc758 \uc9c0\uc18d \uc2dc\uac04 \ud569\uacc4.</li> <li><code>slow_count</code>: <code>slow_threshold</code>\ub97c \ucd08\uacfc\ud55c \ud638\ucd9c \uc218.</li> <li><code>avg_duration</code>: \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04 (<code>total_duration / total_count</code>).</li> <li><code>failure_rate</code>: \uc2e4\ud328 \ud638\ucd9c \ube44\uc728 (<code>failure_count / total_count</code>).</li> <li><code>slow_rate</code>: \ub290\ub9b0 \ud638\ucd9c \ube44\uc728 (<code>slow_count / total_count</code>).</li> </ul> <p><code>avg_duration</code>, <code>failure_rate</code>, <code>slow_rate</code>\ub294 total_count\uac00 0\uc77c \uacbd\uc6b0 None\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#auto-reset","title":"\uc790\ub3d9 \ub9ac\uc14b","text":"<p>Circuit Breaker\uc758 \uc0c1\ud0dc\uac00 \uc804\ud658\ub420 \ub54c(\uc608: <code>OPEN</code> \u2192 <code>HALF_OPEN</code> \ub610\ub294 <code>HALF_OPEN</code> \u2192 <code>CLOSED</code>) Window\ub294 \uc790\ub3d9\uc73c\ub85c Metric\uc744 \uc9c0\uc6c1\ub2c8\ub2e4. \uc774\ub294 \uac01 \ubcf5\uad6c \uc2dc\ub3c4\uc640 \uac01 \uc0c8\ub85c\uc6b4 <code>CLOSED</code> \uae30\uac04\uc774 \uae68\ub057\ud55c \uc0c1\ud0dc\ub85c \uc2dc\uc791\ub418\ub3c4\ub85d \ubcf4\uc7a5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/windows/#performance","title":"\uc131\ub2a5 \uace0\ub824 \uc0ac\ud56d","text":"\uc791\uc5c5 CountWindow TimeWindow \uba54\ubaa8\ub9ac N\uc740 <code>size</code>\uc778 O(N) N\uc740 <code>size</code>\uc778 O(N) <code>record()</code> O(1) O(1) <code>get_metric()</code> O(1) O(1)"},{"location":"ko/components/windows/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>Trackers: \uc2e4\ud328\ub85c \uac04\uc8fc\ub418\ub294 \uc694\uc18c\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.</li> <li>Trippers: \uc774 Metric\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud2b8\ub9bd \ub85c\uc9c1\uc744 \uad6c\ucd95\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/","title":"Listener","text":"<p>Listener\ub294 Circuit Breaker \uc0c1\ud0dc \uc804\ud658\uc744 \uac10\uc9c0\ud558\uace0 \uc678\ubd80 \uc2dc\uc2a4\ud15c\uc5d0 \uc54c\ub9bc\uc744 \ubcf4\ub0c5\ub2c8\ub2e4.</p> <pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(\n    name=\"api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n    ],\n)\n</code></pre>"},{"location":"ko/components/listeners/#signal","title":"Signal","text":"<p>Listener\ub294 \uc0c1\ud0dc \uc804\ud658 \uc2dc <code>Signal</code> \uac1d\uccb4\ub97c \ubc1b\uc2b5\ub2c8\ub2e4.</p> <pre><code>from dataclasses import dataclass\nfrom fluxgate.state import StateEnum\n\n@dataclass(frozen=True)\nclass Signal:\n    circuit_name: str     # Circuit Breaker \uc774\ub984\n    old_state: StateEnum  # \uc774\uc804 \uc0c1\ud0dc\n    new_state: StateEnum  # \uc0c8 \uc0c1\ud0dc\n    timestamp: float      # \uc804\ud658 \uc2dc\uac04 (Unix \ud0c0\uc784\uc2a4\ud0ec\ud504)\n</code></pre>"},{"location":"ko/components/listeners/#sync-vs-async","title":"\ub3d9\uae30 vs \ube44\ub3d9\uae30","text":""},{"location":"ko/components/listeners/#listener-ilistener","title":"\ub3d9\uae30 Listener (IListener)","text":"<p><code>CircuitBreaker</code> \ubc0f <code>AsyncCircuitBreaker</code> \ubaa8\ub450\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass CustomListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        print(f\"{signal.circuit_name}: {signal.old_state} \u2192 {signal.new_state}\")\n</code></pre> <p>\uc8fc\uc758</p> <p><code>AsyncCircuitBreaker</code>\uc640 \ud568\uaed8 \ub3d9\uae30 Listener\ub97c \uc0ac\uc6a9\ud560 \ub54c, \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \ucc28\ub2e8\ud558\ub294 \ube14\ub85c\ud0b9 I/O \uc791\uc5c5(\ub124\ud2b8\uc6cc\ud06c \ud638\ucd9c \ub4f1)\uc744 \ud53c\ud558\uc2ed\uc2dc\uc624. I/O\uac00 \ud544\uc694\ud55c \uc791\uc5c5\uc5d0\ub294 <code>IAsyncListener</code>\ub97c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/components/listeners/#listener-iasynclistener","title":"\ube44\ub3d9\uae30 Listener (IAsyncListener)","text":"<p><code>AsyncCircuitBreaker</code>\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass CustomAsyncListener(IAsyncListener):\n    async def __call__(self, signal: Signal) -&gt; None:\n        await send_notification(signal)\n</code></pre>"},{"location":"ko/components/listeners/#available-listeners","title":"\uc0ac\uc6a9 \uac00\ub2a5\ud55c Listener","text":""},{"location":"ko/components/listeners/#loglistener","title":"LogListener","text":"<p>Python\uc758 \ud45c\uc900 <code>logging</code> \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uc5ec Circuit Breaker \uc0c1\ud0dc \uc804\ud658\uc744 \ub85c\uae45\ud569\ub2c8\ub2e4.</p> <pre><code>from fluxgate.listeners.log import LogListener\n\ncb = CircuitBreaker(..., listeners=[LogListener()])\n</code></pre>"},{"location":"ko/components/listeners/#prometheuslistener","title":"PrometheusListener","text":"<p>\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uacfc\uc758 \ud1b5\ud569\uc744 \uc704\ud574 Prometheus Metric\uc744 \uc218\uc9d1\ud569\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre> <pre><code>from fluxgate.listeners.prometheus import PrometheusListener\n\ncb = CircuitBreaker(..., listeners=[PrometheusListener()])\n</code></pre>"},{"location":"ko/components/listeners/#slacklistener-asyncslacklistener","title":"SlackListener / AsyncSlackListener","text":"<p>Circuit Breaker \uc0c1\ud0dc \uc804\ud658 \uc54c\ub9bc\uc744 Slack \ucc44\ub110\ub85c \ubcf4\ub0c5\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[slack]\n</code></pre> <pre><code>from fluxgate.listeners.slack import SlackListener, AsyncSlackListener\n\n# \ub3d9\uae30\nsync_cb = CircuitBreaker(..., listeners=[\n    SlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n\n# \ube44\ub3d9\uae30\nasync_cb = AsyncCircuitBreaker(..., listeners=[\n    AsyncSlackListener(channel=\"C1234567890\", token=\"xoxb-...\")\n])\n</code></pre>"},{"location":"ko/components/listeners/#custom-listeners","title":"\ucee4\uc2a4\ud140 Listener","text":""},{"location":"ko/components/listeners/#listener_1","title":"\ub3d9\uae30 Listener","text":"<pre><code>from fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\nclass DatabaseListener(IListener):\n    def __init__(self, db_connection):\n        self.db = db_connection\n\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            self.db.execute(\n                \"INSERT INTO circuit_events (name, timestamp) VALUES (?, ?)\",\n                (signal.circuit_name, signal.timestamp)\n            )\n</code></pre>"},{"location":"ko/components/listeners/#listener_2","title":"\ube44\ub3d9\uae30 Listener","text":"<pre><code>import httpx\nfrom fluxgate.interfaces import IAsyncListener\nfrom fluxgate.signal import Signal\n\nclass WebhookListener(IAsyncListener):\n    def __init__(self, webhook_url: str):\n        self.url = webhook_url\n        self.client = httpx.AsyncClient()\n\n    async def __call__(self, signal: Signal) -&gt; None:\n        payload = {\n            \"circuit\": signal.circuit_name,\n            \"transition\": f\"{signal.old_state.value} -&gt; {signal.new_state.value}\",\n            \"timestamp\": signal.timestamp,\n        }\n        await self.client.post(self.url, json=payload)\n</code></pre>"},{"location":"ko/components/listeners/#error-handling","title":"\uc5d0\ub7ec \ucc98\ub9ac","text":"<p>Listener\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \uc608\uc678\ub294 Circuit Breaker \ub3d9\uc791\uc5d0 \uc601\ud5a5\uc744 \ubbf8\uce58\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc608\uc678\ub294 \ub85c\uae45\ub418\uba70 Circuit Breaker\ub294 \uc815\uc0c1\uc801\uc73c\ub85c \uacc4\uc18d \uc791\ub3d9\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/#combining-listeners","title":"\uc5ec\ub7ec Listener \uc870\ud569","text":"<pre><code>from fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.listeners.prometheus import PrometheusListener\nfrom fluxgate.listeners.slack import SlackListener\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[\n        LogListener(),\n        PrometheusListener(),\n        SlackListener(channel=\"C1234567890\", token=\"xoxb-...\"),\n    ],\n)\n</code></pre>"},{"location":"ko/components/listeners/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>LogListener - \ub85c\uae45 \uad6c\uc131</li> <li>PrometheusListener - Prometheus \ud1b5\ud569</li> <li>SlackListener - Slack \uc54c\ub9bc \uc124\uc815</li> <li>\uac1c\uc694 - Listener \uac1c\uc694\ub85c \ub3cc\uc544\uac00\uae30</li> </ul>"},{"location":"ko/components/listeners/logging/","title":"LogListener","text":"<p><code>LogListener</code>\ub294 Circuit Breaker\uc758 \ub3d9\uc791\uc744 \uad00\ucc30\ud558\ub294 \uac00\uc7a5 \uac04\ub2e8\ud55c \ubc29\ubc95\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4. Python\uc758 \ud45c\uc900 <code>logging</code> \ubaa8\ub4c8\uc5d0 \uc5f0\uacb0\ud558\uc5ec \uc0c1\ud0dc \uc804\ud658\uc744 \uae30\ub85d\ud558\uba70, \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uac00 \uc5b4\ub5bb\uac8c \uc791\ub3d9\ud558\ub294\uc9c0\uc5d0 \ub300\ud55c \uba85\ud655\ud558\uace0 \uc2dc\uac04\uc21c\uc73c\ub85c \ub41c \ubcf4\uae30\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p><code>CircuitBreaker</code> \ubc0f <code>AsyncCircuitBreaker</code> \uc5d0\uc11c \ud65c\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/logging/#usage","title":"\uae30\ubcf8 \uc0ac\uc6a9\ubc95","text":"<p><code>LogListener</code>\ub97c Circuit Breaker\uc758 <code>listeners</code> \ubaa9\ub85d\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# \ucf58\uc194 \ub85c\uae45\uc744 \uc704\ud55c \uae30\ubcf8 \uc124\uc815\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener()],\n)\n</code></pre> <p>Circuit Breaker\uac00 \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ub85c\uadf8 \ub808\ucf54\ub4dc\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <pre><code>[2025-01-15 10:30:45] Circuit Breaker 'payment_api' transitioned from CLOSED to OPEN\n[2025-01-15 10:31:45] Circuit Breaker 'payment_api' transitioned from OPEN to HALF_OPEN\n[2025-01-15 10:31:50] Circuit Breaker 'payment_api' transitioned from HALF_OPEN to CLOSED\n</code></pre>"},{"location":"ko/components/listeners/logging/#custom-logger","title":"\ucee4\uc2a4\ud140 Logger","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c <code>LogListener</code>\ub294 \ub8e8\ud2b8 logger\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \ub85c\uadf8 \ub77c\uc6b0\ud305\uacfc \ud3ec\ub9f7\ud305\uc744 \ub354 \uc138\ubc00\ud558\uac8c \uc81c\uc5b4\ud558\ub824\uba74 \uc9c1\uc811 logger\ub97c \uc8fc\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# Circuit Breaker \uc774\ubca4\ud2b8 \uc804\uc6a9 logger \uc0dd\uc131\ncb_logger = logging.getLogger(\"myapp.circuit_breaker\")\ncb_logger.setLevel(logging.INFO)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener(logger=cb_logger)],\n)\n</code></pre>"},{"location":"ko/components/listeners/logging/#custom-log-levels","title":"\ucee4\uc2a4\ud140 \ub85c\uadf8 \ub808\ubca8","text":"<p><code>level_map</code>\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac01 \uc0c1\ud0dc \uc804\ud658\uc5d0 \ub300\ud55c \ub85c\uadf8 \ub808\ubca8\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c <code>OPEN</code>\uacfc <code>FORCED_OPEN</code>\uc73c\ub85c\uc758 \uc804\ud658\uc740 <code>WARNING</code> \ub808\ubca8\ub85c, \ub098\uba38\uc9c0\ub294 <code>INFO</code> \ub808\ubca8\ub85c \uae30\ub85d\ub429\ub2c8\ub2e4.</p> <pre><code>import logging\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\nfrom fluxgate.state import StateEnum\n\n# OPEN \uc804\ud658\uc744 ERROR\ub85c \uae30\ub85d\ud558\uc5ec \uc54c\ub9bc \ud2b8\ub9ac\uac70\nlevel_map = {\n    StateEnum.OPEN: logging.ERROR,\n    StateEnum.HALF_OPEN: logging.WARNING,\n    StateEnum.CLOSED: logging.DEBUG,\n}\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[LogListener(level_map=level_map)],\n)\n</code></pre> <p>\ub450 \uc635\uc158\uc744 \ud568\uaed8 \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>cb_logger = logging.getLogger(\"myapp.circuit_breaker\")\nlistener = LogListener(logger=cb_logger, level_map=level_map)\n</code></pre>"},{"location":"ko/components/listeners/logging/#structured-logging","title":"\uad6c\uc870\ud654\ub41c (JSON) \ub85c\uae45 \uad6c\ud604","text":"<p>\ucd5c\uc2e0 \ud50c\ub7ab\ud3fc\uc5d0\uc11c \ub354 \ub098\uc740 \uac00\uc2dc\uc131\uc744 \uc704\ud574 JSON\uacfc \uac19\uc740 \uad6c\uc870\ud654\ub41c \ud615\uc2dd\uc73c\ub85c \ub85c\uadf8\ub97c \ucd9c\ub825\ud558\ub294 \uc0ac\uc6a9\uc790 \uc815\uc758 Listener\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>import json\nimport logging\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\n\nclass JsonLogListener(IListener):\n    def __init__(self, logger):\n        self.logger = logger\n\n    def __call__(self, signal: Signal) -&gt; None:\n        log_data = {\n            \"message\": \"Circuit breaker transition\",\n            \"circuit_name\": signal.circuit_name,\n            \"previous_state\": signal.old_state.value,\n            \"current_state\": signal.new_state.value,\n            \"timestamp_utc\": signal.timestamp,\n        }\n        self.logger.info(json.dumps(log_data))\n\n# \uc0ac\uc6a9\njson_logger = logging.getLogger(\"json_logger\")\ncb_listener = JsonLogListener(json_logger)\n</code></pre>"},{"location":"ko/components/listeners/logging/#file-logging","title":"\ud30c\uc77c \ub85c\uae45 \uad6c\uc131","text":"<p>Circuit Breaker \ub85c\uadf8\ub97c \ud30c\uc77c\ub85c \ubcf4\ub0b4\ub824\uba74 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ub85c\uae45 \uc124\uc815\uc5d0\uc11c \uc801\uc808\ud55c \ud578\ub4e4\ub7ec\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4. <code>LogListener</code>\ub294 \uc774 \uad6c\uc131\uc744 \uc790\ub3d9\uc73c\ub85c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>import logging\nfrom logging.handlers import RotatingFileHandler\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.log import LogListener\n\n# \ub85c\ud14c\uc774\ud305 \ud30c\uc77c \ud578\ub4e4\ub7ec \uad6c\uc131\nhandler = RotatingFileHandler(\n    filename='circuit_breaker.log',\n    maxBytes=10*1024*1024,  # 10MB\n    backupCount=5,\n)\nhandler.setFormatter(logging.Formatter(\n    '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n))\n\n# \ub8e8\ud2b8 \ub85c\uac70\uc5d0 \ud578\ub4e4\ub7ec \ucd94\uac00\nroot_logger = logging.getLogger()\nroot_logger.addHandler(handler)\nroot_logger.setLevel(logging.INFO)\n\n# LogListener\ub294 \uc774\uc81c \ub8e8\ud2b8 \ub85c\uac70\ub97c \ud1b5\ud574 \ud30c\uc77c\uc5d0 \uae30\ub85d\ud569\ub2c8\ub2e4.\nlog_listener = LogListener()\n</code></pre>"},{"location":"ko/components/listeners/logging/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>PrometheusListener: \uc2dc\uacc4\uc5f4 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud55c \uba54\ud2b8\ub9ad \ub178\ucd9c.</li> <li>SlackListener: \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc54c\ub9bc \uc804\uc1a1.</li> <li>Listener \uac1c\uc694: \uba54\uc778 Listener \ud398\uc774\uc9c0\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/prometheus/","title":"PrometheusListener","text":"<p><code>PrometheusListener</code>\ub294 Circuit Breaker\uc758 \uc0c1\ud0dc\uc640 \uc804\ud658\uc744 Prometheus \uc11c\ubc84\uc5d0\uc11c \uc2a4\ud06c\ub7a9\ud560 \uc218 \uc788\ub294 \uba54\ud2b8\ub9ad\uc73c\ub85c \ub0b4\ubcf4\ub0c5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ub300\uc2dc\ubcf4\ub4dc\ub97c \uad6c\ucd95\ud558\uace0, \uc54c\ub9bc\uc744 \uc0dd\uc131\ud558\uba70, \uc2dc\uac04\uc774 \uc9c0\ub0a8\uc5d0 \ub530\ub77c \uc11c\ube44\uc2a4\uc758 \uc548\uc815\uc131\uc5d0 \ub300\ud55c \uae4a\uc740 \ud1b5\ucc30\ub825\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/prometheus/#installation","title":"\uc124\uce58","text":"<p>\uc774 Listener\ub294 <code>prometheus-client</code> \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc74c \uba85\ub839\uc5b4\ub85c \ucd94\uac00 \uc124\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[prometheus]\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#metrics","title":"\ub178\ucd9c\ub418\ub294 \uba54\ud2b8\ub9ad","text":"<p>\ub450 \uac00\uc9c0 \ud575\uc2ec \uba54\ud2b8\ub9ad\uc744 \ub0b4\ubcf4\ub0c5\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/prometheus/#circuit_breaker_state-gauge","title":"<code>circuit_breaker_state</code> (Gauge)","text":"<p>\uc774 \uba54\ud2b8\ub9ad\uc740 Circuit Breaker\uc758 \ud604\uc7ac \uc0c1\ud0dc\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4. Gauge\uc774\ubbc0\ub85c \uac12\uc774 \uc624\ub974\uac70\ub098 \ub0b4\ub9b4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ub77c\ubca8:</p> <ul> <li><code>circuit_name</code>: Circuit Breaker\uc758 \uc774\ub984.</li> <li><code>state</code>: \uc0c1\ud0dc\uc758 \uc774\ub984 (<code>closed</code>, <code>open</code>, <code>half_open</code> \ub4f1).</li> </ul> <p>\uac12:</p> <ul> <li><code>1</code>: Circuit\uc774 \ud604\uc7ac \uc774 \uc0c1\ud0dc\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.</li> <li><code>0</code>: Circuit\uc774 \uc774 \uc0c1\ud0dc\uc5d0 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</li> </ul> <p>PromQL \uc0ac\uc6a9 \uc608\uc2dc:</p> <ul> <li> <p>\ubaa8\ub4e0 \uc5f4\ub9b0 Circuit \ucc3e\uae30:</p> <pre><code>circuit_breaker_state{state=\"open\"} == 1\n</code></pre> </li> <li> <p>\uac01 \uc0c1\ud0dc\uc5d0 \uc788\ub294 Circuit\uc758 \uc218 \uacc4\uc0b0:</p> <pre><code>sum(circuit_breaker_state) by (state)\n</code></pre> </li> </ul>"},{"location":"ko/components/listeners/prometheus/#circuit_breaker_state_transition_total-counter","title":"<code>circuit_breaker_state_transition_total</code> (Counter)","text":"<p>\uc774 \uba54\ud2b8\ub9ad\uc740 Circuit Breaker\uac00 \ud55c \uc0c1\ud0dc\uc5d0\uc11c \ub2e4\ub978 \uc0c1\ud0dc\ub85c \uc804\ud658\ub41c \ucd1d \ud69f\uc218\ub97c \uacc4\uc0b0\ud569\ub2c8\ub2e4. Counter\uc774\ubbc0\ub85c \uac12\uc740 \ud56d\uc0c1 \uc99d\uac00\ud558\uae30\ub9cc \ud569\ub2c8\ub2e4.</p> <p>\ub77c\ubca8:</p> <ul> <li><code>circuit_name</code>: Circuit Breaker\uc758 \uc774\ub984.</li> <li><code>old_state</code>: Circuit\uc774 \uc804\ud658\ub41c \uc774\uc804 \uc0c1\ud0dc.</li> <li><code>new_state</code>: Circuit\uc774 \uc804\ud658\ub41c \uc0c8\ub85c\uc6b4 \uc0c1\ud0dc.</li> </ul> <p>PromQL \uc0ac\uc6a9 \uc608\uc2dc:</p> <ul> <li> <p>\uc9c0\ub09c 5\ubd84 \ub3d9\uc548 Circuit\uc774 \uc5f4\ub9b0 \ube44\uc728 \uacc4\uc0b0:</p> <pre><code>sum(rate(circuit_breaker_state_transition_total{new_state=\"open\"}[5m])) by (circuit_name)\n</code></pre> </li> <li> <p>\uc9c0\ub09c 1\uc2dc\uac04 \ub3d9\uc548 <code>HALF_OPEN</code> \uc0c1\ud0dc\ub85c\uc758 \ubaa8\ub4e0 \uc804\ud658 \ud69f\uc218 \uacc4\uc0b0:</p> <pre><code>increase(circuit_breaker_state_transition_total{new_state=\"half_open\"}[1h])\n</code></pre> </li> </ul>"},{"location":"ko/components/listeners/prometheus/#usage","title":"\uc0ac\uc6a9\ubc95","text":""},{"location":"ko/components/listeners/prometheus/#_1","title":"\uae30\ubcf8 \uc124\uc815","text":"<p>\uac04\ub2e8\ud55c \uc2a4\ud06c\ub9bd\ud2b8\ub098 \ubc31\uadf8\ub77c\uc6b4\ub4dc \uc6cc\ucee4\uc758 \uacbd\uc6b0, Prometheus \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 HTTP \uc11c\ubc84\ub97c \ubcc4\ub3c4\uc758 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc2dc\uc791\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# \ud3ec\ud2b8 8000\uc5d0\uc11c Prometheus \uba54\ud2b8\ub9ad \uc11c\ubc84\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4.\n# \uc774 \uc11c\ubc84\ub294 \ubc31\uadf8\ub77c\uc6b4\ub4dc \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc2e4\ud589\ub418\uba70 \ube14\ub85c\ud0b9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\nstart_http_server(8000)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n# \uc5ec\uae30\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uc9c1\uc744 \uc791\uc131...\n# \uba54\ud2b8\ub9ad\uc740 http://localhost:8000/metrics \uc5d0\uc11c \ud655\uc778 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#fastapi","title":"\uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\uc640\uc758 \ud1b5\ud569 (FastAPI)","text":"<p>FastAPI \ub610\ub294 Flask\uc640 \uac19\uc740 \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc0ac\uc6a9\ud560 \ub54c\ub294 \ubcc4\ub3c4\uc758 \uc11c\ubc84\ub97c \uc2dc\uc791\ud558\ub294 \ub300\uc2e0 Prometheus \uba54\ud2b8\ub9ad \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc9c1\uc811 \ud1b5\ud569\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>from fastapi import FastAPI\nfrom prometheus_client import make_asgi_app\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\n# Prometheus \uba54\ud2b8\ub9ad\uc744 \uc704\ud55c ASGI \uc571\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\nmetrics_app = make_asgi_app()\n\napp = FastAPI()\n# /metrics \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc5d0 \uba54\ud2b8\ub9ad \uc571\uc744 \ub9c8\uc6b4\ud2b8\ud569\ub2c8\ub2e4.\napp.mount(\"/metrics\", metrics_app)\n\ncb = AsyncCircuitBreaker(\n    name=\"api_gateway\",\n    ...,\n    listeners=[PrometheusListener()],\n)\n\n@app.get(\"/\")\n@cb\nasync def root():\n    # \ubcf4\ud638\ub41c API \ub85c\uc9c1...\n    return {\"message\": \"Hello World\"}\n</code></pre> <p>\ucc38\uace0: <code>prometheus-client</code> \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc2a4\ub808\ub4dc \uc548\uc804\ud558\ubbc0\ub85c, \ub2e8\uc77c <code>PrometheusListener</code> \uc778\uc2a4\ud134\uc2a4\ub97c \ub3d9\uae30 \ubc0f \ube44\ub3d9\uae30 Circuit Breaker \ubaa8\ub450\uc5d0\uc11c \uc548\uc804\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uacf5\uc2dd \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc2ed\uc2dc\uc624.</p>"},{"location":"ko/components/listeners/prometheus/#multiple-circuits","title":"\uc5ec\ub7ec Circuit Breaker \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\ub3d9\uc77c\ud55c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc5ec\ub7ec Circuit Breaker\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub824\uba74, \ub3d9\uc77c\ud55c <code>PrometheusListener</code> \uc778\uc2a4\ud134\uc2a4\ub97c \uc7ac\uc0ac\uc6a9\ud558\uae30\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4. \uac01 \ube0c\ub808\uc774\ucee4\uc5d0 \ub300\ud574 \uba54\ud2b8\ub9ad\uc740 <code>circuit_name</code>\uc73c\ub85c \uc62c\ubc14\ub974\uac8c \ub77c\ubca8\ub9c1\ub429\ub2c8\ub2e4.</p> <pre><code>from prometheus_client import start_http_server\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.prometheus import PrometheusListener\n\nstart_http_server(8000)\n\n# \ub2e8\uc77c Listener \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.\nlistener = PrometheusListener()\n\n# \uc5ec\ub7ec \ube0c\ub808\uc774\ucee4\uc5d0 \ub3d9\uc77c\ud55c \uc778\uc2a4\ud134\uc2a4\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\npayment_cb = CircuitBreaker(name=\"payment_api\", ..., listeners=[listener])\ninventory_cb = CircuitBreaker(name=\"inventory_api\", ..., listeners=[listener])\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#grafana","title":"Grafana \ub300\uc2dc\ubcf4\ub4dc \uc608\uc2dc","text":"<p>\ub2e4\uc74c\uc740 Grafana \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c \uc774\ub7ec\ud55c \uba54\ud2b8\ub9ad\uc744 \uc2dc\uac01\ud654\ud558\ub294 \ubc29\ubc95\uc758 \uba87 \uac00\uc9c0 \uc608\uc2dc\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/prometheus/#circuit-stat","title":"\ud328\ub110: \"\ud604\uc7ac \uc5f4\ub9b0 Circuit\" (Stat)","text":"<ul> <li>\ucffc\ub9ac: <code>sum(circuit_breaker_state{state=\"open\"})</code></li> <li>\uc2dc\uac01\ud654: Stat</li> <li>\ub2e8\uc704: \uc5c6\uc74c</li> <li>\uc784\uacc4\uac12: \uae30\ubcf8: 0, \ub2e8\uacc4 1: 1 (\uacbd\uace0), \ub2e8\uacc4 2: 5 (\uce58\uba85\uc801)</li> <li>\uc124\uba85: \ud604\uc7ac <code>OPEN</code> \uc0c1\ud0dc\uc5d0 \uc788\ub294 \ubaa8\ub4e0 Circuit Breaker\uc758 \uc2e4\uc2dc\uac04 \uc218\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/prometheus/#circuit-5-time-series","title":"\ud328\ub110: \"Circuit \ud2b8\ub9bd\ub960 (5\ubd84)\" (Time Series)","text":"<ul> <li>\ucffc\ub9ac: <code>sum(rate(circuit_breaker_state_transition_total{new_state=\"open\"}[5m])) by (circuit_name)</code></li> <li>\uc2dc\uac01\ud654: \uc2dc\uacc4\uc5f4</li> <li>\ub2e8\uc704: \ucd08\ub2f9 \uc804\ud658 \uc218</li> <li>\ubc94\ub840: <code>{{circuit_name}}</code></li> <li>\uc124\uba85: \uc9c0\ub09c 5\ubd84 \ub3d9\uc548 \ud3c9\uade0\ud654\ub41c, Circuit\uc774 \uc5f4\ub9b0 \ucd08\ub2f9 \ud2b8\ub9bd\ub960\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. \ucd94\uc138\ub97c \ud30c\uc545\ud558\uace0 \ubb38\uc81c \uc788\ub294 \uc11c\ube44\uc2a4\ub97c \uc2dd\ubcc4\ud558\ub294 \ub370 \uc720\uc6a9\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/prometheus/#circuit-pie-chart","title":"\ud328\ub110: \"Circuit \uc0c1\ud0dc \uac1c\uc694\" (Pie Chart)","text":"<ul> <li>\ucffc\ub9ac: <code>sum(circuit_breaker_state) by (state)</code></li> <li>\uc2dc\uac01\ud654: \ud30c\uc774 \ucc28\ud2b8</li> <li>\ub2e8\uc704: \uc5c6\uc74c</li> <li>\uac12 \uc635\uc158: <code>\ubaa8\ub4e0 \uac12</code></li> <li>\uc124\uba85: \uc804\uccb4 \uc2dc\uc2a4\ud15c\uc5d0 \uac78\uccd0 Circuit Breaker \uc0c1\ud0dc \ubd84\ud3ec\uc5d0 \ub300\ud55c \ub192\uc740 \uc218\uc900\uc758 \uac1c\uc694\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/prometheus/#custom-metrics","title":"\ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad","text":"<p>\ucd94\uac00\uc801\uc778 \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad\uc744 \ub0b4\ubcf4\ub0b4\uc57c \ud558\ub294 \uacbd\uc6b0, <code>IListener</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uc5ec \uc790\uccb4 Listener\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>from prometheus_client import Counter\nfrom fluxgate.interfaces import IListener\nfrom fluxgate.signal import Signal\nfrom fluxgate.state import StateEnum\n\n# OPEN \uc804\ud658\ub9cc \uacc4\uc0b0\ud558\ub294 \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad\uc744 \uc815\uc758\ud569\ub2c8\ub2e4.\nOPEN_TRANSITIONS = Counter(\n    'circuit_breaker_open_total',\n    'Circuit Breaker\uac00 \uc5f4\ub9b0 \ucd1d \ud69f\uc218',\n    ['circuit_name']\n)\n\nclass CustomPrometheusListener(IListener):\n    def __call__(self, signal: Signal) -&gt; None:\n        if signal.new_state == StateEnum.OPEN:\n            OPEN_TRANSITIONS.labels(circuit_name=signal.circuit_name).inc()\n</code></pre>"},{"location":"ko/components/listeners/prometheus/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>SlackListener: \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc54c\ub9bc\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.</li> <li>LogListener: \uc804\ud658\uc5d0 \ub300\ud55c \uc0c1\uc138 \ub85c\uae45\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li>Listener \uac1c\uc694: \uba54\uc778 Listener \ud398\uc774\uc9c0\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/components/listeners/slack/","title":"SlackListener / AsyncSlackListener","text":"<p><code>SlackListener</code>\uc640 <code>AsyncSlackListener</code>\ub294 Circuit Breaker \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ub300\ud55c \uc2e4\uc2dc\uac04 \uc54c\ub9bc\uc744 Slack \ucc44\ub110\ub85c \uc9c1\uc811 \ud478\uc2dc\ud569\ub2c8\ub2e4. \uc774\ub294 \uc911\uc694\ud55c \uc11c\ube44\uc2a4\uac00 \uc2e4\ud328\ud558\uae30 \uc2dc\uc791\ud560 \ub54c \ub2f4\ub2f9 \uc5d4\uc9c0\ub2c8\uc5b4\uc5d0\uac8c \uc989\uc2dc \uc54c\ub824, \ub354 \ube60\ub978 \ub300\uc751\uc744 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \ub370 \ub9e4\uc6b0 \uc911\uc694\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/slack/#installation","title":"\uc124\uce58","text":"<p>\uc774 Listener\ub294 HTTP \uc694\uccad\uc744 \uc704\ud574 <code>httpx</code>\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc74c \uba85\ub839\uc5b4\ub85c \ucd94\uac00 \uc124\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>pip install fluxgate[slack]\n</code></pre>"},{"location":"ko/components/listeners/slack/#slack-setup","title":"Slack \uc124\uc815","text":""},{"location":"ko/components/listeners/slack/#1-slack","title":"1. Slack \uc571 \uc0dd\uc131","text":"<ol> <li>https://api.slack.com/apps\uc73c\ub85c \uc774\ub3d9\ud558\uc5ec Create New App\uc744 \ud074\ub9ad\ud569\ub2c8\ub2e4.</li> <li>From scratch\ub97c \uc120\ud0dd\ud558\uace0, \uc571 \uc774\ub984(\uc608: \"Circuit Breaker Alerts\")\uc744 \uc785\ub825\ud55c \ub2e4\uc74c, \uc791\uc5c5 \uacf5\uac04\uc744 \uc120\ud0dd\ud569\ub2c8\ub2e4.</li> </ol>"},{"location":"ko/components/listeners/slack/#2","title":"2. \ubd07 \ud1a0\ud070 \ubc94\uc704 \ucd94\uac00","text":"<p>\uc0ac\uc774\ub4dc\ubc14\uc5d0\uc11c OAuth &amp; Permissions\ub85c \uc774\ub3d9\ud558\uc5ec \"Scopes\" \uc139\uc158\uae4c\uc9c0 \uc544\ub798\ub85c \uc2a4\ud06c\ub864\ud569\ub2c8\ub2e4. \ub2e4\uc74c \ubd07 \ud1a0\ud070 \ubc94\uc704\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.</p> <ul> <li><code>chat:write</code>: \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b4\uae30 \uc704\ud568.</li> <li><code>chat:write.public</code>: \uacf5\uac1c \ucc44\ub110\uc5d0 \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b4\uae30 \uc704\ud568 (\uc120\ud0dd \uc0ac\ud56d).</li> </ul>"},{"location":"ko/components/listeners/slack/#3","title":"3. \uc571 \uc124\uce58 \ubc0f \ud1a0\ud070 \ubcf5\uc0ac","text":"<ol> <li>OAuth &amp; Permissions \ud398\uc774\uc9c0 \uc0c1\ub2e8\uc73c\ub85c \ub2e4\uc2dc \uc2a4\ud06c\ub864\ud558\uc5ec Install to Workspace\ub97c \ud074\ub9ad\ud569\ub2c8\ub2e4.</li> <li>\uc124\uce58 \ud6c4 \ubd07 \uc0ac\uc6a9\uc790 OAuth \ud1a0\ud070\uc744 \ubcf5\uc0ac\ud569\ub2c8\ub2e4. <code>xoxb-</code>\ub85c \uc2dc\uc791\ud569\ub2c8\ub2e4.</li> </ol>"},{"location":"ko/components/listeners/slack/#4-id","title":"4. \ucc44\ub110 ID \uac00\uc838\uc624\uae30 \ubc0f \ubd07 \ucd08\ub300","text":"<ol> <li>Slack \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc54c\ub9bc\uc744 \ubc1b\uc744 \ucc44\ub110\uc744 \ub9c8\uc6b0\uc2a4 \uc624\ub978\ucabd \ubc84\ud2bc\uc73c\ub85c \ud074\ub9ad\ud558\uace0 \"\ucc44\ub110 \uc138\ubd80 \uc815\ubcf4 \ubcf4\uae30\"\ub97c \uc120\ud0dd\ud55c \ub2e4\uc74c, \ud31d\uc5c5 \ud558\ub2e8\uc5d0\uc11c \ucc44\ub110 ID\ub97c \ubcf5\uc0ac\ud569\ub2c8\ub2e4(\uc608: <code>C1234567890</code>).</li> <li>\ub3d9\uc77c\ud55c \ucc44\ub110\uc5d0\uc11c <code>/invite @YourAppName</code>\uc744 \uc785\ub825\ud558\uc5ec \ubd07\uc744 \ucc44\ub110\uc5d0 \ucd94\uac00\ud558\uba74 \uba54\uc2dc\uc9c0\ub97c \uac8c\uc2dc\ud560 \uad8c\ud55c\uc744 \uac16\uac8c \ub429\ub2c8\ub2e4.</li> </ol>"},{"location":"ko/components/listeners/slack/#usage","title":"\uc0ac\uc6a9\ubc95","text":"<p>Slack \ud1a0\ud070\uacfc \ucc44\ub110 ID\ub97c \uc18c\uc2a4 \ucf54\ub4dc\uc5d0 \ud558\ub4dc \ucf54\ub529\ud558\ub294 \ub300\uc2e0 \ud658\uacbd \ubcc0\uc218\ub85c \uc800\uc7a5\ud558\ub294 \uac83\uc744 \uac15\ub825\ud788 \uad8c\uc7a5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/slack/#slacklistener","title":"\ub3d9\uae30 (<code>SlackListener</code>)","text":"<p>\ud45c\uc900 <code>CircuitBreaker</code>\uc640 \ud568\uaed8 <code>SlackListener</code>\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <pre><code>import os\nfrom fluxgate import CircuitBreaker\nfrom fluxgate.listeners.slack import SlackListener\n\nslack_listener = SlackListener(\n    channel=os.environ[\"SLACK_CHANNEL_ID\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = CircuitBreaker(\n    name=\"payment_api\",\n    ...,\n    listeners=[slack_listener],\n)\n</code></pre>"},{"location":"ko/components/listeners/slack/#asyncslacklistener","title":"\ube44\ub3d9\uae30 (<code>AsyncSlackListener</code>)","text":"<p><code>AsyncCircuitBreaker</code>\uc640 \ud568\uaed8 <code>AsyncSlackListener</code>\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uae30\ubcf8 HTTP \ud638\ucd9c\uc740 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4.</p> <pre><code>import os\nfrom fluxgate import AsyncCircuitBreaker\nfrom fluxgate.listeners.slack import AsyncSlackListener\n\nslack_listener = AsyncSlackListener(\n    channel=os.environ[\"SLACK_CHANNEL_ID\"],\n    token=os.environ[\"SLACK_BOT_TOKEN\"]\n)\n\ncb = AsyncCircuitBreaker(\n    name=\"async_api\",\n    ...,\n    listeners=[slack_listener],\n)\n</code></pre>"},{"location":"ko/components/listeners/slack/#message-format","title":"\uba54\uc2dc\uc9c0 \ud615\uc2dd","text":"<p>Listener\ub294 \uc7a5\uc560 \uc0ac\uc774\ud074\uc744 \uae30\ubc18\uc73c\ub85c \ub300\ud654\ub97c \uccb4\uacc4\uc801\uc73c\ub85c \uc720\uc9c0\ud558\uae30 \uc704\ud574 \uc2a4\ub808\ub4dc \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0c5\ub2c8\ub2e4:</p> <ul> <li>\uc2a4\ub808\ub4dc \uc2dc\uc791: \u2192 OPEN \uc804\ud658 \uc2dc (\uc0c8\ub85c\uc6b4 \ub610\ub294 \uc9c0\uc18d\ub418\ub294 \uc7a5\uc560 \uc0ac\uc774\ud074)</li> <li>\uc2a4\ub808\ub4dc \uc885\ub8cc: \u2192 CLOSED, \u2192 DISABLED, \ub610\ub294 \u2192 METRICS_ONLY \uc804\ud658 \uc2dc</li> </ul> \uc804\ud658 \uc81c\ubaa9 \uc0c9\uc0c1 \uc124\uba85 CLOSED \u2192 OPEN \ud83d\udea8 Circuit Breaker Triggered \ube68\uac04\uc0c9 \uc0c8 \uc2a4\ub808\ub4dc \uc2dc\uc791 OPEN \u2192 HALF_OPEN \ud83d\udd04 Attempting Circuit Breaker Recovery \uc8fc\ud669\uc0c9 \uc2a4\ub808\ub4dc\uc5d0 \ud68c\uc2e0 HALF_OPEN \u2192 OPEN \u26a0\ufe0f Circuit Breaker Re-triggered \ube68\uac04\uc0c9 \uc2a4\ub808\ub4dc\uc5d0 \ud68c\uc2e0 (\uc2a4\ub808\ub4dc \uc720\uc9c0) HALF_OPEN \u2192 CLOSED \u2705 Circuit Breaker Recovered \ub179\uc0c9 \ud68c\uc2e0 + \ube0c\ub85c\ub4dc\uce90\uc2a4\ud2b8 \ud6c4 \uc2a4\ub808\ub4dc \uc815\ub9ac \uae30\ud0c0 \ubaa8\ub4e0 \uc804\ud658 \u2139\ufe0f Circuit Breaker State Changed \ud68c\uc0c9 \uc218\ub3d9 \uc804\ud658\uc6a9 fallback <p><code>CLOSED</code>, <code>DISABLED</code>, <code>METRICS_ONLY</code>\ub85c \uc804\ud658 \uc2dc \ud604\uc7ac \uc2a4\ub808\ub4dc\uac00 \uc885\ub8cc\ub418\uc5b4, \ub2e4\uc74c \uc7a5\uc560 \uc0ac\uc774\ud074\uc740 \uc0c8 \uc2a4\ub808\ub4dc\ub85c \uc2dc\uc791\ub429\ub2c8\ub2e4. <code>FORCED_OPEN</code>\uc73c\ub85c \uc804\ud658 \uc2dc\uc5d0\ub294 \uc7a5\uc560 \uc0ac\uc774\ud074\uc774 \uacc4\uc18d\ub418\ubbc0\ub85c \uc2a4\ub808\ub4dc\uac00 \uc720\uc9c0\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/components/listeners/slack/#_1","title":"\uace0\uae09 \uc0ac\uc6a9\ubc95","text":""},{"location":"ko/components/listeners/slack/#custom-messages","title":"\uc0ac\uc6a9\uc790 \uc815\uc758 \uba54\uc2dc\uc9c0","text":"<p>\uba54\uc2dc\uc9c0 \ud15c\ud50c\ub9bf\uc744 \uc0ac\uc6a9\uc790 \uc815\uc758\ud558\ub824\uba74(\uc608: \ub2e4\ub978 \uc5b8\uc5b4) <code>SlackListener</code>\ub97c \uc0c1\uc18d\ud558\uace0 \ud074\ub798\uc2a4 \uc18d\uc131\uc744 \uc624\ubc84\ub77c\uc774\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uac01 \ud15c\ud50c\ub9bf\uc740 \uc138 \uac1c\uc758 \ud544\uc218 \ud0a4\ub97c \uac00\uc9c4 <code>Template</code> TypedDict\uc785\ub2c8\ub2e4:</p> <ul> <li><code>title</code>: \uba54\uc2dc\uc9c0 \uc81c\ubaa9 (\uc774\ubaa8\uc9c0 \uc9c0\uc6d0)</li> <li><code>color</code>: \ucca8\ubd80 \ud30c\uc77c \uc0ac\uc774\ub4dc\ubc14\uc758 Hex \uc0c9\uc0c1 \ucf54\ub4dc</li> <li><code>description</code>: \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \ub300\ud55c \uc0c1\uc138 \uc124\uba85</li> </ul> <pre><code>from fluxgate.listeners.slack import SlackListener, Template\nfrom fluxgate.state import StateEnum\n\nclass KoreanSlackListener(SlackListener):\n    \"\"\"\ud55c\uad6d\uc5b4 \uba54\uc2dc\uc9c0\ub97c \uc0ac\uc6a9\ud558\ub294 SlackListener.\"\"\"\n\n    TRANSITION_TEMPLATES: dict[tuple[StateEnum, StateEnum], Template] = {\n        (StateEnum.CLOSED, StateEnum.OPEN): {\n            \"title\": \"\ud83d\udea8 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc791\ub3d9\",\n            \"color\": \"#FF4C4C\",\n            \"description\": \"\uc694\uccad \uc2e4\ud328\uc728\uc774 \uc784\uacc4\uac12\uc744 \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4.\",\n        },\n        (StateEnum.OPEN, StateEnum.HALF_OPEN): {\n            \"title\": \"\ud83d\udd04 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \ubcf5\uad6c \uc2dc\ub3c4 \uc911\",\n            \"color\": \"#FFA500\",\n            \"description\": \"\ubd80\ubd84 \uc694\uccad\uc73c\ub85c \uc11c\ube44\uc2a4 \uc0c1\ud0dc\ub97c \ud14c\uc2a4\ud2b8\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\",\n        },\n        (StateEnum.HALF_OPEN, StateEnum.OPEN): {\n            \"title\": \"\u26a0\ufe0f \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc7ac\uc791\ub3d9\",\n            \"color\": \"#FF4C4C\",\n            \"description\": \"\ud14c\uc2a4\ud2b8 \uc694\uccad\uc774 \uc2e4\ud328\ud558\uc5ec \uc5f4\ub9bc \uc0c1\ud0dc\ub85c \ubcf5\uadc0\ud569\ub2c8\ub2e4.\",\n        },\n        (StateEnum.HALF_OPEN, StateEnum.CLOSED): {\n            \"title\": \"\u2705 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \ubcf5\uad6c\ub428\",\n            \"color\": \"#36a64f\",\n            \"description\": \"\ud14c\uc2a4\ud2b8 \uc694\uccad\uc774 \uc131\uacf5\ud558\uc5ec \uc11c\ube44\uc2a4\uac00 \uc815\uc0c1\uc785\ub2c8\ub2e4.\",\n        },\n    }\n\n    FALLBACK_TEMPLATE: Template = {\n        \"title\": \"\u2139\ufe0f \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc \ubcc0\uacbd\",\n        \"color\": \"#808080\",\n        \"description\": \"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\",\n    }\n</code></pre>"},{"location":"ko/components/listeners/slack/#troubleshooting","title":"\ubb38\uc81c \ud574\uacb0","text":"<ul> <li><code>invalid_auth</code> \uc624\ub958: \ubd07 \ud1a0\ud070\uc774 \uc798\ubabb\ub418\uc5c8\uac70\ub098 \ud574\uc9c0\ub418\uc5c8\uc744 \uac00\ub2a5\uc131\uc774 \uc788\uc2b5\ub2c8\ub2e4.</li> <li><code>not_in_channel</code> \uc624\ub958: \ubd07\uc744 \ucc44\ub110\uc5d0 \ucd08\ub300\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ucc44\ub110\uc5d0\uc11c <code>/invite @YourAppName</code>\uc744 \uc785\ub825\ud558\uc2ed\uc2dc\uc624.</li> <li><code>channel_not_found</code> \uc624\ub958: \ucc44\ub110 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.</li> <li>\uba54\uc2dc\uc9c0\uac00 \ub098\ud0c0\ub098\uc9c0 \uc54a\uc74c<ul> <li>OAuth &amp; Permissions\uc5d0\uc11c <code>chat:write</code> \ubc94\uc704\uac00 \ucd94\uac00\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uc2ed\uc2dc\uc624.</li> <li>\ubc94\uc704\uac00 \ubcc0\uacbd\ub41c \ud6c4 \uc571\uc774 \uc791\uc5c5 \uacf5\uac04\uc5d0 \ub2e4\uc2dc \uc124\uce58\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uc2ed\uc2dc\uc624.</li> <li>Circuit Breaker\uac00 \uc2e4\uc81c\ub85c \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc2ed\uc2dc\uc624.</li> </ul> </li> </ul>"},{"location":"ko/components/listeners/slack/#next-steps","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li>PrometheusListener: Metric \uae30\ubc18 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc54c\ub9bc\uc744 \uc124\uc815\ud569\ub2c8\ub2e4.</li> <li>LogListener: \uc804\ud658\uc5d0 \ub300\ud55c \uc0c1\uc138 \ub85c\uae45\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li>Listener \uac1c\uc694: \uba54\uc778 Listener \ud398\uc774\uc9c0\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.</li> </ul>"}]}